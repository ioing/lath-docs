/*! For license information please see 740.js.LICENSE.txt */
"use strict";(self.webpackChunklath_docs=self.webpackChunklath_docs||[]).push([[740],{740:(t,e,i)=>{i.r(e),i.d(e,{E:()=>n,S:()=>k,a:()=>p,i:()=>X,r:()=>u,s:()=>c});var s=i(657);const o=Symbol("__EventGroupName__");class n{constructor(){this._events={}}on(t,e,i){var s;return Object.defineProperty(e,o,{value:i,writable:!0}),this._events[t]||(this._events[t]=[]),null===(s=this._events[t])||void 0===s||s.push(e),this}one(t,e,i){var s;const n=(...i)=>{e(...i),this.off(t,n)};return Object.defineProperty(n,o,{value:i,writable:!0}),this._events[t]||(this._events[t]=[]),null===(s=this._events[t])||void 0===s||s.push(n),this}off(t,e){var i,s,o;if(!this._events[t])return this;const n=null!==(s=null===(i=this._events[t])||void 0===i?void 0:i.indexOf(e))&&void 0!==s?s:-1;return n>-1&&(null===(o=this._events[t])||void 0===o||o.splice(n,1)),this}removeEventGroup(t){const e=e=>{var i;return null===(i=this._events[e])||void 0===i?void 0:i.filter((e=>e[o]!==t))};for(const t in this._events)this._events[t]=e(t);return this}trigger(t,...e){var i;return this._events[t]?(null===(i=this._events[t])||void 0===i||i.forEach((i=>{try{i(...e)}catch(e){this.off(t,i),this.trigger("error",e)}})),this):this}}class r extends n{constructor(){super(...arguments),this.applets={},this.residentApplets=[],this.presetAppletsView={},this.historyNodeLocation=history.length,this.routerRegExp=/([^#/]+)(.+)?/}resolveURL(t){const e=new URL(t,window.location.toString()),i=e;return void 0===e.href&&(i.href=String(e)),i}verifyAppletSrcLegitimacy(t){const e=this.config.capture;if(e)return this.captureAppletSrc(t,e);const i=this.config.allowHosts||[];if(0===i.length)return!0;i.push(location.host);const s=new URL(decodeURIComponent(t),window.location.toString()).host;for(const t of i)if(s===t)return!0;return!1}captureAppletSrc(t,e=this.config.capture){const i=this.resolveURL(t),s=i.origin+i.pathname;if("string"==typeof e){if(e===s)return!0}else if("function"==typeof e&&e(i,t))return!0;return!1}promiseApplet(t){return Promise.resolve(t())}checkIsPresetAppletsView(t){return this.residentApplets.includes(t)}delPresetAppletsView(t,e=!1){if(e&&!this.checkIsPresetAppletsView(t)){const e=this.presetAppletsView[t];e&&e.parentElement&&e.parentElement.removeChild(e)}delete this.presetAppletsView[t]}setPrestAppletsView(t){this.residentApplets=Object.keys(t),this.presetAppletsView=t}setting(t){this.options=t}}class l extends r{constructor(){var t,e;super(...arguments),this.overscrollHistoryNavigation={moment:0,type:""},this.properties={darkTheme:null===(e=null===(t=window.matchMedia)||void 0===t?void 0:t.call(window,"(prefers-color-scheme: dark)"))||void 0===e?void 0:e.matches},this.activeState="active"}get route(){const t=this.routerRegExp.exec(location.hash)||[],e=t[1],i=t[2],s=location.search;return{id:e?decodeURIComponent(e):"",param:i?decodeURIComponent(i):"",search:s}}get exists(){try{return parseInt(sessionStorage.getItem(location.pathname+"__EXISTS")||"-1",10)===history.length}catch(t){return!1}}get activityApplet(){const t=this.segue.id;return this.applets[t]}get prevActivityApplet(){const t=this.segue.prevId;return this.applets[t]}get activityLevel(){var t,e;return(null!==(e=null===(t=this.activityApplet)||void 0===t?void 0:t.level)&&void 0!==e?e:0)+1}setExists(){const t=location.pathname+"__EXISTS",e=String(history.length);return new Promise(((i,s)=>{try{sessionStorage.setItem(t,e),i()}catch(i){try{sessionStorage.clear(),sessionStorage.setItem(t,e)}catch(t){s()}}}))}activate(t){const e=t?"active":"frozen",i="application-"+e;if(window.applicationActiveState!==e){this.activeState=e,this.trigger(e),window.applicationActiveState=e,window.postMessage({type:i},"*");for(const t in this.applets){const e=this.applets[t];e.sandbox&&!e.sameOrigin&&e.triggerWindow(i)}}}}class a extends n{constructor(t,e,i){super(),this.param="",this.slide=null,this.modality=null,this.view=null,this.img=null,this.snapshot=null,this.snapshotTime=-1,this.visitTime=-1,this.events={transformStart:()=>{},transformEnd:()=>{},boot:()=>{},load:()=>{},loadError:()=>{},preload:()=>{},destroy:()=>{}},this.darkTask=[],this.createTime=Date.now(),this.transient=!1,this.config={title:"",level:0,source:{},prerender:[],apply:["smart-setTimeout","proxy-link","tap-highlight"],background:"auto",free:!1},this.components=[],this.resources={script:[],image:[],worker:[],video:[],audio:[],font:[],style:[]},this.id=t,this.model=e,this.application=i;const{config:s,resources:o,events:n,components:r}=this.setDefaultConfig(e,t);Object.assign(this.config,s),Object.assign(this.resources,o),Object.assign(this.events,n),r&&(this.components=r)}get self(){return this.application.applets[this.id]||this}setDefaultConfig(t,e){var i,o,n,r,l,a,h,c,d;const p=t.config;if("frameworks"!==e&&"system"!==e||(p.free&&(0,s.t)(1101,"warn"),((null===(i=p.source)||void 0===i?void 0:i.html)||(null===(o=p.source)||void 0===o?void 0:o.src))&&(0,s.t)(1102,"warn")),p.portal&&(p.free||(0,s.t)(1103,"warn")),(null!==(n=p.level)&&void 0!==n?n:0)>1e4&&(0,s.t)(1104,"warn"),null===(r=null==p?void 0:p.unApply)||void 0===r?void 0:r.length){const t=p.unApply;this.config.apply=null===(l=this.config.apply)||void 0===l?void 0:l.filter((e=>!t.includes(e)))}if(0===(null===(a=p.modality)||void 0===a?void 0:a.indexOf("sheet"))?(p.animation&&(0,s.t)(1105,"warn"),p.animation="popup"):"popup"===p.animation&&(p.modality="sheet",(0,s.t)(1106,"warn")),0===(null===(h=p.modality)||void 0===h?void 0:h.indexOf("paper"))){p.animation&&(0,s.t)(1105,"warn");const{maskOpacity:t,swipeClosable:e}=p.paperOptions||{maskOpacity:.5,swipeClosable:!0};p.animation="stretch",p.sheetOptions={stillBackdrop:!0,noHandlebar:!0,maskOpacity:t,swipeClosable:e,borderRadius:"0px",top:"0px"}}else if(0===(null===(c=p.modality)||void 0===c?void 0:c.indexOf("overlay"))){p.animation&&(0,s.t)(1105,"warn"),p.color||(p.color="transparent");const{maskOpacity:t,swipeClosable:e}=p.overlayOptions||{maskOpacity:.5,swipeClosable:!1};p.animation="popup",p.sheetOptions={stillBackdrop:!0,noHandlebar:!0,maskOpacity:t,swipeClosable:e,borderRadius:"0px",top:"0px",useFade:!0}}return p.animation||(p.disableSwipeModel=!0),p.swipeTransitionType||(p.swipeTransitionType=null!==(d=p.swipeTransitionType)&&void 0!==d?d:(0,s.g)()?"slide":"zoom"),t}}class h extends a{constructor(){super(...arguments),this.visibility=!1,this.transforming=!1,this.viewLevel=0,this.status={preload:!1,prefetch:!1,prerender:!1,refreshing:!1,requestRefresh:!1,presetElements:!1}}get swipeModel(){var t;return!!(null!==(t=this.application.config.swipeModel)&&void 0!==t?t:"ontouchend"in document)}get sameOrigin(){return this.uri?new URL(this.uri,window.location.toString()).host===location.host:void 0===this.config.sandbox||!!this.config.sandbox.includes("allow-same-origin")}get level(){var t;return null!==(t=this.config.level)&&void 0!==t?t:0}setLevel(t){this.viewLevel=t}get rel(){return"system"===this.id?"system":"frameworks"===this.id?"frameworks":"applet"}get uri(){var t,e;return(null===(e=null===(t=this.config)||void 0===t?void 0:t.source)||void 0===e?void 0:e.src)||""}get source(){var t,e;const i=(null===(e=null===(t=this.config)||void 0===t?void 0:t.source)||void 0===e?void 0:e.html)||"";return"string"==typeof i?i:i()}get hasSource(){var t,e;return!(!this.uri&&!(null===(e=null===(t=this.config)||void 0===t?void 0:t.source)||void 0===e?void 0:e.html))}get noSource(){return!this.hasSource&&!this.config.render}get viewType(){var t;return"applet"!==this.rel?"shadow":this.hasSource?(null===(t=this.config)||void 0===t?void 0:t.portal)&&this.sameOrigin?"portal":"iframe":"shadow"}get color(){if("applet"!==this.rel)return"transparent";const t=this.application,e=t.properties.darkTheme,i=`${this.config.color||(e?"#000":"#fff")}`;return"frameworks"!==this.id&&"inherit"===i&&t.applets.frameworks.config.color||i}get expired(){var t,e;return!!this.view&&!(null===(t=this.application.prevActivityApplet)||void 0===t?void 0:t.config.modality)&&!!(this.status.requestRefresh||Date.now()-this.createTime>=(null!==(e=this.config.timeout)&&void 0!==e?e:6e7))}get isModality(){return!!this.config.modality}get isFullscreen(){return!this.isModality}get isPresetAppletsView(){return this.application.checkIsPresetAppletsView(this.id)}get useControls(){return!0!==this.config.disableSwipeModel&&this.swipeModel&&"applet"===this.rel&&this.isFullscreen}get noShadowDom(){return"shadow"===this.viewType&&!!this.config.noShadowDom}get mirroringString(){try{return localStorage.getItem("__MODULE_IMG__"+this.id)||""}catch(t){return""}}get contentWindow(){var t,e,i;return null!==(i=null===(e=null===(t=this.sandbox)||void 0===t?void 0:t.window)||void 0===e?void 0:e.window)&&void 0!==i?i:window}get contentDocument(){var t;if(this.sameOrigin)return"shadow"===this.viewType?this.viewport:null===(t=this.sandbox)||void 0===t?void 0:t.document}get mirroringHTML(){var t,e,i;if("shadow"===this.viewType)return null!==(e=null===(t=this.view)||void 0===t?void 0:t.outerHTML)&&void 0!==e?e:"";if(!this.sameOrigin)return"";const s=null===(i=this.sandbox)||void 0===i?void 0:i.sandbox,o=["script","template"];try{const t=s.contentDocument;if(!t)return"";const e=t.querySelectorAll("*"),i=[];return e.forEach((t=>{const e=t.tagName;o.includes(e)||(-1!==e.indexOf("-")&&(t.style.visibility="hidden"),i.push(t.outerHTML))})),i.join("\n")}catch(t){return""}}get subApplet(){if(this.slide)return this.application.applets[this.slide.activeId]}resume(){this.status={preload:!1,prefetch:!1,prerender:!1,refreshing:!1,requestRefresh:!1,presetElements:!1},this.darkTask=[],this.view=null,this.img=null}saveMirroring(){var t;if(!this.config.useMirroring||!this.sameOrigin)return Promise.resolve(!1);const e="__MODULE_IMG__"+this.id,i=null!==(t=this.mirroringHTML)&&void 0!==t?t:"";try{return localStorage.setItem(e,i),Promise.resolve(!0)}catch(t){return localStorage.clear(),localStorage.setItem(e,i),Promise.resolve(!1)}}setActionOrigin(t){t&&(this.segueActionOrigin=t)}getActionOrigin(){return this.segueActionOrigin}injectWindowVisibilityState(t){if(this.sameOrigin){const e=this.contentWindow;e&&(e.appletVisibilityState=t)}}triggerWindow(t){var e;null===(e=this.contentWindow)||void 0===e||e.postMessage({type:t,appletId:this.id,historyDirection:this.application.segue.historyDirection},"*")}}var c=window.setBackgroundTimeout||window.setTimeout,d=window.setBackgroundInterval||window.setInterval,p=window.requestIdleCallback||((t,e)=>{var i;const s=Date.now();return c((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-s))}})}),Math.min(null!==(i=null==e?void 0:e.timeout)&&void 0!==i?i:1,1))}),u=window.requestAnimationFrame||c;function v(){return!(!("scrollSnapAlign"in document.documentElement.style||"webkitScrollSnapAlign"in document.documentElement.style||"msScrollSnapAlign"in document.documentElement.style)||!(0,s.a)())}function m(t){if(t)return"string"==typeof t?t:t+"px"}var w=(t=0)=>new Promise((e=>{c(e,t)}));class f extends h{attach(t,e,i){t&&(this.viewport=t,this.parentApplet=e,this.mountBehavior=i)}removeContainer(){var t,e,i,s;this.isPresetAppletsView||(null===(e=null===(t=this.contentView)||void 0===t?void 0:t.parentElement)||void 0===e||e.removeChild(this.contentView),null===(s=null===(i=this.viewport)||void 0===i?void 0:i.parentNode)||void 0===s||s.removeChild(this.viewport),this.viewport=void 0,this.delPresetView())}clearContainer(){var t,e;this.isPresetAppletsView||(null===(e=null===(t=this.contentView)||void 0===t?void 0:t.parentElement)||void 0===e||e.removeChild(this.contentView),this.viewport&&(this.viewport.innerHTML=""),this.delPresetView())}delPresetView(){this.contentView=void 0,this.application.delPresetAppletsView(this.id,!0)}setParam(t){return this.param!==t?(this.param=t,this.destroy(!0)):Promise.resolve(!0)}show(){var t,e;const i=this.viewType;if("portal"!==i){for(const t of this.darkTask)t();this.transforming=!1,this.darkTask=[],this.visibility=!0,this.visitTime=Date.now(),this.trigger("show"),"iframe"===i&&(this.triggerWindow("applet-show"),this.injectWindowVisibilityState("visible")),null===(e=this.subApplet)||void 0===e||e.show()}else null===(t=this.view)||void 0===t||t.activate()}hide(){var t;this.transforming=!1,this.visibility=!1,this.trigger("hide"),"iframe"===this.viewType&&(this.triggerWindow("applet-hidden"),this.injectWindowVisibilityState("hidden")),null===(t=this.subApplet)||void 0===t||t.hide()}willShow(){var t;this.transforming=!0,this.trigger("willShow"),"iframe"===this.viewType&&(this.triggerWindow("applet-will-show"),this.injectWindowVisibilityState("willVisible")),null===(t=this.subApplet)||void 0===t||t.willShow()}willHide(){var t;this.transforming=!0,this.trigger("willHide"),"iframe"===this.viewType&&(this.triggerWindow("applet-will-hide"),this.injectWindowVisibilityState("willHidden")),null===(t=this.subApplet)||void 0===t||t.willHide()}willSegueShow(){this.trigger("willSegueShow")}willSegueHide(){this.trigger("willSegueHide")}destroy(t=!1){return new Promise((e=>{var i,s;return this.view?!0===this.status.presetElements||"frameworks"===this.rel||"system"===this.rel||(null===(i=this.application.segue)||void 0===i?void 0:i.id)===this.id&&!1===t?e(!1):("iframe"===this.viewType&&this.unload(),!1===t?this.removeContainer():this.clearContainer(),this.resume(),null===(s=this.events)||void 0===s||s.destroy(this.self),this.application.removeEventGroup(this.id),this.trigger("destroy"),void e(!0)):e(!0)}))}observer(t){var e;const i=this.sandbox?null===(e=this.sandbox.document)||void 0===e?void 0:e.documentElement:this.view;if(!i)return;const s=new MutationObserver((e=>{t(e)}));return s.observe(i,{subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),s}collectAllElements(t){const e=[],i=function(t){for(let s=0;s<t.length;s++){const o=t[s];e.push(o),o.shadowRoot&&i(o.shadowRoot.querySelectorAll("*"))}};return t.shadowRoot&&i(t.shadowRoot.querySelectorAll("*")),i(t.querySelectorAll("*")),e}autoMediaController(t){return new Promise(((e,i)=>{try{if("iframe"!==this.viewType)return e();if(void 0===this.sandbox)return e();const i=t.filter((t=>"video"===t.tagName||"audio"===t.tagName));for(const t in i){const e=i[t];(null==e?void 0:e.paused)||(e.pause(),this.darkTask.push((()=>{e.play()})))}}catch(t){i()}}))}destructiveTags(t){const e=["object","embed","applet","iframe"];return!!t.filter((t=>e.includes(t.tagName))).length}guarding(){return new Promise((t=>{var e;if("applet"!==this.rel)return t(!0);if(!0===this.config.background)return t(!0);if(!1===this.config.background)return t(!1);if("iframe"!==this.viewType)return t(!0);if(void 0===this.sandbox)return t(!0);if(!1===this.sameOrigin)return t(!1);const i=this.view;try{const s=null===(e=i.contentDocument)||void 0===e?void 0:e.documentElement;if(!s)return t(!0);const o=this.collectAllElements(s);if(!1!==this.config.mediaGuard&&this.autoMediaController(o).catch(t),this.destructiveTags(o))return t(!1);const n={times:0},r=this.observer((()=>{n.times++,n.times>1e3&&(t(!1),this.mutationObserver.disconnect())}));if(!r)return;this.mutationObserver=r,c((()=>{n.times>10&&t(!1)}),3e3)}catch(e){t(!0)}}))}cancelGuard(){var t;null===(t=this.mutationObserver)||void 0===t||t.disconnect()}unload(t){var e;return void 0===t&&(t=null===(e=this.sandbox)||void 0===e?void 0:e.sandbox),new Promise((e=>{var i,s,o;if(this.cancelGuard(),!t)return e();t===(null===(i=this.sandbox)||void 0===i?void 0:i.sandbox)&&this.saveMirroring();try{t.contentWindow&&(t.contentWindow.onunload=null),t.style.display="none",t.src="about:blank";const e=null===(s=t.contentWindow)||void 0===s?void 0:s.window,i=t.contentDocument;null==e||e.location.reload(),null==i||i.open(),null==i||i.write(""),null==i||i.close()}catch(t){}null===(o=t.parentNode)||void 0===o||o.removeChild(t),e()}))}}class g{constructor(t,e,i="src"){this.blankURL="about:blank";const s=this.sandbox=document.createElement("iframe");return s["source"===i&&t?"srcdoc":"src"]=t||this.blankURL,s.style.display="none",this.setting=e,this}get window(){return this.sandbox.contentWindow}get document(){return this.sandbox.contentDocument}get origin(){return this.src===this.blankURL?null:this.src}set src(t){this.sandbox.src=t}set onunload(t){this.window.onunload=t}set onload(t){this.sandbox.onload=t}set onerror(t){this.sandbox.onerror=t}set(t=this.setting){void 0!==t&&this.sandbox.setAttribute("sandbox",t)}reset(t){return this.exit(),this.set(t),this}open(){var t;return null===(t=this.document)||void 0===t||t.open(),this}write(t='<head><meta charset="utf-8"></head>'){var e;return t="<!DOCTYPE html>"+t,null===(e=this.document)||void 0===e||e.write(t),this}close(){var t;return null===(t=this.document)||void 0===t||t.close(),this}append(t){this.open(),this.write(t),this.close()}enter(t){this.set(),t.appendChild(this.sandbox)}exit(){const t=this.sandbox.parentNode;t&&t.removeChild(this.sandbox)}}class y extends f{dependenciesLoad(t,e="src"){return new Promise(((i,s)=>{const o=document.head,n=new g(t,"",e);n.onload=t=>{setTimeout((()=>{n.exit()}),2e3),i(t)},n.onerror=t=>{n.exit(),s(t)},n.enter(o)}))}preload(){return(0,s._)(this,void 0,void 0,(function*(){return this.dependenciesLoad(this.uri||(yield this.source),this.uri?"src":"source").then((()=>{var t;this.status.preload=!0,null===(t=this.events)||void 0===t||t.preload(this.self),this.trigger("preload")}))}))}prefetch(){return new Promise(((t,e)=>{Promise.all([this.prefetchStatic(this.resources.script,"script"),this.prefetchStatic(this.resources.image,"image"),this.prefetchStatic(this.resources.worker,"worker"),this.prefetchStatic(this.resources.video,"video"),this.prefetchStatic(this.resources.audio,"audio"),this.prefetchStatic(this.resources.font,"font"),this.prefetchStatic(this.resources.style,"style"),this.prefetchStatic(this.resources.html,"document")]).then((()=>{this.status.prefetch=!0,this.trigger("prefetch"),t(!0)})).catch(e)}))}prefetchStatic(t=[],e="script"){return new Promise(((i,s)=>{Promise.all([].concat(t).map((t=>this.prelink(t,"preload",e)))).then(i).catch(s)}))}prelink(t,e="preload",i="worker | video | audio | font | script | style | image | document"){return t?new Promise(((s,o)=>{p((()=>{var n;const r=document.createElement("link");if(r.rel=e,r.href=t,r.as=i,r.onload=s,r.onerror=o,"preload"===e&&"document"===i&&this.dependenciesLoad(t),!(null===(n=r.relList)||void 0===n?void 0:n.supports(e)))return s(void 0);document.getElementsByTagName("head")[0].appendChild(r),s(void 0)}),{timeout:15e3})})):Promise.resolve(void 0)}prerender(){return(0,s._)(this,void 0,void 0,(function*(){return this.status.preload||this.status.prerender||(yield this.preload(),yield this.prefetch()),Promise.resolve()}))}}class b extends y{constructor(){super(...arguments),this.borderHolder=[],this.getTouchBorderType=t=>{var e;const i=this.viewport,s=i.offsetWidth,o=i.offsetHeight,n=t.touches[0],r=n.clientX,l=n.clientY,a=[],h=null!==(e=this.config.borderTouchSize)&&void 0!==e?e:100;return r<=h?a.push("left"):r>=s-h&&a.push("right"),l<=h?a.push("top"):l>=o-h&&a.push("bottom"),a}}attachEvent(){this.registerBorderTouch(),this.bindOverscrollHistoryNavigation(),this.registerTapStatusBarToScrollToTop(),this.registerPullToRefresh()}scrollToTop(){const t=this.getMainScroller();t&&Promise.resolve().then((function(){return A})).then((({SmoothScroller:e})=>{new e(t).scrollTo(0,0)})).catch((t=>{console.warn(t)}))}registerPullToRefresh(){if(!this.config.pullToRefresh)return;if(!this.application.pullRefreshHolder.holder)return void this.application.on("pullToRefreshAvailable",(()=>{this.registerPullToRefresh()}));const t=this.application.pullRefreshHolder.holder,e=this.application.pullRefreshHolder.spinner,s=this.application.pullRefreshHolder.holdLayer,o=this.getMainScroller(this.config.pullToRefreshTargetScrollId);o&&i.e(967).then(i.bind(i,967)).then((i=>{i.registerPullDownEvent(this.self,o,t,e,s)})).catch((t=>{console.warn(t)}))}registerTapStatusBarToScrollToTop(){this.config.tapStatusBarToScrollToTop&&this.borderHolder[0].addEventListener("touchend",(()=>{this.scrollToTop()}))}getMainScroller(t=this.config.mainScrollId){var e,i,s;let o;if("shadow"===this.viewType)o=t?(null===(i=null===(e=this.view)||void 0===e?void 0:e.shadowRoot)||void 0===i?void 0:i.getElementById(t))||document.getElementById(t):this.contentView;else if(this.sameOrigin){const e=null===(s=this.sandbox)||void 0===s?void 0:s.window;o=t?null==e?void 0:e.document.getElementById(t):null==e?void 0:e.document.body}return o}bindOverscrollHistoryNavigation(){this.on("touchBorder",((t,e)=>{"touchmove"===e.type&&(t.includes("left")||t.includes("right")||t.includes("wipe"))&&(this.application.overscrollHistoryNavigation.moment=Date.now(),this.application.overscrollHistoryNavigation.type=t.join(" "))}))}addBorderPanMoveHolder(t){var e;const i=null!==(e=this.config.borderTouchSize)&&void 0!==e?e:15,s=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),a="position: absolute; z-index: 3;";return s.style.cssText=`${a} top: 0; right: 0; left: 0; height: env(safe-area-inset-top); mini-height: ${i}px;`,o.style.cssText=`${a} top: 0; right: 0; bottom: 0; z-index: 3; width: ${i}px;`,n.style.cssText=`${a} right: 0; bottom: 0; left: 0; z-index: 3; height: ${i}px;`,r.style.cssText=`${a} top: 0; bottom: 0; left: 0; z-index: 3; width: ${i}px;`,l.style.cssText=`display: none; ${a} top: 0; right: 0; bottom: 0; left: 0; z-index: 4;`,t.appendChild(s),t.appendChild(o),t.appendChild(n),t.appendChild(r),t.appendChild(l),this.borderHolder=[s,o,n,r,l]}registerBorderHolderTouch(){const[t,e,i,s,o]=this.addBorderPanMoveHolder(this.viewport),n=[],r=o.addEventListener,l=o.removeEventListener,a=t=>{this.trigger("touchBorder",n,t)},h=l=>{n.length=0,l.target===t?n.push("top"):l.target===e?n.push("right"):l.target===i?n.push("bottom"):l.target===s&&n.push("left"),o.style.display="block",r("touchmove",a,!0),r("touchend",a,!0),r("touchcancel",a,!0)},c=()=>{o.style.display="none",l("touchmove",a,!0),l("touchend",a,!0),l("touchcancel",a,!0)},d=t=>{const e=t.addEventListener;e("touchstart",h,!0),e("touchmove",h,!0),e("touchcancel",c,!0),e("touchend",c,!0)};d(t),d(e),d(i),d(s)}registerBorderTouch(){var t,e;if(this.sandbox&&!this.sameOrigin)return this.registerBorderHolderTouch();const i=(null===(e=null===(t=this.sandbox)||void 0===t?void 0:t.window)||void 0===e?void 0:e.document)||this.viewport,s=[],o=t=>{this.trigger("touchBorder",s,t),"touchend"!==t.type&&"touchcancel"!==t.type||(i.removeEventListener("touchmove",o,!0),i.removeEventListener("touchend",o,!0),i.removeEventListener("touchcancel",o,!0))};i.addEventListener("touchstart",(t=>{s.length=0,s.push(...this.getTouchBorderType(t)),this.transforming&&s.push("wipe"),s.length>0&&(i.addEventListener("touchmove",o,!0),i.addEventListener("touchend",o,!0),i.addEventListener("touchcancel",o,!0))}),!0)}}const S=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,x=(0,s.a)(),T=v(),V=!x&&/Mac OS X [0-9][0-9]_/g.exec(navigator.userAgent);class k{constructor(t,e=!1){this.touchHold=!1,this.scrollType="scroll",this.scrollHold=null,this.scrolling=!1,this.reservePlanId=-1,this.scrollDuration=400,this.checkScrollEnd=(t,e)=>this.element.scrollLeft===t&&this.element.scrollTop===e,this.element=t,!x&&e&&(t.addEventListener("touchstart",this.scrollStop,!0),t.addEventListener("touchend",this.scrollContinue,!0),t.addEventListener("touchcancel",this.scrollContinue,!0))}snapTo(t,e,i){return(0,s._)(this,void 0,void 0,(function*(){return this.touchHold=!1,this.scrollType="snap",this.smoothScroll(t,e,i)}))}scrollTo(t,e,i){return(0,s._)(this,void 0,void 0,(function*(){return this.touchHold=!1,this.scrollType="scroll",this.smoothScroll(t,e,i)}))}scrollStop(){this.touchHold=!0}scrollContinue(){var t;this.touchHold=!1,null===(t=this.scrollHold)||void 0===t||t.call(this)}catchDefaultStyle(){if(!0===this.scrolling)return;const t=this.element.style;this.defaultScrollBehavior=t.scrollBehavior||"smooth"}isBreak(){return!("ontouchstart"in document.documentElement||void 0===this.preStep||this.preStep[0]===this.element.scrollLeft&&this.preStep[1]===this.element.scrollTop||(this.scrollStop(),0))}step(t){if(this.touchHold){if("scroll"===this.scrollType)return t.end();this.scrollHold=()=>{this.step(t)}}const e=S(),i=(s=Math.min((e-t.startTime)/t.duration,1))<.5?4*s*s*s:1-Math.pow(-2*s+2,3)/2;var s;let o=t.startX+(t.x-t.startX)*i,n=t.startY+(t.y-t.startY)*i;const r=t.x-t.startX>0?1:-1,l=t.y-t.startY>0?1:-1;(1===r&&o>t.x||-1===r&&o<t.x)&&(o=t.x),(1===l&&n>t.y||-1===l&&n<t.y)&&(n=t.y),this.isBreak()||(this.element.scrollLeft=o,this.element.scrollTop=n,this.element.scrollTo(o,n),this.preStep=[this.element.scrollLeft,this.element.scrollTop],o!==t.x||n!==t.y?u((()=>{this.step(t)})):(t.end(),this.scrollHold=null))}openSmooth(){this.element.style.scrollBehavior="smooth",V&&(this.element.style.scrollSnapType=this.defaultScrollSnapType)}closeSmooth(){this.element.style.scrollBehavior="auto",V&&(this.defaultScrollSnapType=this.element.style.scrollSnapType,this.element.style.scrollSnapType="none")}beforeScrolling(){this.catchDefaultStyle(),this.preStep=void 0,this.scrolling=!0}endScrolling(){this.element.style.scrollBehavior=this.defaultScrollBehavior||"smooth",this.scrolling=!1}smoothScroll(t,e,i){if("scroll"===this.scrollType&&!x||"snap"===this.scrollType&&!T)return this.smoothScrollByStep(t,e);let o=-1;return new Promise((n=>{const r=()=>{clearTimeout(o),o=c((()=>(0,s._)(this,void 0,void 0,(function*(){this.element.removeEventListener("scroll",r,!1),n()}))),100)};this.element.addEventListener("scroll",r,!1),this.beforeScrolling(),this.openSmooth(),this.checkScrollEnd(t,e)&&(this.endScrolling(),n()),this.element.scrollTo(t,e),clearTimeout(this.reservePlanId),this.reservePlanId=c((()=>(0,s._)(this,void 0,void 0,(function*(){-1===o&&(yield this.smoothScrollByStep(t,e,i),n())}))),600)}))}smoothScrollByStep(t,e,i=this.scrollDuration){return this.beforeScrolling(),this.closeSmooth(),new Promise((s=>{this.step({startTime:S(),startX:this.element.scrollLeft,startY:this.element.scrollTop,x:t,y:e,duration:i,end:()=>{this.endScrolling(),s()}})}))}}var A=Object.freeze({__proto__:null,SmoothScroller:k});const C="\n  width: 100%;\n  height: 100%;\n  min-width: 100%;\n  min-height: 100%;\n  max-width: 100%;\n  max-height: 100%;\n",P=`\n  inset: 0px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  ${C}\n`,I=`\n  position: relative;\n  display: flex;\n  ${C}\n  scroll-snap-align: start;\n  scroll-snap-stop: always;\n`,L=`\n  ${I}\n  background: rgba(0, 0, 0, .3);\n  opacity: 0;\n`,E=`\n  position: relative;\n  display: flex;\n  ${C}\n  flex-direction: row;\n  overflow: auto;\n  scroll-behavior: auto;\n  scroll-snap-type: both mandatory;\n`,H=`\n  position: fixed;\n  ${P}\n  z-index: 9;\n  display: none;\n`;class _ extends class extends class extends class extends class{constructor(t){this.backdropReducedScale=.03,this.applet=t,this.application=t.application,this.appletViewport=this.applet.viewport}}{constructor(){super(...arguments),this.advanceDegree=0}get visibility(){return 0!==Math.round(this.controlsView.scrollLeft/this.appletViewport.offsetWidth)}get viewports(){return this.fromViewports?this.fromViewports:this.fromViewports=this.application.segue.viewports}get degree(){return this.controlsView.scrollLeft/this.appletViewport.offsetWidth}get activity(){return this.application.activityApplet===this.applet}clearFromViewports(){this.fromViewports=void 0}}{constructor(){super(...arguments),this.available=!0,this.toggleLock=!1}requestGoBack(t){this.applet.transforming||!1===this.toggleLock&&t<=this.advanceDegree&&this.activity&&(this.toggleLock=!0,setTimeout((()=>{this.toggleLock=!1}),300),this.application.segue.back("controls").then((()=>{this.fromViewports=void 0})))}bindCoreEvent(){const t=this.applet,e=this.viewports[1],i=this.application.config.swipeTransitionType;this.controlsView.addEventListener("scroll",(()=>{const s=this.degree;this.requestGoBack(s),this.backdropView.style.transitionDuration="0ms",this.backdropView.style.transitionDelay="0ms",this.backdropView.style.transitionProperty="opacity",this.backdropView.style.opacity=`${s}`,this.controlsView.style.transitionDuration="0ms",this.controlsView.style.transitionDelay="0ms",this.controlsView.style.transitionProperty="background-color",this.controlsView.style.backgroundColor=s>1?`rgba(0, 0, 0, ${.5+3*(s-1)})`:"transparent",e&&t.visibility&&!t.transforming&&!this.toggleLock&&(e.style.transitionDuration="0ms",e.style.transitionDelay="0ms",e.style.transitionProperty="transform",e.style.transform="slide"===i?`translate3d(${30*-s}%, 0, 0)`:`scale(${1-.03*s})`),this.application.trigger("transition",s,this.application.segue.appletGroup)})),this.backdropView.addEventListener("touchstart",(()=>(0,s._)(this,void 0,void 0,(function*(){yield this.hide(),this.requestGoBack(this.degree)})))),this.controlsOverlay.addEventListener("touchstart",(t=>{t.stopPropagation(),t.preventDefault()}),!1),this.applet.on("willShow",(()=>{this.application.segue.stackUp&&this.clearFromViewports()})),this.applet.on("show",(()=>{this.visibility||this.appearImmediately(),this.application.segue.stackUp&&this.prepare()})),this.applet.on("hide",(()=>{this.visibility&&this.application.segue.fromOverscrollHistoryNavigation&&this.disappearImmediately()}))}prepare(t=!1){const e=this.viewports,i=this.application.config.swipeTransitionType,s=e[1];s&&(s.style.transform="slide"===i?t?"translate3d(0, 0, 0)":"translate3d(-30%, 0, 0)":t?"scale(1)":`scale(${1-this.backdropReducedScale})`)}switch(t){return(0,s._)(this,void 0,void 0,(function*(){return this.controlsOverlay.style.display="block",t&&(yield this.disappearImmediately()),this.toggleLock=!0,this.scroll.snapTo(t?this.appletViewport.offsetWidth:0,0).then((()=>{this.toggleLock=!1,this.controlsOverlay.style.display="none"}))}))}disappearImmediately(){return(0,s._)(this,void 0,void 0,(function*(){this.controlsView.style.scrollBehavior="auto",this.controlsView.scrollLeft=0,yield w(30)}))}appearImmediately(){return(0,s._)(this,void 0,void 0,(function*(){this.controlsView.style.scrollBehavior="auto",this.controlsView.scrollLeft=this.appletViewport.offsetWidth,yield w(30)}))}show(){return this.switch(!0)}hide(){return this.switch(!1)}disable(){this.available=!1}enable(){this.available=!0}activate(){!1!==this.available&&(this.backdropView.style.display="block",this.controlsView.style.overflow="auto",this.controlsView.scrollLeft=this.appletViewport.offsetWidth)}freeze(){this.backdropView.style.display="none",this.controlsView.style.overflow="hidden"}}{attach(){this.controlsView=document.createElement("applet-controls"),this.contentContainer=document.createElement("applet-container"),this.backdropView=document.createElement("applet-backdrop"),this.controlsOverlay=document.createElement("applet-controls-overlay"),this.scroll=new k(this.controlsView)}buildControlsView(){const t=document.createElement("style");t.innerHTML="\n  applet-controls::-webkit-scrollbar {\n    display: none;\n  }\n  applet-controls::scrollbar {\n    display: none;\n  }\n",this.contentContainer.style.cssText=I,this.backdropView.style.cssText=L,this.controlsView.style.cssText=E,!1===(0,s.b)()&&(this.controlsView.style.cssText+="-webkit-overflow-scrolling: touch;"),this.controlsOverlay.style.cssText=H,this.controlsView.appendChild(this.backdropView),this.controlsView.appendChild(this.contentContainer),this.appletViewport.appendChild(t),this.appletViewport.appendChild(this.controlsView),this.appletViewport.appendChild(this.controlsOverlay)}create(){var t;this.attach(),this.buildControlsView(),this.bindCoreEvent();const e=this.applet;return("applet"!==e.rel||!1===e.swipeModel||(null===(t=e.mountBehavior)||void 0===t?void 0:t.noSwipeModel))&&this.freeze(),this.contentContainer}}{}const O=`\n  display: flex;\n  ${C}\n  scroll-snap-align: start;\n  scroll-snap-stop: always;\n  transform: translate(0, 0);\n`,D=`\n  position: fixed;\n  ${P}\n  z-index: 7;\n  display: none;\n`;class B extends class extends class extends class extends class{constructor(t,e={openSlideViewLeftHolder:!0,slideViewSnapType:"x",slideViewGridRepeat:0},i=t.viewport){this.scrolling=!1,this.switching=!1,this.distance=0,this.activeId="",this.snapType="x";const s=t.config.defaultSlideViewApplets;s&&i&&(this.applet=t,this.application=t.application,this.slideViewApplets=s,this.options=e,this.snapType=e.slideViewSnapType)}}{get index(){const t=this.slideView;return(Math.round(t.scrollLeft/t.offsetWidth)+1)*(Math.round(t.scrollTop/t.offsetHeight)+1)-1}get slidingState(){if(this.slidingStateCatch)return this.slidingStateCatch;const t=this.slideView;return this.slidingStateCatch={get x(){return t.scrollLeft},get y(){return t.scrollTop},get xIndex(){return Math.round(t.scrollLeft/t.offsetWidth)},get yIndex(){return Math.round(t.scrollTop/t.offsetHeight)}}}getAppletIdByIndex(t){var e;return null===(e=this.slideViewApplets[t])||void 0===e?void 0:e.id}getAppletIndexById(t){if("number"==typeof t)return t;let e=0;const i=this.slideViewApplets;for(const s of i){if(s.id===t)return e;e++}return 0}}{constructor(){super(...arguments),this.hasSmoothSnapScrolling=v(),this.scrollCancelTimeoutId=-1,this.scrollCycleTimeout=300}closeOverlay(){this.slideViewOverlay.style.display="none"}openOverlay(){this.slideViewOverlay.style.display="block"}bindHolderEvent(){const t=t=>{t.stopPropagation(),this.openOverlay(),this.slideView.style.overflowX="hidden"},e=()=>{this.closeOverlay(),this.slideView.style.overflowX="auto",this.slideView.removeEventListener("touchcancel",e,!0),this.slideView.removeEventListener("touchend",e,!0)};this.slideViewHolder.addEventListener("touchstart",t,!0),this.slideViewHolder.addEventListener("touchmove",t,!0),this.slideViewHolder.addEventListener("touchcancel",e,!0),this.slideViewHolder.addEventListener("touchend",e,!0)}dispatchScrollEvent(){this.application.activate(!1),this.applet.trigger("sliding",this.slidingState)}bindScrollEvent(){const t=this.slideView;t.addEventListener("scroll",(()=>{this.switching||(this.scrolling||(this.freezeAll(),this.scrolling=!0),this.dispatchScrollEvent(),clearTimeout(this.scrollCancelTimeoutId),this.scrollCancelTimeoutId=c((()=>(0,s._)(this,void 0,void 0,(function*(){this.hasSmoothSnapScrolling||(yield this.scroller.scrollTo(this.slidingState.xIndex*this.slideView.offsetWidth,this.slidingState.yIndex*t.offsetHeight)),this.scrolling=!1,this.activate(this.index),this.application.activate(!0)}))),this.scrollCycleTimeout))}))}destroy(t){return(0,s._)(this,void 0,void 0,(function*(){const e=this.getAppletIdByIndex(t);if(!e)return Promise.resolve(!0);const i=this.application.applets[e];return i?!1!==i.config.background?Promise.resolve(!1):i.destroy(!0):Promise.resolve(!0)}))}freeze(t){return(0,s._)(this,void 0,void 0,(function*(){const e=this.getAppletIdByIndex(t);return e?this.application.get(e).then((t=>{t.hide(),this.applet.trigger("slideOut",t)})):Promise.resolve()}))}activate(t){return(0,s._)(this,void 0,void 0,(function*(){const e=this.getAppletIdByIndex(t);return e?this.application.get(e).then((t=>(0,s._)(this,void 0,void 0,(function*(){return t.show(),this.applet.trigger("slideEnter",t),e!==this.activeId&&this.destroy(this.getAppletIndexById(this.activeId)),this.activeId=e,t.view&&t.visibility?Promise.resolve():t.build()})))):Promise.resolve()}))}freezeAll(){const t=this.slideViewApplets.length;for(let e=0;e<=t;e++)this.freeze(e)}to(t,e=!0){return(0,s._)(this,void 0,void 0,(function*(){const i=this.getAppletIndexById(t),s=this.slideView;let o=0,n=0;if("x"===this.options.slideViewSnapType){const t=s.offsetWidth,e=t*this.slideViewApplets.length;o=Math.min(Math.max(i*t,0),e)}else{const t=s.offsetHeight,e=t*this.slideViewApplets.length;n=Math.min(Math.max(i*t,0),e)}return this.index!==i&&(yield this.freeze(this.index)),!1===e?(s.style.scrollBehavior="auto",s.scrollLeft=o,s.scrollTop=n,s.style.scrollBehavior="smooth",Promise.resolve()):(this.switching=!0,this.openOverlay(),this.application.activate(!1),this.scroller.snapTo(o,n).then((()=>{this.closeOverlay(),this.switching=!1,this.activate(this.index),this.application.activate(!0)})))}))}}{constructor(t,e,i){super(t,e,i),this.scrolling=!1,this.switching=!1,this.distance=0,this.activeId="",this.createSlideView(this.slideViewApplets,i),this.bindScrollEvent(),this.bindHolderEvent(),this.scroller=new k(this.slideView)}resetViewportStyle(t){t.style.cssText=O}createSlideView(t,e){var i;const o=document.createElement("slideView-viewport"),n=document.createElement("style"),r=document.createElement("slideView-holder"),l=document.createElement("slideView-overlay"),a=this.snapType,h=null!==(i=this.options.slideViewGridRepeat)&&void 0!==i?i:2;n.innerHTML="\n  slideView-viewport::-webkit-scrollbar {\n    display: none;\n  }\n  slideView-viewport::scrollbar {\n    display: none;\n  }\n",o.style.cssText=((t,e,i)=>`\n    ${"y"===t?"overflow-y: auto; overflow-x: hidden;":"x"===t?"display: flex; overflow-x: auto; overflow-y: hidden;":`\n      display: grid;\n      overflow: auto;\n      grid-template-columns: repeat(${e}, 100%);\n      grid-template-rows: repeat(${e}, 100%);\n    `}\n    position: absolute;\n    ${P}\n    z-index: 2;\n    scroll-behavior: ${i?"smooth":"auto"};\n    scroll-snap-type: ${t} mandatory;\n  `)(a,h,this.hasSmoothSnapScrolling),!1===(0,s.b)()&&(o.style.cssText+="-webkit-overflow-scrolling: touch;"),r.style.cssText="\n  position: absolute;\n  top: 15%;\n  bottom: 15%;\n  left: 0;\n  width: 15px;\n  z-index: 5;\n",l.style.cssText=D,l.addEventListener("touchstart",(t=>{t.stopPropagation(),t.preventDefault()}),!0),l.addEventListener("touchend",(()=>{this.closeOverlay()}),!0),t.forEach(((t,e)=>{const{id:i,activate:n}=t,l=document.createElement("applet-viewport");l.id="applet-viewport-"+i,this.resetViewportStyle(l),0===e&&(this.activeId=i,this.options.openSlideViewLeftHolder&&l.appendChild(r)),o.appendChild(l),this.application.get(i).then((t=>{t.attach(l,this.applet,{agentSegue:()=>(0,s._)(this,void 0,void 0,(function*(){return this.application.to(this.applet.id).then((()=>{var t;null===(t=this.applet.slide)||void 0===t||t.to(i)}))})),noSwipeModel:!0}),"instant"===n||0===e?(t.build(),0===e&&t.show()):"lazy"===n&&p((()=>{t.build()}),{timeout:3e3})}))})),e.appendChild(n),e.appendChild(o),e.appendChild(l),this.slideView=o,this.slideViewHolder=r,this.slideViewOverlay=l}}{}const M=`\n  applet-viewport {\n    background: transparent !important;\n  }\n  modality-container {\n    display: flex;\n    height: 100%;\n    overflow-y: scroll !important;\n    scroll-behavior: smooth;\n    scroll-snap-type: y mandatory;\n    flex-direction: column;\n    contain: layout size;\n  }\n  modality-container::-webkit-scrollbar {\n    display: none;\n  }\n  modality-container::scrollbar {\n    display: none;\n  }\n  modality-placeholder {\n    position: relative;\n    display: block;\n    ${C}\n    scroll-snap-align: start;\n    scroll-snap-stop: always;\n    box-sizing: content-box;\n  }\n  modality-handle {\n    display: block;\n    position: absolute;\n    top: 100%;\n    height: 20px;\n    width: 100%;\n    z-index: 2;\n  }\n  modality-handle::before {\n    content: ' ';\n    display: block;\n    width: 36px;\n    height: 5px;\n    margin: 5px auto;\n    border-radius: 5px;\n    background: #777;\n    opacity: .5;\n  }\n  modality-handle:hover::before {\n    opacity: 1;\n  }\n  blocked-holder {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 40px;\n    height: 100%;\n    z-index: 5;\n    overflow-y: hidden;\n    overflow-x: scroll;\n    overscroll-behavior-y: none;\n    display: flex;\n    flex-flow: row-reverse;\n  }\n  blocked-holder::-webkit-scrollbar {\n    display: none;\n  }\n  blocked-holder::scrollbar {\n    display: none;\n  }\n  blocked-holder::before {\n    content: ' ';\n    display: flex;\n    min-width: 100vw;\n    height: 100%;\n  }\n`,R=!1===v(),$=!1===(0,s.b)();class j extends class extends class extends class extends class{constructor(t){this.switching=!1,this.scrolling=!1,this.backdropReducedScale=.1,this.backdropRotateX=-10,this.backdropPerspective=3e3,this.backdropBorderRadius=20,this.advanceDegree=.03,this.applet=t,this.application=this.applet.application,this.modalityContainer=document.createElement("modality-container"),this.appletViewport=this.applet.viewport,this.options=this.applet.config.sheetOptions}}{get viewports(){return this.fromViewports&&this.activity||(this.fromViewports=this.application.segue.viewports,this.updateOverlapViewport()),this.fromViewports}get maxDegree(){var t,e;if(this.maxDegreeCache)return this.maxDegreeCache;const i=null!==(e=null===(t=this.miniCard)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0;return this.maxDegreeCache=1+i/this.contentContainer.offsetHeight}get degree(){var t,e;return this.modalityContainer.scrollTop/Math.min(this.contentContainer.offsetHeight+(null!==(e=null===(t=this.miniCard)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0),this.modalityContainer.offsetHeight)}get visibility(){return!(this.degree<=.1)}get hasMiniCard(){return!!this.miniCard}get prevViewport(){return this.viewports[1]}get activity(){return this.applet.transforming||this.application.activityApplet===this.applet}setBackdropViewport(t){this.fromViewports||(this.fromViewports=this.viewports),this.fromViewports[1]=t}updateOverlapViewport(){const t=this.application.prevActivityApplet;(null==t?void 0:t.modality)&&this.setBackdropViewport(t.modality.viewports[1])}checkScrollStop(){return new Promise((t=>{const e=t=>{setTimeout((()=>this.scrolling?e(t):t()),100)};e((()=>t(!0)))}))}}{switchSheet(t=1.5){return(0,s._)(this,void 0,void 0,(function*(){return this.activity?this.degree<=this.maxDegree/t?this.hide():this.rise():Promise.resolve()}))}switchOverlay(t=!1){this.modalityOverlay.style.display=t?"block":"none"}switchSmooth(t=!0){this.modalityContainer.style.scrollBehavior=t?"smooth":"auto"}switchSnap(t=!0){this.modalityContainer.style.scrollSnapType=t?"y mandatory":"none"}switchBackdropColor(t=!0){var e,i;this.application.segue.applicationViewport.style.backgroundColor=t?null!==(i=null===(e=this.options)||void 0===e?void 0:e.backdropColor)&&void 0!==i?i:"#000":""}freezeSnap(){this.modalityPlaceholder.style.display="none",this.modalityContainer.scrollTop=0}activateSnap(){var t,e;this.modalityPlaceholder.style.display="flex",this.switchSmooth(!1),this.modalityContainer.scrollTop=this.modalityContainer.offsetHeight+(null!==(e=null===(t=this.miniCard)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0),c((()=>{this.switchSmooth(!0)}),0)}rise(){var t,e;return(0,s._)(this,void 0,void 0,(function*(){if(this.switching)return this.processPromise;this.switching=!0,this.switchOverlay(!0),this.switchBackdropColor(!0);const i=this.modalityContainer.offsetHeight+(this.miniCard&&this.degree>=1+(this.maxDegree-1)/2&&null!==(e=null===(t=this.miniCard)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0);return this.processPromise=this.scroller.snapTo(0,i).then((()=>{this.switching=!1,this.switchOverlay(!1)}))}))}fall(){return(0,s._)(this,void 0,void 0,(function*(){return this.switching?this.processPromise:(this.switching=!0,this.switchOverlay(!0),this.processPromise=this.scroller.snapTo(0,0).then((()=>(0,s._)(this,void 0,void 0,(function*(){this.switching=!1,this.switchOverlay(!1)})))))}))}hide(){return(0,s._)(this,void 0,void 0,(function*(){return this.fall().then((()=>(0,s._)(this,void 0,void 0,(function*(){this.activity&&(this.switchBackdropColor(!1),yield this.application.segue.back())}))))}))}bindDragContentEvent(){const t=this.applet.contentDocument;if(!t)return;const e={x:0,y:0,swipe:void 0},i=this.modalityContainer,o=i.offsetHeight/i.offsetWidth;t.addEventListener("touchstart",(t=>{const{changedTouches:i}=t,s=i[0];e.x=s.pageX,e.y=s.pageY,e.swipe=void 0}),!0),t.addEventListener("touchend",(()=>(0,s._)(this,void 0,void 0,(function*(){e.swipe&&(e.swipe=!1,(yield this.checkScrollStop())&&(this.switchSmooth(!0),this.switchSheet(this.miniCard?2:1.25).then((()=>{this.switchOverlay(!1),this.switchSnap(!0),this.switching=!1}))))}))),!0),t.addEventListener("touchmove",(t=>{const{changedTouches:s}=t,n=s[0],r=n.pageX-e.x,l=n.pageY-e.y;this.switching||!1!==e.swipe&&(Math.abs(r)-Math.abs(l)>20&&Math.abs(l)<=10&&(e.swipe=!0,this.switchOverlay(!0),this.switchSmooth(!1),this.switchSnap(!1)),e.swipe&&(i.scrollTop-=Math.ceil(r)*o,e.x=n.pageX,e.y=n.pageY))}),!0)}}{constructor(t){var e;super(t),this.scrollingTimeoutId=-1,this.scroller=new k(this.modalityContainer),this.buildModalityOverlay(),null===(e=t.viewport)||void 0===e||e.appendChild(this.modalityContainer)}buildModalityOverlay(){const t=document.createElement("modality-overlay");t.style.cssText=`\n      position: fixed;\n      ${P}\n      z-index: 9;\n      display: none;\n    `,t.addEventListener("touchstart",(t=>{this.degree<=this.advanceDegree&&this.activity&&this.hide(),t.stopPropagation(),t.preventDefault()}),!0),this.modalityOverlay=t}sliding(t,e,i){var s,o;const n=this.options,r=null!==(s=null==n?void 0:n.maskOpacity)&&void 0!==s?s:.3,l=null==n?void 0:n.useFade;if(this.modalityContainer.style.transitionDuration="0ms",this.modalityContainer.style.transitionDelay="0ms",this.modalityContainer.style.transitionProperty="transform, background-color",t>e)return void(this.modalityContainer.style.backgroundColor=`rgba(0, 0, 0, ${r+(1-r)*(t-e)/.2})`);const a=this.miniCard?(t-1)/(e-1):t,h=(null===(o=this.options)||void 0===o?void 0:o.stillBackdrop)||this.miniCard&&t<=1;this.activity&&i&&!h&&(i.style.transitionDuration="0ms",i.style.transitionDelay="0ms",i.style.transitionProperty="transform, border-radius",i.style.borderRadius=Math.min(a,1)*this.backdropBorderRadius+"px",i.style.transform=`\n        translate3d(0, ${10*a}px, -100px) \n        perspective(${this.backdropPerspective}px) \n        rotateX(${a*this.backdropRotateX}deg) \n        scale(${1-Math.max(a*this.backdropReducedScale,0)})\n      `),this.modalityContainer.style.backgroundColor=`rgba(0, 0, 0, ${r*Math.min(t,1)})`,l&&(this.contentContainer.style.transitionDuration="0ms",this.contentContainer.style.transitionDelay="0ms",this.contentContainer.style.transitionProperty="opacity",this.contentContainer.style.opacity=""+(a-2*(1-a))),this.scrolling=!0,clearTimeout(this.scrollingTimeoutId),this.scrollingTimeoutId=c((()=>{this.scrolling=!1,R&&this.degree===t&&(t<=.7?this.hide():this.rise())}),100),this.switching||t<=this.advanceDegree&&this.hide()}create(){var t,e;const i=this.appletViewport,s=this.modalityContainer,o=s.firstChild,n=document.createElement("modality-placeholder"),r=document.createElement("modality-handle"),l=document.createElement("blocked-holder"),a=document.createElement("applet-container"),h=document.createElement("style"),d=this.options,p=!!(null==d?void 0:d.miniCardHeight)&&!$,u=m(null==d?void 0:d.miniCardHeight)||"0px",v=m(null==d?void 0:d.blockedHolderWidth)||"40px",w=m(null==d?void 0:d.top)||"60px",f=null==d?void 0:d.maskClosable,g=null==d?void 0:d.noHandlebar,y=m(null==d?void 0:d.borderRadius)||"16px";if(h.innerHTML=M,a.style.cssText=`\n      position: relative;\n      border: 0px;\n      outline: 0px;\n      min-width: 100%;\n      min-height: calc(100% - ${w});\n      max-height: calc(100% - ${w});\n      border-top-left-radius: ${y};\n      border-top-right-radius: ${y};\n      scroll-snap-align: start;\n      scroll-snap-stop: always;\n      overflow: hidden;\n      transform: translate3d(0, 0, 500px);\n    `,i.appendChild(h),i.appendChild(l),i.appendChild(this.modalityOverlay),n.appendChild(r),l.style.width=v,o?s.insertBefore(n,o):s.appendChild(n),$&&(s.style.cssText+="-webkit-overflow-scrolling: touch;"),p){const t=document.createElement("modality-mini-card");t.style.cssText=`\n        width: 100%;\n        min-height: calc(100% - ${u});\n        scroll-snap-align: start;\n        scroll-snap-stop: always;\n      `,s.appendChild(t),r.style.top=`calc(200% - ${u})`,this.miniCard=t}return!1!==f&&(n.addEventListener("click",(()=>{this.hide()})),null===(t=this.miniCard)||void 0===t||t.addEventListener("click",(()=>{this.hide()}))),g&&(r.style.display="none"),!1!==(null===(e=this.options)||void 0===e?void 0:e.swipeClosable)&&c((()=>{this.bindDragContentEvent()}),10),s.addEventListener("scroll",(()=>{this.activity&&this.sliding(this.degree,this.maxDegree,this.prevViewport)}),!1),this.applet.on("willShow",(()=>{if(this.application.segue.stackUp&&(this.fromViewports=void 0),!1!==(null==d?void 0:d.alwaysPopUp)){if(this.applet.transforming)return;this.rise()}})),this.applet.on("willHide",(()=>{if(!1!==(null==d?void 0:d.alwaysPopUp)){if(this.applet.transforming)return;this.fall()}})),s.appendChild(a),this.modalityPlaceholder=n,this.contentContainer=a}}{}var z=(t,e)=>{const i=t.open;t.document.addEventListener("click",(t=>{var s,o;t instanceof CustomEvent&&t.detail instanceof Event&&(t=t.detail);const n=e=>{var i,s,o,n;return{x:(null===(s=null===(i=t.changedTouches)||void 0===i?void 0:i[0])||void 0===s?void 0:s.pageX)||t.x,y:(null===(n=null===(o=t.changedTouches)||void 0===o?void 0:o[0])||void 0===n?void 0:n.pageY)||t.y,target:e}},r=t=>({title:t.getAttribute("title")||"",preset:t.getAttribute("preset-effect")||"slide",cloneAs:t.getAttribute("clone-as")||void 0}),l=t.path||(null===(s=t.composedPath)||void 0===s?void 0:s.call(t))||[];l.splice(-3);for(const s of l){const l=null===(o=s.getAttribute)||void 0===o?void 0:o.call(s,"to-applet");if(l){const{cloneAs:t,title:i,preset:o}=r(s),[a,h]=l.split("?");if(t){e.get(a).then((r=>{const l=r.model;Object.assign(l.config,{title:i,animation:o,level:e.activityLevel}),e.add(t,l),e.to(t,"?"+h,void 0,n(s))}));break}e.to(a,"?"+h,void 0,n(s));break}if("A"===s.tagName){const o=s,l=o.href||String(o);if(l){if("_parent"===o.target||"_top"===o.target)return i(l),!1;const{cloneAs:a,title:h,preset:c}=r(s);t.stopPropagation(),t.preventDefault(),e.pushWindow(l,h,c,a,n(o)).catch((()=>{i(l)}))}}}return!1}),!0),t.open=(t,s,o)=>"string"!=typeof t||s&&0!==s.indexOf("_")||o?i(t,s,o):(e.pushWindow(t,"").catch((()=>{i(t)})),null)};const N=t=>{const e=t.setTimeout,i=t.clearTimeout,s=t.setInterval,o=t.clearInterval,n={};t.setBackgroundTimeout=e,t.setTimeout=(i,s,...o)=>{const r={timerLog:n,timerId:-1},l=((t,e,i,s)=>()=>{const s=()=>{void 0!==i.timerLog[i.timerId]&&("function"==typeof t?t():"string"==typeof t&&new e.Function(`return ${t}`)(),delete i.timerLog[i.timerId])};"complete"===e.document.readyState?e!==window?"visible"===e.appletVisibilityState?s():e.addEventListener("message",(t=>{var e;"applet-show"===(null===(e=t.data)||void 0===e?void 0:e.type)&&s()})):"frozen"!==window.applicationActiveState?s():window.addEventListener("message",(t=>{var e;"application-active"===(null===(e=t.data)||void 0===e?void 0:e.type)&&s()})):s()})(i,t,r),a=e(l,s,...o);return n[a]=!0,r.timerId=a,a},t.clearTimeout=(...t)=>{const e=t[0];return e&&delete n[e],i(...t)},t.setTimeout.toString=()=>"setTimeout() { [native code] }",t.clearTimeout.toString=()=>"clearTimeout() { [native code] }";const r={};t.setBackgroundInterval=s,t.setInterval=(e,i,...s)=>{const o={timerId:-1,intervalId:-1},n=()=>{(-1===o.timerId||r[o.intervalId])&&("function"==typeof e?e():"string"==typeof e&&new t.Function(`return ${e}`)(),o.timerId=t.setTimeout(n,i,...s))},l=o.intervalId=o.timerId=t.setTimeout(n,i,...s);return r[l]=o,l},t.clearInterval=(...e)=>{const i=e[0];if(!i)return;o(i);const s=r[i];s&&(t.clearTimeout(s.timerId),delete r[s.intervalId])},t.setInterval.toString=()=>"setInterval() { [native code] }",t.clearInterval.toString=()=>"clearInterval() { [native code] }"};var F=(t,e)=>{const i={element:null,oldFilterStyle:"",oldTransitionStyle:"",waitingToAddTimeId:-1},s=()=>{var t;i.element&&(clearTimeout(i.waitingToAddTimeId),(null===(t=i.element)||void 0===t?void 0:t.style.filter)&&(i.element.style.filter=i.oldFilterStyle),i.element.removeAttribute("tap-highlight"),c((()=>{var t;(null===(t=i.element)||void 0===t?void 0:t.style.transition)&&(i.element.style.transition=i.oldTransitionStyle),i.element=null,i.oldFilterStyle="",i.oldTransitionStyle=""}),100))};t.document.addEventListener("touchstart",(t=>{const o=e?"string"==typeof e?e.split(" "):e:null,n=t.path||t.composedPath()||[];n.splice(-3);const r=(()=>{var e,i,s,r;for(const t of n){if("A"===t.tagName)return t;if((null===(e=t.children)||void 0===e?void 0:e.length)&&o){for(const e of o){if(0===e.indexOf("#")&&"#"+t.id===e)return t;if(0===e.indexOf(".")&&t.classList.length&&Object.values(t.classList).includes(e.slice(1)))return t;if(null===(i=t.getAttribute)||void 0===i?void 0:i.call(t,e))return t}return null}}const l=((null===(r=null===(s=n[0])||void 0===s?void 0:s.children)||void 0===r?void 0:r.length)?n[0]:n[1])||t.target;return["DIV","A","IMG"].includes(l.tagName)?l:null})();if(r&&i.element!==r){if(i.element)return s();i.element=r,i.oldFilterStyle=r.style.filter,i.oldTransitionStyle=r.style.transition,r.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)",r.style.transition=i.oldTransitionStyle?i.oldTransitionStyle+", ":"all .1s ease",i.waitingToAddTimeId=c((()=>{if(i.element===r){if(r.offsetWidth*r.offsetHeight>9e4)return;r.style.filter=i.oldFilterStyle+" brightness(.8)",r.setAttribute("tap-highlight","true")}}),30)}})),t.document.addEventListener("touchmove",s),t.document.addEventListener("touchcancel",s),t.document.addEventListener("touchend",(()=>{t.setTimeout((()=>{s()}),300)}))};class U extends b{setShadowView(t,e){["frameworks","system"].includes(this.rel)?(t.style.cssText="\n        position: fixed;\n        width: 100%;\n        z-index: 7;\n        pointer-events: none;\n      ",e.style.pointerEvents="all"):t.style.cssText=e.style.cssText="\n        min-width: 100%;\n        min-height: 100%;\n      "}createControlsView(){var t;return this.controls=new _(this.self),null===(t=this.controls)||void 0===t?void 0:t.create()}getContentContainer(){return"system"===this.rel?this.viewport:this.isModality?this.createModality():this.useControls?this.createControlsView():this.viewport}buildSlideView(t){return new Promise(((e,i)=>{var s,o;if(this.slide)return e();if(!this.config.defaultSlideViewApplets)return i();const n={openSlideViewLeftHolder:null===(s=this.config.openSlideViewLeftHolder)||void 0===s||s,slideViewSnapType:null!==(o=this.config.slideViewSnapType)&&void 0!==o?o:"x"};this.slide=new B(this.self,n,t),e()}))}buildContentImage(){var t;if(this.img)return;const e=this.viewport,i=document.createElement("applet-img");!1===this.noShadowDom&&(null===(t=i.attachShadow)||void 0===t||t.call(i,{mode:"open"})),e.appendChild(i),i.style.cssText=`\n      position: absolute;\n      ${P}\n      z-index: 2;\n      pointer-events: none;\n      background: ${this.color};\n      opacity: 1;\n      transition: opacity .3s;\n      contain: strict;\n    `,this.img=i}getPresetView(){var t;return null===(t=this.application.presetAppletsView)||void 0===t?void 0:t[this.id]}createContentView(){const t=document.createElement("define-applet");return this.application.defineApplet(t,this.id),t}getContentView(){var t;const e=null!==(t=this.getPresetView())&&void 0!==t?t:this.createContentView();return"applet"===this.rel&&(e.style.cssText=`\n        position: relative;\n        z-index: 1;\n        display: block;\n        width: 100%;\n        height: 100%;\n        max-width: 100%;\n        max-height: 100%;\n        overflow: auto;\n        background: ${this.color};\n        contain: strict;\n      `),e}buildContentStructure(){if(this.contentView)return;this.contentView=this.getContentView(),this.contentSlot=this.contentView.getViewSlot();const t=this.getContentContainer();this.config.defaultSlideViewApplets&&this.buildSlideView(t),t.appendChild(this.contentSlot)}createShadowView(){var t,e,i,s;if(!this.config.render)return Promise.resolve(this.contentView);const o=document.createElement("applet-shadow"),n=document.createElement("applet-shadow-inner");return!1===this.noShadowDom&&(null===(t=o.attachShadow)||void 0===t||t.call(o,{mode:"open"})),(o.shadowRoot?o.shadowRoot:o).appendChild(n),null===(i=(e=this.config).render)||void 0===i||i.call(e,n),null===(s=this.contentView)||void 0===s||s.appendChild(o),this.setShadowView(o,n),Promise.resolve(o)}createSandbox(t,e){return(0,s._)(this,void 0,void 0,(function*(){return this.sandbox=new g(t,null==e?void 0:e.join(" "),"src"),this.decorateSandbox(this.sandbox.sandbox),yield this.loadContentView(),this.sandbox.sandbox}))}createPortal(t){return(0,s._)(this,void 0,void 0,(function*(){const e=document.createElement("portal");return e.src=t,this.decorateSandbox(e),yield this.loadContentView(),e}))}createModality(){return this.modality=new j(this.self),this.modality.create()}loadContentView(){return(0,s._)(this,void 0,void 0,(function*(){this.waitingForResponse().then((()=>{Promise.resolve()})).catch((()=>{Promise.reject()})),this.status.refreshing?c((()=>{Promise.resolve()}),2e3):Promise.resolve()}))}loadSourceContent(){return(0,s._)(this,void 0,void 0,(function*(){const t=this.contentView;return"portal"===this.viewType?(null==t||t.appendChild(this.view),Promise.resolve()):this.sandbox?void(this.uri?(this.sandbox.onload=()=>Promise.resolve(),this.sandbox.onerror=()=>Promise.reject(),this.sandbox.enter(t),this.injectIntoContext(),this.injectIntoContext(2)):(this.sandbox.enter(t),this.injectIntoContext(),this.sandbox.append(yield this.source),this.injectIntoContext(2),this.sandbox.onunload=this.loadSourceContent.bind(this),Promise.resolve())):Promise.resolve()}))}injectIntoContext(t=1){if(!this.sameOrigin)return;const e=this.contentWindow;e.__LATH_APPLICATION_AVAILABILITY__||(2===t?(((t,e)=>{var i,s;const{config:o,application:n}=e,r=Array.from(new Set(o.apply)),l=o.applyOptions||{};for(const e of r)switch(e){case"proxy-link":z(t,n);break;case"tap-highlight":F(t,null!==(s=null===(i=l[e])||void 0===i?void 0:i.selector)&&void 0!==s?s:"use-tap-highlight")}if("function"==typeof o.injectToDocument)try{o.injectToDocument(t,e)}catch(t){console.error("config > inject:",t)}if(e.components)for(const i of e.components)t.customElements.define("code-highlight",i(t));((t,e)=>{const{id:i,application:s}=e,o=s.config.globalCSSVariables,n="function"==typeof o?o():o,r=t.document.documentElement.style,l=t=>{e.snapshot=null;for(const e in t)r.setProperty(e,t[e])},a=t=>{var e,i,s,o,n,r;l({"--application-safe-area-top":null!==(e=t[0])&&void 0!==e?e:t,"--application-safe-area-right":null!==(i=t[1])&&void 0!==i?i:t,"--application-safe-area-bottom":null!==(o=null!==(s=t[2])&&void 0!==s?s:t[0])&&void 0!==o?o:t,"--application-safe-area-left":null!==(r=null!==(n=t[3])&&void 0!==n?n:t[1])&&void 0!==r?r:t})},h=s.config.safeArea,c="function"==typeof h?h():h;c&&a(c),n&&l(n),s.on("safeAreaChange",(t=>{a(t)}),i),s.on("globalCSSVariablesChange",(t=>{l(t)}),i)})(t,e)})(e,this),e.__LATH_APPLICATION_AVAILABILITY__=!0):((t,e)=>{const{config:i}=e,s=Array.from(new Set(i.apply));for(const e of s)"smart-setTimeout"===e&&N(t);if("function"==typeof i.inject)try{i.inject(t,e)}catch(t){console.error("config > inject:",t)}})(e,this))}loadMirrorImage(){this.status.refreshing||this.config.useMirroring&&!this.img&&(this.buildContentImage(),this.setImageContent(this.mirroringString||""))}setImageContent(t){const e=this.img,i=e.shadowRoot||e;"string"==typeof t?i.innerHTML=t:i.appendChild(t)}removeMirrorImage(){if(!this.img)return;if(this.status.refreshing)return;const t=this.img;c((()=>{var e;t.style.opacity="0",null===(e=t.parentNode)||void 0===e||e.removeChild(t),this.img=null}),300)}decorateSandbox(t){t.style.cssText=`\n      position: absolute;\n      top: 0;\n      left: 0;\n      ${C}\n      border: 0;\n      outline: 0;\n      contain: strict;\n    `}waitingForResponse(){return new Promise(((t,e)=>{this.loadSourceContent().then((()=>{var e;this.status.prerender=!0,null===(e=this.events)||void 0===e||e.load(this.self),this.trigger("load"),this.attachEvent(),c((()=>{t()}),0)})).catch((()=>{var t;null===(t=this.events)||void 0===t||t.loadError(this.self),this.trigger("loadError"),e()}))}))}createView(){return"shadow"===this.viewType?this.createShadowView():"portal"===this.viewType?this.createPortal(this.uri):this.createSandbox(this.uri,this.config.sandbox)}buildMainView(){return(0,s._)(this,void 0,void 0,(function*(){return this.cancelGuard(),this.expired?this.refresh():(this.view||(this.createTime=Date.now(),this.loadMirrorImage(),this.buildContentStructure(),this.injectIntoContext(),this.injectIntoContext(2),this.view=yield this.createView(),this.removeMirrorImage()),Promise.resolve())}))}build(){return(0,s._)(this,void 0,void 0,(function*(){return yield this.buildMainView(),Promise.resolve()}))}refresh(){var t,e;return(0,s._)(this,void 0,void 0,(function*(){if(this.status.refreshing||!this.view)return Promise.reject();if(this.status.refreshing=!0,"function"==typeof this.config.refresh)return yield this.config.refresh(),this.status.refreshing=!1,void this.trigger("refreshing");if(this.isPresetAppletsView||"applet"!==this.rel&&this.noSource)return void(this.status.refreshing=!1);const i=this.contentView,s=this.contentSlot,o=this.view;i.setAttribute("applet-id",`${this.id}-obsolete`),s.name=`applet-${this.id}-obsolete`,this.application.delPresetAppletsView(this.id),this.contentView=void 0,"applet"===this.rel&&this.noSource&&(this.config.source={src:location.href}),this.contentView=this.getContentView(),this.view=yield this.createView(),s.name=`applet-${this.id}`,this.status.refreshing=!1,this.trigger("refreshing"),"IFRAME"===o.tagName&&this.unload(o),null===(t=o.parentNode)||void 0===t||t.removeChild(o),null===(e=i.parentElement)||void 0===e||e.removeChild(i)}))}captureShot(t=!0){return(0,s._)(this,void 0,void 0,(function*(){return!t&&this.snapshot&&this.snapshotTime===this.createTime?this.snapshot:(this.snapshotTime=this.createTime,Promise.all([i.e(471),i.e(470)]).then(i.bind(i,470)).then((t=>(0,s._)(this,void 0,void 0,(function*(){return t.capture(this.self).then((t=>this.snapshot=t))})))))}))}}class W extends U{constructor(t,e,i){super(t,e,i),this.events.boot(this.self)}}class G extends class extends class extends class extends class extends class{constructor(t,e){this.id="",this.prevId="",this.param="",this.relativeViewport=document.createElement("relative-windows"),this.absoluteViewport=document.createElement("absolute-windows"),this.fixedViewport=document.createElement("fixed-windows"),this.applicationViewport=document.createElement("application-windows"),this.target=this.relativeViewport,this.application=t,this.root=e.root||document.body,this.zIndex=e.zIndex||Number.MAX_SAFE_INTEGER,this.setupViewport()}setupViewport(){this.relativeViewport.id="relative-viewport",this.absoluteViewport.id="absolute-viewport",this.resetViewport(),this.fixedViewport.id="fixed-viewport",this.fixedViewport.style.cssText="\n      width: 100%;\n      height: 0;\n      max-height: 0;\n      z-index: 3;\n      overflow: hidden;\n      contain: layout size;\n    ",this.applicationViewport.style.cssText=`\n      position: fixed;\n      ${P}\n      overflow: hidden;\n      z-index: ${this.zIndex};\n      contain: layout size;\n    `,this.applicationViewport.appendChild(this.relativeViewport),this.applicationViewport.appendChild(this.absoluteViewport),this.applicationViewport.appendChild(this.fixedViewport),this.root.appendChild(this.applicationViewport)}resetViewport(t){const e=`\n      position: fixed;\n      ${P}\n      overflow: hidden;\n      contain: layout size;\n    `;this.relativeViewport.style.cssText=`\n      ${e}\n      z-index: 1;\n      ${t?"transform: translate3d(0, 0, 0);":""}\n    `,this.absoluteViewport.style.cssText=`\n      ${e}\n      z-index: 2;\n      ${t?"":"transform: translate(200%, 200%);"}\n    `}}{constructor(t,e){super(t,e),this.prevHistoryStep=0,this.historyIndex=history.length,this.historyShadowLength=history.length,this.oneHistoryIndex=0,this.historyDirection=0,this.backoutCount=0,this.sessionHistory=[],this.silentObserver=void 0,this.defaultURLPath=location.pathname,this.defaultURLSearch=location.search,this.historyBreakCallback=null,this.bindHistoryState()}get fromHistoryForward(){return-1===this.prevHistoryStep&&1===this.historyDirection}get fromHistoryBack(){return-1===this.prevHistoryStep&&-1===this.historyDirection}get historyState(){return"loading"===document.readyState?this.sessionHistory[this.oneHistoryIndex]:history.state}get isOverscrollHistoryNavigation(){if(!this.fromHistoryBack&&!this.fromHistoryForward)return!1;const t=this.application.overscrollHistoryNavigation,e=-1!==t.type.indexOf("wipe")?300:200;return!(Date.now()-t.moment>e)}bindHistoryState(){addEventListener("popstate",(t=>{this.popstate(t.state)}),!1),addEventListener("hashchange",(()=>{this.observeSilent()}),!1)}observeSilent(t=1e3){if(this.options.oneHistory)return;"loading"===document.readyState&&(t=3e4),clearInterval(this.silentObserver);let e=0;this.silentObserver=d((()=>(0,s._)(this,void 0,void 0,(function*(){e++,e>=t&&clearInterval(this.silentObserver);const i=this.historyState||history.state||this.application.route,s=decodeURIComponent(i.id);s&&decodeURIComponent(s)!==this.id&&(yield this.popstate(this.historyState).catch((()=>{clearInterval(this.silentObserver)})))}))),500)}popstate(t){return(0,s._)(this,void 0,void 0,(function*(){const{historyIndex:e=this.historyShadowLength}=null!=t?t:{};e===this.historyIndex?this.historyDirection=0:e>this.historyIndex?this.historyDirection=1:this.historyDirection=-1,null===t?(this.historyDirection=-1,this.historyIndex=this.historyIndex-1):this.historyIndex=e,yield this.toHistory(t),this.observeSilent(20)}))}back(t){return(0,s._)(this,void 0,void 0,(function*(){return this.backFromType=t,this.backTo().catch((()=>{this.backFromType=void 0}))}))}backTo(){if(!this.options.oneHistory)return history.back(),this.observeSilent(20),Promise.resolve();const t=this.sessionHistory[this.oneHistoryIndex-1];return t?(this.historyDirection=-1,this.oneHistoryIndex=this.oneHistoryIndex-1,this.toHistory(t)):Promise.reject()}forward(){if(!this.options.oneHistory)return history.forward(),this.observeSilent(20),Promise.resolve();const t=this.sessionHistory[this.oneHistoryIndex+1];return t?(this.historyDirection=1,this.oneHistoryIndex=this.oneHistoryIndex+1,this.toHistory(t)):Promise.reject()}getSearch(t=""){const e=new URL(t,location.origin+this.defaultURLPath+this.defaultURLSearch);return e.pathname+e.search}pushState(t="",e="",i=""){t=encodeURIComponent(t),i=this.getSearch(i);const s=this.historyShadowLength,o={id:t,title:e,time:Date.now(),search:i,historyIndex:s};if(this.observeSilent(20),0!==this.sessionHistory.length&&(this.sessionHistory.length=this.oneHistoryIndex+1),this.sessionHistory.push(o),this.oneHistoryIndex=this.sessionHistory.length-1,this.options.oneHistory)return this.replaceState(t,e,i);history.pushState(o,e,i+"#"+t),this.historyIndex=this.historyShadowLength=s+1,this.historyDirection=1}replaceState(t="",e="",i=""){t=encodeURIComponent(t),i=this.getSearch(i);const s=this.historyShadowLength,o={id:t,title:e,time:Date.now(),search:i,historyIndex:s};history.replaceState(o,e,i+"#"+t),this.historyIndex=s,this.historyDirection=0}requestRegisterHistory(t="",e="",i=""){if("portal"!==this.applet.viewType){if(this.options.oneHistory){if(-1===this.prevHistoryStep)return this.replaceState(t,e,i)}else if(-1===this.prevHistoryStep)return this.replaceState(t,e,i);this.fromHistoryBack||this.fromHistoryForward||this.pushState(t,e,i)}}toHistory(t){var e,i,o,n,r;return(0,s._)(this,void 0,void 0,(function*(){const s=this.options,l=t||history.state||this.application.route,a=decodeURIComponent(l.id)||s.index||"frameworks",h=l.search,c=yield this.application.get(a);if(!c)return;if(this.checkSingleLock())return this.backoutCount++,void(!0===(null===(i=(e=this.options).holdBack)||void 0===i?void 0:i.call(e,this.backoutCount))&&(this.pushState(a,c.config.title,h),this.application.trigger("exit",{backoutCount:this.backoutCount})));this.backoutCount=0;const d=null!==(o=c.config.level)&&void 0!==o?o:0,p=null!==(n=this.applet.config.level)&&void 0!==n?n:0;return s.singleFlow&&0!==d&&d>=p?this.back():(this.isOverscrollHistoryNavigation&&(null===(r=this.historyBreakCallback)||void 0===r||r.call(this)),this.application.segue.to(a,h,-1).then((()=>{this.backFromType=void 0})),this.application.trigger("back",c),Promise.resolve())}))}checkSingleLock(){return!(!this.options.singleLock||0!==this.applet.config.level||-1!==this.historyDirection)}bindHistoryBreak(t){this.historyBreakCallback=t}}{constructor(){super(...arguments),this.hasAnimation=!1,this.superSwitch=!1,this.viewportLevelLength=2,this.historyIndexOfStartOverlaying=void 0,this.fromOverscrollHistoryNavigation=!1}get isEntryApplet(){return!this.prevApplet||"applet"!==this.prevApplet.rel}get immovable(){return this.superSwitch||!this.hasAnimation||this.countercurrent}get fallbackState(){var t,e;return 1===this.appletGroup.length?-1:!this.applet.config.free&&(null===(t=this.prevApplet)||void 0===t?void 0:t.config.free)?1:this.applet.config.free&&!(null===(e=this.prevApplet)||void 0===e?void 0:e.config.free)||this.stackUp?0:1}get stackUp(){var t,e;return!(!this.applet.config.free&&this.superSwitch)&&this.applet.viewLevel>=(null!==(e=null===(t=this.prevApplet)||void 0===t?void 0:t.viewLevel)&&void 0!==e?e:0)}get countercurrent(){return 1===this.fallbackState||this.fromHistoryBack}get viewports(){var t,e;return this.superSwitch?[this.applet.config.free?this.absoluteViewport:this.relativeViewport,(null===(t=this.prevApplet)||void 0===t?void 0:t.config.free)?this.absoluteViewport:this.relativeViewport]:[this.applet.viewport,null===(e=this.prevApplet)||void 0===e?void 0:e.viewport]}get isInseparableLayer(){return!this.prevApplet||"frameworks"===this.prevApplet.rel&&!this.prevApplet.slide}checkSwitchViewport(t=this.prevApplet,e=this.applet){return t=t||e,!!e.config.free!=!!t.config.free}getSuperViewport(t=this.applet){return"system"===t.rel?this.fixedViewport:t.config.free?this.absoluteViewport.shadowRoot||this.absoluteViewport:this.relativeViewport.shadowRoot||this.relativeViewport}}{checkAnimationNamed(){return!!this.getAnimationNames()}checkNativeAnimation(){const t=this.getAnimationNames();return"string"==typeof t&&["slide","slide-left"].includes(t)}getAnimationNames(){var t,e;if(this.options.index&&this.applet.isFullscreen&&this.isEntryApplet)return!1;if(this.fromOverscrollHistoryNavigation||"controls"===this.backFromType)return!1;const i=null!==(e=null===(t=this[this.countercurrent?"prevApplet":"applet"])||void 0===t?void 0:t.config.animation)&&void 0!==e?e:"slide";return!0===i||"inherit"===i?this.options.defaultAnimation:i}getAnimationGroup(){return(0,s._)(this,void 0,void 0,(function*(){let t;const e=this.getAnimationNames();if("string"==typeof e)t=yield this.getAnimationByName(e);else if("function"==typeof(null==e?void 0:e[0]))return e;if("function"==typeof(null==t?void 0:t[0]))return t}))}getAnimationOneSide(t){return(0,s._)(this,void 0,void 0,(function*(){const e=yield this.getAnimationGroup();if(t>=0)switch(typeof e){case"function":return e;case"object":return e[2===e.length?t:0];default:return}}))}getAnimationByName(t){return(0,s._)(this,void 0,void 0,(function*(){switch(t){case"popup":return new Promise(((t,e)=>{i.e(281).then(i.bind(i,281)).then((e=>{const i=e.default;t([i,i])})).catch(e)}));case"stretch":return new Promise(((t,e)=>{i.e(186).then(i.bind(i,186)).then((e=>{const i=e.default;t([i,i])})).catch(e)}));case"flip":return new Promise(((t,e)=>{i.e(945).then(i.bind(i,945)).then((e=>{const i=e.default;t([i(4),i(4)])})).catch(e)}));case"flip-left":return new Promise(((t,e)=>{i.e(945).then(i.bind(i,945)).then((e=>{const i=e.default;t([i(3),i(3)])})).catch(e)}));case"flip-down":return new Promise(((t,e)=>{i.e(945).then(i.bind(i,945)).then((e=>{const i=e.default;t([i(2),i(2)])})).catch(e)}));case"flip-right":return new Promise(((t,e)=>{i.e(945).then(i.bind(i,945)).then((e=>{const i=e.default;t([i(1),i(1)])})).catch(e)}));case"flip-up":return new Promise(((t,e)=>{i.e(945).then(i.bind(i,945)).then((e=>{const i=e.default;t([i(0),i(0)])})).catch(e)}));case"fade":return new Promise(((t,e)=>{i.e(996).then(i.bind(i,996)).then((e=>{const i=e.default;t([i(1),i(0)])})).catch(e)}));case"zoom":return new Promise(((t,e)=>{i.e(746).then(i.bind(i,746)).then((e=>{const i=e.default;t([i(1),i(0)])})).catch(e)}));case"slide-right":return new Promise(((t,e)=>{i.e(776).then(i.bind(i,776)).then((e=>{const i=e.default;t([i(3),i(1)])})).catch(e)}));case"slide-up":return new Promise(((t,e)=>{i.e(776).then(i.bind(i,776)).then((e=>{const i=e.default;t([i(2),i(0)])})).catch(e)}));case"slide-down":return new Promise(((t,e)=>{i.e(776).then(i.bind(i,776)).then((e=>{const i=e.default;t([i(0),i(2)])})).catch(e)}));default:return new Promise(((t,e)=>{this.options.swipeModel?i.e(13).then(i.bind(i,13)).then((e=>{const i=e.default;t([i,i])})).catch(e):i.e(776).then(i.bind(i,776)).then((e=>{const i=e.default;t([i(1),i(3)])})).catch(e)}))}}))}}{constructor(t,e){super(t,e),this.windowSet=[],this.promiseQueue=[],this.promiseParamQueue=[],this.delayDynamicImport()}to(...t){return(0,s._)(this,void 0,void 0,(function*(){const e=this.next()||this.promise(...t);return this.pushPromise(this.bindPromiseDone(e),t)}))}attachAppletViewport(t){if(t.viewport)return;const e=document.createElement(t.rel+"-viewport");e.setAttribute("name",t.id),t.attach(e),this.getSuperViewport(t).appendChild(e)}delayDynamicImport(){p((()=>{i.e(749).then(i.bind(i,749)).catch((t=>{console.warn(t)}))}))}setStepState(t){this.target=this.getSuperViewport(),this.superSwitch=this.checkSwitchViewport(),this.fromHistoryBack||this.applet.setLevel(1+this.viewportLevelLength++),this.hasAnimation=!t&&this.checkAnimationNamed()}resetAppletViewport(t,e=this.immovable){const i=t.viewport,s=["frameworks","system"].includes(t.rel);i.style.cssText="",s||(i.style.cssText=`\n      position: absolute;\n      ${P}\n      z-index: ${t.viewLevel};\n      transition-duration: 0ms;\n      transition-delay: 0ms;\n      transition-property: all;\n      transform: ${e?"translate(0, 0)":"translate(0, 200%)"};\n      backface-visibility: hidden;\n      overflow: hidden;\n      contain: strict;\n    `)}prev(){return this.promiseQueue[0]}next(){const t=this.prev(),e=()=>this.bindPromiseDone(this.promise(...this.promiseParamQueue[0]));if(t)return t.then(e).catch(e)}pushPromise(t,e){return this.promiseParamQueue.push(e),this.promiseQueue.push(t),t}shiftPromise(){this.promiseParamQueue.shift(),this.promiseQueue.shift()}bindPromiseDone(t){return(0,s._)(this,void 0,void 0,(function*(){const e=()=>this.shiftPromise();return t.then(e).catch(e)}))}limit(t){var e,i;const s=Math.max((null===(e=null==this?void 0:this.options)||void 0===e?void 0:e.limit)||3,2),o=this.windowSet.indexOf(t);"applet"===this.applet.rel&&!0!==this.applet.config.background&&(-1!==o&&this.windowSet.splice(o,1),this.windowSet.push(t),this.windowSet.length>s&&(null===(i=this.application.applets[this.windowSet.splice(0,1)[0]])||void 0===i||i.destroy()))}destroy(t){t.transient&&-1===this.prevHistoryStep?this.application.del(t.id).then((()=>{const e=this.windowSet.indexOf(t.id);this.windowSet.splice(e,1)})):t.guarding().then((e=>{e||t.destroy().then((()=>{const e=this.windowSet.indexOf(t.id);this.windowSet.splice(e,1)}))}))}promise(...t){var e,i;return(0,s._)(this,void 0,void 0,(function*(){const[o,n="",r=1,l,a]=t;if(!o)return Promise.resolve();const h=this.id,c=this.application.applets[o],d=this.application.applets[h],p=d?[c,d]:[c];return c?o===this.id?Promise.resolve():(null===(e=c.mountBehavior)||void 0===e?void 0:e.agentSegue)?null===(i=c.mountBehavior)||void 0===i?void 0:i.agentSegue():(this.prevId=this.id,this.id=o,this.param=this.getSearch(n),this.applet=c,this.prevPrevApplet=this.prevApplet,this.prevApplet=d,this.appletGroup=p,this.prevHistoryStep=r,this.touches=l,this.fromOverscrollHistoryNavigation=this.isOverscrollHistoryNavigation,this.setStepState(a),this.attachAppletViewport(c),this.resetAppletViewport(c),this.requestRegisterHistory(o,c.config.title,n),c.setActionOrigin(l),yield c.setParam(this.param),yield c.build(),this.start().then((()=>(0,s._)(this,void 0,void 0,(function*(){return this.transform().then((t=>{var e;this.end(t),this.limit(o),this.application.pullDependencies(null===(e=c.config)||void 0===e?void 0:e.prerender).then((()=>{this.application.trigger("prerenderComplete")})),c.config.title&&(document.title=c.config.title)}))}))))):this.application.get(o).then((()=>this.promise(...t))).catch((()=>{if(this.options.notFound)return this.promise(this.options.notFound,n?n+"&__notFoundId="+o:"?__notFoundId="+o,r)}))}))}pos(){var t,e;let i=(null===(t=this.touches)||void 0===t?void 0:t.x)||0,s=(null===(e=this.touches)||void 0===e?void 0:e.y)||0,o="center",n="center";const r=this.relativeViewport.offsetWidth,l=this.relativeViewport.offsetHeight;return i&&s&&(n=[i,s],i<r/4?i=0:i>3*r/4&&(i=r),s<l/4?s=0:s>3*l/4&&(s=l),o=[i,s]),{x:i,y:s,width:r,height:l,attach:o,origin:n}}modulation(t){const e=this.viewports,s=this.fallbackState,o=this.countercurrent,n=this.pos();return new Promise(((r,l)=>{i.e(749).then(i.bind(i,749)).then((({Animate:i})=>{var l;const a={x:n.x,y:n.y,in:new i(e[0]),out:new i(e[1]),view:e,width:n.width,height:n.height,viewports:[this.relativeViewport,this.absoluteViewport],applets:this.appletGroup,reverse:o,direction:o?-1:1,fallbackState:s,historyDirection:this.historyDirection,origin:n.origin,attach:n.attach,touches:this.touches,swipeTransitionType:null!==(l=this.options.swipeTransitionType)&&void 0!==l?l:"zoom",callback:t};r(a)})).catch((()=>{l()}))}))}transform(){return(0,s._)(this,void 0,void 0,(function*(){return this.hasAnimation?new Promise((t=>{this.getAnimationOneSide(this.fallbackState).then((e=>{this.bindHistoryBreak((()=>t(!1))),this.modulation(t).then((i=>{var s;if(!e)return t(!1);null===(s=this.prevApplet)||void 0===s||s.willSegueHide(),this.applet.willSegueShow(),c((()=>{const s=e(i);s instanceof Promise&&s.then(t),c((()=>t(!1)),2500)}),0)})).catch((()=>{t(!1)}))})).catch((()=>t(!1)))})):Promise.resolve(!1)}))}start(){return new Promise(((t,e)=>{this.application.activate(!1),this.application.trigger("transformStart",this.appletGroup);const i=this.applet.events.transformStart;if("function"==typeof i&&"break"===i(this.applet))return e();this.applet.controls&&(this.isInseparableLayer?(this.applet.controls.disable(),this.applet.controls.freeze()):this.checkNativeAnimation()||this.applet.controls.freeze()),this.hasAnimation&&!this.superSwitch||this.applet.viewport&&"applet"===this.applet.rel&&(this.applet.viewport.style.transform="translate(0, 0)"),this.applet.willShow(),this.prevApplet&&this.prevApplet.willHide(),t()}))}end(t=!1){(this.applet.isFullscreen||this.countercurrent)&&(this.superSwitch&&this.switchViewport(),this.switchApplet(t)),this.applet.controls&&this.applet.controls.activate(),this.applet.show(),this.prevApplet&&this.prevApplet.hide();const e=this.applet.events.transformEnd;"function"==typeof e&&e(this.applet),this.application.activate(!0),this.application.trigger("transformEnd",this.appletGroup)}switchViewport(){var t,e;this.resetViewport(null===(e=null===(t=this.applet)||void 0===t?void 0:t.config)||void 0===e?void 0:e.free)}switchApplet(t=!1){if(this.prevApplet){if(!t){if("applet"===this.prevApplet.rel){const t=(this.applet.useControls||this.applet.config.modality)&&!this.countercurrent||this.prevApplet.config.modality&&this.fromHistoryBack;this.prevApplet.viewport&&(this.prevApplet.viewport.style.transform=t?"translate(0, 0)":"translate(0, 200%)")}this.resetAppletViewport(this.applet,!0)}this.prevApplet.viewport&&(this.prevApplet.viewport.style.transitionDuration="0ms"),!1!==this.prevApplet.config.background||this.applet.config.modality?this.prevApplet.hide():this.destroy(this.prevApplet),this.superSwitch&&this.prevPrevApplet&&this.resetAppletViewport(this.prevPrevApplet,!0)}}}{setup(t){this.options=t}}var X=Object.freeze({__proto__:null,Application:class extends l{constructor(t={}){var e;super(),this.tunneling=!1,this.pullRefreshHolder={holder:null,spinner:null,holdLayer:null},this.working=!1,this.root=t.root,this.appletsSpace=t.appletsSpace,this.tunneling=parent!==window&&!!t.tunneling&&parent.__LATH_APPLICATION_AVAILABILITY__,this.segue=new G(this,t),this.presetConfig=t,this.to=this.segue.to.bind(this.segue),this.activateTunneling(),e=this,window.addEventListener("message",(t=>{if(t.source===window)return;const{action:i,data:s}=t.data;switch(i){case"to":e.segue.to(s.applet,s.query,s.history);break;case"back":e.segue.back();break;case"forward":e.segue.forward();break;case"pushWindow":e.pushWindow(...s)}})),this.setBaseStyle()}setBaseStyle(){const t=document.createElement("style");t.innerHTML="\n  html, body {\n    width: 100vw;\n    height: 100vh;\n    min-width: 100vw;\n    min-height: 100vh;\n    max-width: 100vw;\n    max-height: 100vh;\n    overflow: hidden;\n  }\n  body::-webkit-scrollbar {\n    display: none;\n  }\n  body::scrollbar {\n    display: none;\n  }\n  define-applet {\n    display: block;\n  }\n",document.head.appendChild(t)}add(t,e){var i;if(this.applets[t])return this.applets[t];const s=null===(i=this.config)||void 0===i?void 0:i.appletManifestProcess;return s&&(e=s(e)||e),this.applets[t]=new W(t,e,this)}del(t){return new Promise(((e,i)=>{const s=this.applets[t];s.view?s.destroy().then(e).catch(i):e(!0),delete this.applets[t]}))}get(t){var e;return(0,s._)(this,void 0,void 0,(function*(){if("object"==typeof this.applets[t])return Promise.resolve(this.applets[t]);const i=this.options.applets[t];switch(typeof i){case"function":return Promise.resolve(this.add(t,yield this.promiseApplet(i)));case"object":return Promise.resolve(this.add(t,i));case"string":return this.verifyAppletSrcLegitimacy(t)&&null!==(e=yield this.createAppletByURL(t,{},t))&&void 0!==e?e:Promise.reject();default:return Promise.reject()}}))}defineApplet(t,e){t.setAttribute("applet-id",e),this.appletsSpace.appendChild(t),!0===function(){const t=(0,s.g)();return!!(t&&t[0]<=13)}()&&c((()=>{t.slot="none",c((()=>{t.slot="applet-"+e}),0)}),0)}cloneAsNewApplet(t,e,i={}){if(!e)return t;const s=Object.assign({},t.model.config,i);return this.add(e,Object.assign({},t.model,{config:s}))}getAppletByURL(t){return(0,s._)(this,void 0,void 0,(function*(){const e=this.config.transfer;if(e){const i=e(t);if("string"==typeof i)return this.get(i)}const i=this.applets,s=this.resolveURL(t),o=s.origin+s.pathname;for(const e in i){const s=i[e],n=s.config.capture;if("applet"===s.rel){if(n&&this.captureAppletSrc(t,n))return s;if(s.uri===o)return s}}}))}createAppletByURL(t,e,i){var o,n;return(0,s._)(this,void 0,void 0,(function*(){const s=decodeURIComponent(t),r=this.applets,l=null!==(o=r[s])&&void 0!==o?o:yield this.getAppletByURL(t);if(l)return i?this.cloneAsNewApplet(l,i,e):l;const a=!0!==this.config.disableTransient;return this.add(s,{config:Object.assign({title:"",rel:"applet",free:!0,source:{src:t},background:"auto",timeout:a?0:null!==(n=this.config.transientTimeout)&&void 0!==n?n:6e4,animation:"inherit",color:this.config.color,transient:a},e)})}))}pushWindow(t,e="",i="slide",o,n){var r,l;return(0,s._)(this,void 0,void 0,(function*(){if(!this.verifyAppletSrcLegitimacy(t))return Promise.reject("Illegal");if(this.tunneling)return parent.postMessage({action:"pushWindow",data:[t,e,i,o,n]},"*"),Promise.resolve();const s=this.resolveURL(t);if(-1===s.protocol.indexOf("http"))return Promise.reject("Unknown");const a=s.search,h=yield this.createAppletByURL(t,{title:e,animation:i,level:this.activityLevel},o);return h?this.segue.to(h.id,(null===(l=null===(r=h.config)||void 0===r?void 0:r.source)||void 0===l?void 0:l.html)?a:"",1,n):Promise.reject()}))}pullDependencies(t=[],e=!0){const i=[];for(const s of t)i.push(new Promise(((t,i)=>{this.get(s).then((i=>{e?i.prerender().then(t).catch(t):t("")})).catch(i)})));return Promise.all(i)}updateSafeArea(t){this.trigger("safeAreaChange",t)}updateGlobalCSSVariables(t){this.trigger("globalCSSVariablesChange",t)}refresh(){for(const t in this.applets){const e=this.applets[t];e.visibility?e.refresh():e.status.requestRefresh=!0}}createAppSwitcher(){i.e(469).then(i.bind(i,469)).then((({AppSwitcher:t})=>{this.appSwitcher=new t(this)})).catch((t=>{console.warn(t)}))}createPullToRefreshHolder(){i.e(967).then(i.bind(i,967)).then((t=>{this.pullRefreshHolder=t.createPullToRefreshHolder(this.properties.darkTheme,this.segue.fixedViewport),this.trigger("pullToRefreshAvailable")})).catch((t=>{console.warn(t)}))}mountSystem(){this.options.applets.system&&this.get("system").then((t=>{this.segue.attachAppletViewport(t),t.build().then((()=>this.trigger("systemDidMount",t)))}))}mountFramework(){return(0,s._)(this,void 0,void 0,(function*(){return this.get("frameworks").then((t=>{const e=this.route,i=t.config,s=i.index||"",o=i.preIndex,n=e.id||s;return this.config=i,this.segue.setup({singleFlow:i.singleFlow,singleLock:i.singleLock,index:s,defaultIndex:n,oneHistory:i.oneHistory,notFound:i.notFound||s,limit:Math.max(i.limit||7,2),defaultAnimation:i.animation,holdBack:i.holdBack,swipeTransitionType:i.swipeTransitionType,swipeModel:t.swipeModel}),Promise.all([this.segue.to("frameworks",void 0,-1).then((()=>{i.pullToRefresh&&this.createPullToRefreshHolder(),i.appSwitcher&&this.createAppSwitcher(),this.trigger("frameworksDidMount",t),window.dispatchEvent(new CustomEvent("lathApplicationReady",{detail:{application:this}}))})),this.mountFirstApplet(n,s,o,i.oneHistory).then((()=>{this.segue.id!==n&&this.resolveURL(n).origin!==location.origin&&this.pushWindow(n)}))])})).catch((()=>{(0,s.t)(1007)}))}))}createCloneApplet(t){return(0,s._)(this,void 0,void 0,(function*(){const e=t.split("^");1!==e.length&&this.get(e[1]).then((e=>{const i=e.model;Object.assign(i.config,{level:this.activityLevel}),this.add(t,i)})).catch((()=>{(0,s.t)(1008,"error",t)}))}))}mountFirstApplet(t,e,i,o){return(0,s._)(this,void 0,void 0,(function*(){return yield this.createCloneApplet(t),o?(this.segue.pushState(e||"frameworks"),t?this.segue.to(t,location.search,1):Promise.resolve()):t!==e&&t!==i?(e||i||this.segue.pushState("frameworks"),i&&this.segue.pushState(i),t?this.segue.to(t,location.search,this.exists?-1:1):Promise.resolve()):t?this.segue.to(t,location.search,-1):Promise.resolve()}))}activateTunneling(){window.addEventListener("message",(t=>{const{type:e}=t.data,i=this.activityApplet;if(t.source!==window)switch(e){case"applet-show":null==i||i.show();break;case"applet-hide":null==i||i.hide();break;case"applet-will-show":null==i||i.willShow();break;case"applet-will-hide":null==i||i.willHide();break;case"application-active":null==this||this.activate(!0);break;case"application-frozen":null==this||this.activate(!1)}}))}start(){return(0,s._)(this,void 0,void 0,(function*(){return this.options.applets?this.working?Promise.reject("repeat"):(this.working=!0,this.setExists(),this.mountFramework().then((()=>{this.trigger("firstAppletDidMount"),this.mountSystem()}))):Promise.reject("Please configure the applet first!")}))}}})}}]);