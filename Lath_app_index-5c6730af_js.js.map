{"version":3,"file":"Lath_app_index-5c6730af_js.js","mappings":";;;;;;;;;;;;;;;AAAgJ;AAChJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,kBAAkB,eAAe,mBAAmB,IAAI,sDAAsD,SAAS,kHAAkH,aAAa,aAAa,uGAAuG,mFAAmF,OAAO,OAAO,qDAAS,gCAAgC,sJAAsJ,qDAAU,MAAM,mBAAmB,OAAO,EAAE,QAAQ,+EAA+E,qDAAU,MAAM,mHAAmH,MAAM,oBAAoB,OAAO,qDAAS,gCAAgC,mRAAmR,iDAAc,mBAAmB,wDAAwD,kBAAkB,qBAAqB,4CAA4C,uNAAuN,8BAA8B;AAChpD,kCAAkC,gBAAgB;AAClD;AACA,aAAa;AACb,YAAY;AACZ,wBAAwB;AACxB,YAAY;AACZ;AACA,YAAY;AACZ,wBAAwB;AACxB;AACA;AACA;AACA,kCAAkC,cAAc;AAChD,yBAAyB,qYAAqY,kEAAkE,qDAAU,MAAM,sHAAsH,MAAM,EAAE,uBAAuB,gCAAgC,gEAAgE,EAAE,mBAAmB,OAAO,qDAAS,gCAAgC,yEAAyE,2EAA2E,YAAY,gBAAgB,EAAE,EAAE,uBAAuB,OAAO,qDAAS,gCAAgC,sEAAsE,wBAAwB;AACnoC,QAAQ;AACR;AACA,oBAAoB;AACpB,uBAAuB,KAAK;AAC5B,iIAAiI,mCAAmC,EAAE,EAAE,qBAAqB,OAAO,qDAAS,gCAAgC,qFAAqF;AAClU,QAAQ;AACR;AACA;AACA,+BAA+B,EAAE,MAAM,EAAE,iBAAiB,EAAE;AAC5D,oBAAoB;AACpB,uBAAuB,KAAK;AAC5B;AACA,kCAAkC,mBAAmB,4CAA4C,mBAAmB,qDAAU,MAAM,wCAAwC,gBAAgB,EAAE,EAAE,iBAAiB,OAAO,qDAAS,gCAAgC,uBAAuB,qDAAqB,MAAM,kCAAkC,oEAAoE,qDAAqB,MAAM,mLAAmL,EAAE,EAAE,EAAE,EAAE,kBAAkB,OAAO,qDAAS,gCAAgC,oDAAoD,gDAAgD,uBAAuB,qDAAqB,MAAM,kCAAkC,qDAAqB,MAAM,4EAA4E,EAAE,MAAM,EAAE,iBAAiB,EAAE,GAAG,qDAAU,QAAQ,EAAE,EAAE,EAAE,EAAE,kBAAkB,sCAAsC,qEAAqE,sBAAsB,gGAAgG,uBAAuB,oFAAoF,qBAAqB,qRAA6B,WAAW,gBAAgB","sources":["webpack://lath-docs/../Lath/app/index-5c6730af.js"],"sourcesContent":["import{_ as __awaiter}from\"./index-3d1239de.js\";import{s as setTimeout,S as SmoothScroller,r as requestAnimationFrame}from\"./index-d27948d9.js\";const switcherStyle=`\n  box-sizing: border-box;\n  position: absolute;\n  inset: 0;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  padding-top: constant(safe-area-inset-top);\n  padding-top: env(safe-area-inset-top);\n  background: rgb(128 128 128 / 50%);\n  opacity: 0;\n  transition: opacity .4s ease;\n`,snapWrapperStyle=`\n  display: grid;\n  box-sizing: border-box;\n  position: absolute;\n  inset: 0;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  padding: 10px;\n  overflow-y: scroll !important;\n  scroll-padding: 12px;\n  scroll-behavior: smooth;\n  scroll-snap-type: y mandatory;\n`,snapWrapper2Style=`\n  ${snapWrapperStyle}\n  grid-template-columns: 50% 50%;\n  grid-template-rows: repeat(2, 40%);\n  row-gap: 15px;\n`,snapWrapper3Style=`\n  ${snapWrapperStyle}\n  grid-template-columns: repeat(3, 33.33%);\n  grid-template-rows: repeat(2, 50%);\n  row-gap: 15px;\n`,itemImgWrapperStyle=`\n  display: block;\n  width: 100%;\n  height: 100%;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 3px 10px rgb(0 0 0 / 30%);\n`,itemViewStyle=`\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  scroll-snap-align: start;\n  cursor: pointer;\n  margin: 0 10px;\n`,itemImgStyle=`\n  display: block;\n  width: 100%;\n  height: 100%;\n  border-radius: 16px;\n  transform-origin: top left;\n  transform: translate3d(0, 0, 0);\n  overflow: hidden;\n`,itemImgCoverStyle=`\n  position: fixed;\n  top: 0;\n  left: 0;\n  ${itemImgStyle}\n`,itemInfoStyle=`\n  display: flex;\n  margin: 0 auto;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n`,itemTitleStyle=`\n  margin-top: 4px;\n  font-size: 16px;\n  color: #fff;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-family: \"SF Pro Text\",\"Myriad Set Pro\",\"SF Pro Icons\",\"Apple Legacy Chevron\",\"Helvetica\",\"Arial\",sans-serif;\n`;class AppSwitcher{constructor(e){this.inProgress=!1;var{relativeViewport:t,absoluteViewport:i,fixedViewport:s}=e.segue;this.relativeViewport=t,this.absoluteViewport=i,this.fixedViewport=s,this.application=e,this.delayDynamicImport()}bindResize(){const e=()=>{this.close(),window.removeEventListener(\"resize\",e),window.removeEventListener(\"orientationchange\",e)};window.addEventListener(\"resize\",e),window.addEventListener(\"orientationchange\",e)}open(){return __awaiter(this,void 0,void 0,function*(){!0!==this.inProgress&&(this.inProgress=!0,yield this.createAppSwitcher(),this.blurBackgroundImage(),this.switcher.style.opacity=\"1\",this.bindResize(),setTimeout(()=>{this.inProgress=!1},400))})}close(){this.inProgress=!0,this.focusBackgroundImage(),this.switcher.style.opacity=\"0\",setTimeout(()=>{this.inProgress=!1,this.switcher.parentElement===this.fixedViewport&&this.fixedViewport.removeChild(this.switcher)},400)}createAppSwitcher(){return __awaiter(this,void 0,void 0,function*(){this.switcher=document.createElement(\"applet-switcher\"),this.switcher.style.cssText=switcherStyle,this.snapWrapper=document.createElement(\"applet-switcher-snap\"),this.snapWrapper.style.cssText=800<this.switcher.offsetWidth?snapWrapper3Style:snapWrapper2Style,this.scroll=new SmoothScroller(this.snapWrapper);var e=this.application.applets,t=this.getActiveApplet();for(const o in e){var i=e[o],s=i.color;if(\"applet\"===i.rel&&!i.isModality&&i.view){const a=document.createElement(\"applet-switcher-item\"),n=document.createElement(\"div\"),l=document.createElement(\"div\"),p=document.createElement(\"div\"),d=document.createElement(\"div\"),c=document.createElement(\"div\");a.style.cssText=itemViewStyle;var r=i.config.poster?`\n          background-image: url(${i.config.poster});\n          background-size: cover;\n        `:\"\";n.style.cssText=`\n          ${itemImgWrapperStyle}\n          background: ${s};\n          ${r}\n        `,l.style.cssText=`\n          ${itemImgStyle}\n          background: ${s};\n        `,d.style.cssText=itemInfoStyle,p.style.cssText=i.config.icon?`\n          width: 16px;\n          height: 16px;\n          background-image: url(${i.config.icon});\n        `:\"display: none;\",c.style.cssText=itemTitleStyle,c.innerText=i.config.title||i.id,d.appendChild(p),d.appendChild(c),n.appendChild(l),a.appendChild(n),a.appendChild(d),this.snapWrapper.appendChild(a),this.switcher.appendChild(this.snapWrapper),this.fixedViewport.appendChild(this.switcher),i.id===(null==t?void 0:t.id)?yield this.setActivityItem(i,n,l):this.setNormalItem(i,l),this.bindItemClick(i,a,n,l)}}this.snapWrapper.style.transform=\"translate3d(0, 0, 0) scale(.9)\",setTimeout(()=>{this.snapWrapper.style.transition=\"all .4s ease-out\",this.snapWrapper.style.transform=\"translate3d(0, 0, 0) scale(1)\"},100)})}bindItemClick(e,t,i,s){t.addEventListener(\"click\",()=>{this.inProgress||(this.inProgress=!0,this.restoreToItem(e,i,s))})}setNormalItem(e,t){return __awaiter(this,void 0,void 0,function*(){t.style.opacity=\"0\",e.captureShot(Date.now()-e.visitTime<=12e4).then(e=>{t.appendChild(e),t.style.transition=\"opacity .2s ease\",t.style.opacity=\"1\"}).catch(e=>{console.warn(e)})})}setActivityItem(r,o,a){return __awaiter(this,void 0,void 0,function*(){var e=o.offsetTop,t=r.color,i=o.offsetWidth/this.switcher.offsetWidth;const s=a.style.cssText;a.style.cssText=`\n      ${itemImgCoverStyle}\n      z-index: 3;\n      background: ${t};\n      border-radius: ${16/i}px;\n    `,this.switcher.appendChild(a),a.appendChild(yield r.captureShot()),this.scroll.snapTo(0,e),this.shrinkToItem(o,a).then(()=>{a.style.cssText=s,o.appendChild(a)})})}restoreToItem(o,a,n){return __awaiter(this,void 0,void 0,function*(){var e=a.offsetTop,t=a.offsetLeft,i=a.offsetWidth/this.switcher.offsetWidth,s=o.color;this.switcher.appendChild(n),n.style.cssText=`\n      ${itemImgCoverStyle}\n      z-index: 5;\n      height: 100%;\n      transform: translate3d(${t}px, ${e}px, 0px) scale(${i});\n      background: ${s};\n      border-radius: ${16/i}px;\n      overflow: hidden;\n    `,yield this.stretchToItem(n);const r=Date.now();this.application.to(o.id,o.param).then(()=>{var e=Date.now()-r;setTimeout(()=>{n.style.borderRadius=\"0px\",this.close()},200<e?0:400-e)})})}stretchToItem(i){return __awaiter(this,void 0,void 0,function*(){return new Promise(t=>{requestAnimationFrame(()=>{const e=i.querySelector(\"canvas\");i.style.transition=\"all .4s ease\",e.style.transition=\"all .4s ease\",requestAnimationFrame(()=>{i.style.transform=\"translate3d(0px, 0px, 0px) scale(1)\",this.snapWrapper.style.transition=\"all .4s ease-out\",this.snapWrapper.style.transform=\"translate3d(0, 0, 0) scale(.9)\",t()})})})})}shrinkToItem(e,o){return __awaiter(this,void 0,void 0,function*(){const t=e.offsetHeight,i=e.offsetTop,s=e.offsetLeft;const r=e.offsetWidth/this.switcher.offsetWidth;return new Promise(e=>{requestAnimationFrame(()=>{o.style.transition=\"all .4s ease\",requestAnimationFrame(()=>{o.style.zIndex=\"3\",o.style.height=t/r+\"px\",o.style.transform=`translate3d(${s}px, ${i}px, 0px) scale(${r})`,setTimeout(e,600)})})})})}getActiveApplet(){var e=this.application.activityApplet;return null!=e&&e.slide?this.application.applets[e.slide.activeId]:e}blurBackgroundImage(){this.relativeViewport.style.filter=\"blur(20px)\",this.absoluteViewport.style.filter=\"blur(20px)\"}focusBackgroundImage(){this.relativeViewport.style.filter=\"none\",this.absoluteViewport.style.filter=\"none\"}delayDynamicImport(){import(\"./index-06261d37.js\").catch(e=>{console.warn(e)})}}export{AppSwitcher};"],"names":[],"sourceRoot":""}