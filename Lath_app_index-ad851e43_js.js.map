{"version":3,"file":"Lath_app_index-ad851e43_js.js","mappings":";;;;;;;;;;;;;;;AAAgJ;AAChJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,kBAAkB,eAAe,qBAAqB,IAAI,sDAAsD,SAAS,kHAAkH,aAAa,aAAa,uGAAuG,mFAAmF,OAAO,OAAO,qDAAS,gCAAgC,kKAAkK,qDAAU,MAAM,oDAAoD,OAAO,EAAE,QAAQ,oHAAoH,qDAAU,MAAM,mJAAmJ,OAAO,oBAAoB,OAAO,qDAAS,gCAAgC,mRAAmR,iDAAc,mBAAmB,wDAAwD,kBAAkB,mCAAmC;AACl/C,kCAAkC,gBAAgB;AAClD;AACA;AACA,YAAY;AACZ,wBAAwB;AACxB,YAAY;AACZ;AACA,YAAY;AACZ,wBAAwB;AACxB;AACA;AACA;AACA,kCAAkC,cAAc;AAChD,yBAAyB,mYAAmY,sGAAsG,qDAAU,MAAM,wQAAwQ,MAAM,EAAE,qBAAqB,gCAAgC,mFAAmF,EAAE,mBAAmB,OAAO,qDAAS,gCAAgC,qDAAqD,sCAAsC,qDAAqB,MAAM,uFAAuF,EAAE,YAAY,gBAAgB,EAAE,EAAE,uBAAuB,OAAO,qDAAS,gCAAgC,oBAAoB,wDAAwD,wBAAwB;AACz4C,QAAQ;AACR;AACA,oBAAoB;AACpB,uBAAuB,KAAK;AAC5B;AACA,yGAAyG,4HAA4H,EAAE,EAAE,qBAAqB,OAAO,qDAAS,gCAAgC,0GAA0G;AACxZ,QAAQ;AACR;AACA,gBAAgB,IAAI;AACpB,oBAAoB;AACpB,uBAAuB,KAAK;AAC5B,+BAA+B,EAAE,MAAM,EAAE,iBAAiB,EAAE;AAC5D;AACA,8DAA8D,mBAAmB,4CAA4C,mBAAmB,qDAAU,MAAM,kCAAkC,gBAAgB,GAAG,EAAE,iBAAiB,OAAO,qDAAS,gCAAgC,uBAAuB,qDAAqB,MAAM,wYAAwY,qDAAU,SAAS,EAAE,EAAE,EAAE,kBAAkB,OAAO,qDAAS,gCAAgC,oDAAoD,gDAAgD,uBAAuB,qDAAqB,MAAM,uFAAuF,EAAE,MAAM,EAAE,iBAAiB,EAAE,GAAG,qDAAU,SAAS,EAAE,EAAE,EAAE,kBAAkB,sCAAsC,qEAAqE,sBAAsB,gGAAgG,uBAAuB,oFAAoF,qBAAqB,qRAA6B,WAAW,gBAAgB","sources":["webpack://lath-docs/../Lath/app/index-ad851e43.js"],"sourcesContent":["import{_ as __awaiter}from\"./index-1e19cddc.js\";import{s as setTimeout,S as SmoothScroller,r as requestAnimationFrame}from\"./index-1444ef15.js\";const switcherStyle=`\n  box-sizing: border-box;\n  position: fixed;\n  inset: 0;\n  z-index: 102;\n  width: 100%;\n  height: 100%;\n  padding-top: constant(safe-area-inset-top);\n  padding-top: env(safe-area-inset-top);\n  background: rgb(70 70 70 / 50%);\n  opacity: 0;\n  transform: translate3d(0, 0, 0);\n  backface-visibility: hidden;\n  transition: opacity .4s ease;\n`,snapWrapperStyle=`\n  display: grid;\n  box-sizing: border-box;\n  position: fixed;\n  inset: 0;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  padding: 10px;\n  overflow-y: scroll !important;\n  scroll-padding: 12px;\n  scroll-behavior: smooth;\n  scroll-snap-type: y mandatory;\n  transform: translate3d(0, 0, 0);\n  backface-visibility: hidden;\n`,snapWrapper2Style=`\n  ${snapWrapperStyle}\n  grid-template-columns: 50% 50%;\n  grid-template-rows: repeat(2, 40%);\n  row-gap: 15px;\n`,snapWrapper3Style=`\n  ${snapWrapperStyle}\n  grid-template-columns: repeat(3, 33.33%);\n  grid-template-rows: repeat(2, 50%);\n  row-gap: 15px;\n`,itemImgWrapperStyle=`\n  display: block;\n  width: 100%;\n  height: 100%;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 3px 10px rgb(0 0 0 / 30%);\n`,itemViewStyle=`\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  scroll-snap-align: start;\n  cursor: pointer;\n  margin: 0 10px;\n`,itemImgStyle=`\n  display: block;\n  width: 100%;\n  height: 100%;\n  border-radius: 16px;\n  transform-origin: top left;\n  transform: translate3d(0, 0, 0);\n  backface-visibility: hidden;\n  overflow: hidden;\n`,itemImgCoverStyle=`\n  position: fixed;\n  top: 0;\n  left: 0;\n  ${itemImgStyle}\n`,itemInfoStyle=`\n  display: flex;\n  margin: 0 auto;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n`,itemTitleStyle=`\n  margin-top: 4px;\n  font-size: 16px;\n  color: #fff;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-family: \"SF Pro Text\",\"Myriad Set Pro\",\"SF Pro Icons\",\"Apple Legacy Chevron\",\"Helvetica\",\"Arial\",sans-serif;\n`;class AppSwitcher{constructor(e){this.progressName=\"\";var{relativeViewport:t,absoluteViewport:i,fixedViewport:s}=e.segue;this.relativeViewport=t,this.absoluteViewport=i,this.fixedViewport=s,this.application=e,this.delayDynamicImport()}bindResize(){const e=()=>{this.close(),window.removeEventListener(\"resize\",e),window.removeEventListener(\"orientationchange\",e)};window.addEventListener(\"resize\",e),window.addEventListener(\"orientationchange\",e)}open(){return __awaiter(this,void 0,void 0,function*(){\"open\"!==this.progressName&&(this.progressName=\"open\",yield this.createAppSwitcher(),this.blurBackgroundImage(),this.switcher.style.opacity=\"1\",this.bindResize(),setTimeout(()=>{\"close\"!==this.progressName&&(this.progressName=\"\")},400))})}close(){\"close\"!==this.progressName&&(this.progressName=\"close\",this.focusBackgroundImage(),this.switcher.style.opacity=\"0\",setTimeout(()=>{\"open\"!==this.progressName&&(this.progressName=\"\",this.switcher.parentElement===this.fixedViewport&&this.fixedViewport.removeChild(this.switcher))},400))}createAppSwitcher(){return __awaiter(this,void 0,void 0,function*(){this.switcher=document.createElement(\"applet-switcher\"),this.switcher.style.cssText=switcherStyle,this.snapWrapper=document.createElement(\"applet-switcher-snap\"),this.snapWrapper.style.cssText=800<this.switcher.offsetWidth?snapWrapper3Style:snapWrapper2Style,this.scroll=new SmoothScroller(this.snapWrapper);var e=this.application.applets,t=this.getActiveApplet();for(const d in e){var i,s,r,o,a,n,p,l=e[d],c=l.color;\"applet\"!==l.rel||l.isModality||l.view&&(i=document.createElement(\"applet-switcher-item\"),s=document.createElement(\"div\"),r=document.createElement(\"div\"),o=document.createElement(\"div\"),a=document.createElement(\"div\"),n=document.createElement(\"div\"),i.style.cssText=itemViewStyle,p=l.config.poster?`\n          background-image: url(${l.config.poster});\n          background-size: cover;\n        `:\"\",s.style.cssText=`\n          ${itemImgWrapperStyle}\n          background: ${c};\n          ${p}\n        `,r.style.cssText=`\n          ${itemImgStyle}\n          background: ${c};\n        `,a.style.cssText=itemInfoStyle,o.style.cssText=l.config.icon?`\n          width: 16px;\n          height: 16px;\n          background-image: url(${l.config.icon});\n        `:\"display: none;\",n.style.cssText=itemTitleStyle,n.innerText=l.config.title||l.id,a.appendChild(o),a.appendChild(n),s.appendChild(r),i.appendChild(s),i.appendChild(a),this.snapWrapper.appendChild(i),this.switcher.appendChild(this.snapWrapper),this.fixedViewport.appendChild(this.switcher),l.id===(null==t?void 0:t.id)?yield this.setActivityItem(l,s,r):this.setNormalItem(l,r),this.bindItemClick(l,s,r))}this.snapWrapper.style.transform=\"translate3d(0, 0, 0) scale(.9)\",this.snapWrapper.style.opacity=\".5\",setTimeout(()=>{\"close\"!==this.progressName&&(this.snapWrapper.style.transition=\"transform .44s cubic-bezier(0.52, 0.16, 0.24, 1), opacity .36s cubic-bezier(0.52, 0.16, 0.24, 1)\",this.snapWrapper.style.transform=\"translate3d(0, 0, 0) scale(1)\",this.snapWrapper.style.opacity=\"1\")},100)})}bindItemClick(e,t,i){i.addEventListener(\"click\",()=>{\"close\"!==this.progressName&&(this.progressName=\"close\",this.restoreToItem(e,t,i))})}setNormalItem(e,t){return __awaiter(this,void 0,void 0,function*(){e.captureShot(Date.now()-e.visitTime<=12e4).then(e=>{t.appendChild(e),e.style.opacity=\".1\",requestAnimationFrame(()=>{e.style.transition=\"opacity .2s cubic-bezier(0.52, 0.16, 0.24, 1)\",e.style.opacity=\"1\"})}).catch(e=>{console.warn(e)})})}setActivityItem(r,o,a){return __awaiter(this,void 0,void 0,function*(){const e=o.offsetTop;var t=r.color,i=o.offsetWidth/this.switcher.offsetWidth;const s=a.style.cssText;a.style.cssText=`\n      ${itemImgCoverStyle}\n      z-index: 3;\n      background: ${t};\n      border-radius: ${16/i}px;\n      transition: transform .36s cubic-bezier(0.32, 0.08, 0.24, 1), height .56s cubic-bezier(0.52, 0.16, 0.24, 1), border-radius .2s cubic-bezier(0.52, 0.16, 0.24, 1);\n    `,this.switcher.appendChild(a),a.appendChild(yield r.captureShot()),this.shrinkToItem(o,a).then(()=>{\"close\"!==this.progressName&&(a.style.cssText=s,o.appendChild(a),this.snapWrapper.offsetHeight<=e&&this.scroll.snapTo(0,e))})})}restoreToItem(a,n,p){return __awaiter(this,void 0,void 0,function*(){var e=n.offsetTop,t=n.offsetLeft,i=n.offsetWidth,s=n.offsetHeight,i=i/this.switcher.offsetWidth,r=a.color;if(this.switcher.appendChild(p),p.style.cssText=`\n      ${itemImgCoverStyle}\n      z-index: 5;\n      height: ${s/i}px;\n      background: ${r};\n      border-radius: ${16/i}px;\n      transform: translate3d(${t}px, ${e}px, 0px) scale(${i});\n      transition: transform .36s cubic-bezier(0.32, 0.08, 0.24, 1), height .2s cubic-bezier(0.52, 0.16, 0.24, 1), border-radius .6s cubic-bezier(0.52, 0.16, 0.24, 1);\n    `,yield this.stretchToItem(p),\"open\"!==this.progressName){const o=Date.now();this.application.to(a.id,a.param).then(()=>{var e=Date.now()-o;setTimeout(()=>{this.progressName=\"\",this.close()},200<e?0:400-e)})}})}stretchToItem(t){return __awaiter(this,void 0,void 0,function*(){return new Promise(e=>{requestAnimationFrame(()=>{\"open\"!==this.progressName&&(t.style.height=this.switcher.offsetHeight+\"px\",t.style.transform=\"translate3d(0px, 0px, 0px) scale(1)\",t.style.borderRadius=\"0\",this.snapWrapper.style.transition=\"transform .44s cubic-bezier(0.52, 0.16, 0.24, 1), opacity .2s cubic-bezier(0.52, 0.16, 0.24, 1)\",this.snapWrapper.style.transform=\"translate3d(0, 0, 0) scale(.9)\",this.snapWrapper.style.opacity=\"0.5\",setTimeout(e,200))})})})}shrinkToItem(e,o){return __awaiter(this,void 0,void 0,function*(){const t=e.offsetHeight,i=e.offsetTop,s=e.offsetLeft;const r=e.offsetWidth/this.switcher.offsetWidth;return new Promise(e=>{requestAnimationFrame(()=>{\"close\"!==this.progressName&&(o.style.height=t/r+\"px\",o.style.transform=`translate3d(${s}px, ${i}px, 0px) scale(${r})`,setTimeout(e,600))})})})}getActiveApplet(){var e=this.application.activityApplet;return null!=e&&e.slide?this.application.applets[e.slide.activeId]:e}blurBackgroundImage(){this.relativeViewport.style.filter=\"blur(20px)\",this.absoluteViewport.style.filter=\"blur(20px)\"}focusBackgroundImage(){this.relativeViewport.style.filter=\"none\",this.absoluteViewport.style.filter=\"none\"}delayDynamicImport(){import(\"./index-4d669d7b.js\").catch(e=>{console.warn(e)})}}export{AppSwitcher};"],"names":[],"sourceRoot":""}