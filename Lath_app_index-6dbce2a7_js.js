"use strict";
(self["webpackChunklath_docs"] = self["webpackChunklath_docs"] || []).push([["Lath_app_index-6dbce2a7_js"],{

/***/ "../Lath/app/index-6dbce2a7.js":
/*!*************************************!*\
  !*** ../Lath/app/index-6dbce2a7.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "E": () => (/* binding */ EventProvider),
/* harmony export */   "S": () => (/* binding */ SmoothScroller),
/* harmony export */   "i": () => (/* binding */ index),
/* harmony export */   "r": () => (/* binding */ requestAnimationFrame),
/* harmony export */   "s": () => (/* binding */ setTimeout)
/* harmony export */ });
/* harmony import */ var _index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-18a99eb3.js */ "../Lath/app/index-18a99eb3.js");
function testHasSmoothSnapScrolling(){return!(!("scrollSnapAlign"in document.documentElement.style||"webkitScrollSnapAlign"in document.documentElement.style||"msScrollSnapAlign"in document.documentElement.style)||!(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.a)())}function testHasSlotBug(){var t=(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.i)();return!!(t&&t[0]<=13)}var setTimeout,setInterval,requestIdleCallback,requestAnimationFrame,index$1,windowOpen,tapHighlight,cssVar,inject,provider,index;const EventGroupSymbol=Symbol("__EventGroupName__");class EventProvider{constructor(){this._events={}}on(t,e,i){return Object.defineProperty(e,EventGroupSymbol,{value:i,writable:!0}),this._events[t]||(this._events[t]=[]),null!=(i=this._events[t])&&i.push(e),this}one(e,i,t){const s=(...t)=>{i(...t),this.off(e,s)};return Object.defineProperty(s,EventGroupSymbol,{value:t,writable:!0}),this._events[e]||(this._events[e]=[]),null!=(t=this._events[e])&&t.push(s),this}off(t,e){var i;return!this._events[t]||-1<(e=null!=(i=null==(i=this._events[t])?void 0:i.indexOf(e))?i:-1)&&null!=(i=this._events[t])&&i.splice(e,1),this}removeEventGroup(e){var t=t=>{return null==(t=this._events[t])?void 0:t.filter(t=>t[EventGroupSymbol]!==e)};for(const i in this._events)this._events[i]=t(i);return this}trigger(i,...t){var e;return this._events[i]&&null!=(e=this._events[i])&&e.forEach(e=>{try{e(...t)}catch(t){this.off(i,e),this.trigger("error",t)}}),this}}class AppletBase extends EventProvider{constructor(t,e,i){super(),this.param="",this.slide=null,this.modality=null,this.view=null,this.img=null,this.snapshot=null,this.snapshotTime=-1,this.visitTime=-1,this.events={transformStart:()=>{},transformEnd:()=>{},boot:()=>{},load:()=>{},loadError:()=>{},preload:()=>{},destroy:()=>{}},this.darkTask=[],this.createTime=Date.now(),this.transient=!1,this.config={title:"",level:0,source:{},prerender:[],apply:["smart-setTimeout","smart-setInterval","link-new-viewport","tap-highlight"],background:"auto",free:!1},this.components=[],this.resources={script:[],image:[],worker:[],video:[],audio:[],font:[],style:[]},this.id=t,this.model=e,this.application=i;var{config:i,resources:e,events:t,components:s}=this.setDefaultConfig(e,t);Object.assign(this.config,i),Object.assign(this.resources,e),Object.assign(this.events,t),s&&(this.components=s)}get self(){return this.application.applets[this.id]||this}setBaseCss(){var t=document.createElement("style");t.innerHTML=`
      body::-webkit-scrollbar {
        display: none;
      }
      body::scrollbar {
        display: none;
      }
    `,document.getElementsByTagName("head")[0].appendChild(t)}setDefaultConfig(t,e){var i=t.config;if("frameworks"!==e&&"system"!==e||(i.free&&(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.t)(1101,"warn"),(null!=(e=i.source)&&e.html||null!=(e=i.source)&&e.src)&&(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.t)(1102,"warn")),!i.portal||i.free||(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.t)(1103,"warn"),void 0===i.level&&(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.t)(1104,"warn"),1e4<(null!=(e=i.level)?e:0)&&(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.t)(1105,"warn"),null!=(e=null==i?void 0:i.unApply)&&e.length){const s=i.unApply;this.config.apply=null==(e=this.config.apply)?void 0:e.filter(t=>!s.includes(t))}return 0===(null==(e=i.modality)?void 0:e.indexOf("sheets:"))&&(i.animation&&(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.t)(1106,"warn"),i.animation="sheets-bottom"),t}}class AppletState extends AppletBase{constructor(){super(...arguments),this.visibility=!1,this.transforming=!1,this.status={preload:!1,prefetch:!1,prerender:!1,refreshing:!1,requestRefresh:!1,presetElements:!1}}resume(){this.status={preload:!1,prefetch:!1,prerender:!1,refreshing:!1,requestRefresh:!1,presetElements:!1},this.darkTask=[],this.view=null,this.img=null}get swipeModel(){var t;return!!(null!=(t=this.application.config.swipeModel)?t:"ontouchend"in document)}get sameOrigin(){return this.uri?new URL(this.uri,window.location.toString()).host===location.host:void 0===this.config.sandbox||!!this.config.sandbox.includes("allow-same-origin")}get level(){var t;return null!=(t=this.config.level)?t:0}get viewIndex(){var t;return null!=(t=this.level)?t:(null!=(t=null==(t=this.application.prevActivityApplet)?void 0:t.level)?t:0)+1}get rel(){return"system"===this.id?"system":"frameworks"===this.id?"frameworks":"applet"}get uri(){var t;return(null==(t=null==(t=this.config)?void 0:t.source)?void 0:t.src)||""}get source(){var t=(null==(t=null==(t=this.config)?void 0:t.source)?void 0:t.html)||"";return"string"==typeof t?t:t()}get hasSource(){var t;return!!(this.uri||null!=(t=null==(t=this.config)?void 0:t.source)&&t.html)}get noSource(){return!this.hasSource&&!this.config.render}get viewType(){var t;return"applet"===this.rel&&this.hasSource?null!=(t=this.config)&&t.portal&&this.sameOrigin?"portal":"iframe":"shadow"}get color(){var t,e;return"applet"!==this.rel?"transparent":(e=(t=this.application).properties.darkTheme,e=""+(this.config.color||(e?"#000":"#fff")),"frameworks"!==this.id&&"inherit"==e&&t.applets.frameworks.config.color||e)}get expired(){var t;return!!this.view&&((null==(t=this.application.prevActivityApplet)||!t.config.modality)&&!!(this.status.requestRefresh||Date.now()-this.createTime>=(null!=(t=this.config.timeout)?t:6e7)))}get isModality(){return!!this.config.modality}get isFullscreen(){return!this.isModality}get useControls(){return this.swipeModel&&"applet"===this.rel&&this.isFullscreen}get noShadowDom(){return"shadow"===this.viewType&&!!this.config.noShadowDom}get mirroringString(){try{return localStorage.getItem("__MODULE_IMG__"+this.id)||""}catch(t){return""}}get contentWindow(){var t;return null!=(t=null==(t=null==(t=this.sandbox)?void 0:t.window)?void 0:t.window)?t:window}get contentDocument(){var t;if(this.sameOrigin)return"shadow"===this.viewType?this.viewport:null==(t=this.sandbox)?void 0:t.document}get mirroringHTML(){if("shadow"===this.viewType)return null!=(t=null==(t=this.view)?void 0:t.outerHTML)?t:"";if(!this.sameOrigin)return"";var t=null==(t=this.sandbox)?void 0:t.sandbox;const i=["script","template"];try{var e=t.contentDocument;if(!e)return"";var s=e.querySelectorAll("*");const o=[];return s.forEach(t=>{var e=t.tagName;i.includes(e)||(-1!==e.indexOf("-")&&(t.style.visibility="hidden"),o.push(t.outerHTML))}),o.join("\n")}catch(t){return""}}saveMirroring(){if(!this.config.useMirroring||!this.sameOrigin)return Promise.resolve(!1);var e="__MODULE_IMG__"+this.id,i=null!=(i=this.mirroringHTML)?i:"";try{return localStorage.setItem(e,i),Promise.resolve(!0)}catch(t){return localStorage.clear(),localStorage.setItem(e,i),Promise.resolve(!1)}}setActionOrigin(t){t&&(this.actionOriginMap=t)}getActionOrigin(){return this.actionOriginMap}injectWindowVisibilityState(t){var e;this.sameOrigin&&(e=this.contentWindow)&&(e.appletVisibilityState=t)}triggerWindow(t){var e;null!=(e=this.contentWindow)&&e.postMessage({type:t,appletId:this.id,historyDirection:this.application.segue.historyDirection},"*")}}setTimeout=window.setBackgroundTimeout||window.setTimeout,setInterval=window.setBackgroundInterval||window.setInterval,requestIdleCallback=window.requestIdleCallback||((t,e)=>{const i=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-i))}})},Math.min(null!=(e=null==e?void 0:e.timeout)?e:1,1))}),requestAnimationFrame=window.requestAnimationFrame||setTimeout;class AppletLifeCycle extends AppletState{attach(t,e,i){t&&(this.viewport=t,this.parentApplet=e,this.mountBehavior=i)}removeContainer(){var t;null!=(t=null==(t=this.contentView)?void 0:t.parentElement)&&t.removeChild(this.contentView),null!=(t=null==(t=this.viewport)?void 0:t.parentNode)&&t.removeChild(this.viewport),this.viewport=void 0,this.delPresetView()}clearContainer(){var t;null!=(t=null==(t=this.contentView)?void 0:t.parentElement)&&t.removeChild(this.contentView),this.viewport&&(this.viewport.innerHTML=""),this.delPresetView()}delPresetView(){this.contentView=void 0,this.application.delPresetAppletsView(this.id)}setParam(t){return this.param!==t?(this.param=t,this.destroy(!0)):Promise.resolve(!0)}show(){var t,e=this.viewType;if("portal"===e)null!=(t=this.view)&&t.activate();else{for(const i of this.darkTask)i();this.transforming=!1,this.darkTask=[],this.visibility=!0,this.visitTime=Date.now(),this.trigger("show"),"iframe"===e&&(this.triggerWindow("applet-show"),this.injectWindowVisibilityState("visible"))}}hide(){this.transforming=!1,this.visibility=!1,this.trigger("hide"),"iframe"===this.viewType&&(this.triggerWindow("applet-hidden"),this.injectWindowVisibilityState("hidden"))}willShow(){this.transforming=!0,this.trigger("willShow"),"iframe"===this.viewType&&(this.triggerWindow("applet-will-show"),this.injectWindowVisibilityState("willVisible"))}willHide(){this.transforming=!0,this.trigger("willHide"),"iframe"===this.viewType&&(this.triggerWindow("applet-will-hide"),this.injectWindowVisibilityState("willHidden"))}willSegueShow(){this.trigger("willSegueShow")}willSegueHide(){this.trigger("willSegueHide")}destroy(i=!1){return new Promise(t=>{var e;return this.view?!0===this.status.presetElements||"frameworks"===this.rel||"system"===this.rel||(null==(e=this.application.segue)?void 0:e.id)===this.id&&!1===i?t(!1):("iframe"===this.viewType&&this.unload(),!1===i?this.removeContainer():this.clearContainer(),this.resume(),null!=(e=this.events)&&e.destroy(this.self),this.application.removeEventGroup(this.id),this.trigger("destroy"),void t(!0)):t(!0)})}observer(e){var t,i=this.sandbox?null==(i=this.sandbox.document)?void 0:i.documentElement:this.view;if(i)return(t=new MutationObserver(t=>{e(t)})).observe(i,{subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),t}collectAllElements(t){function s(e){for(let t=0;t<e.length;t++){var i=e[t];o.push(i),i.shadowRoot&&s(i.shadowRoot.querySelectorAll("*"))}}const o=[];return t.shadowRoot&&s(t.shadowRoot.querySelectorAll("*")),s(t.querySelectorAll("*")),o}autoMediaController(r){return new Promise((t,e)=>{try{if("iframe"!==this.viewType)return t();if(void 0===this.sandbox)return t();var i=r.filter(t=>"video"===t.tagName||"audio"===t.tagName);for(const s in i){const o=i[s];null!==o&&void 0!==o&&o.paused||(o.pause(),this.darkTask.push(()=>{o.play()}))}}catch(t){e()}})}destructiveTags(t){const e=["object","embed","applet","iframe"];return!!t.filter(t=>e.includes(t.tagName)).length}guarding(){return new Promise(e=>{var t;if("applet"!==this.rel)return e(!0);if(!0===this.config.background)return e(!0);if(!1===this.config.background)return e(!1);if("iframe"!==this.viewType)return e(!0);if(void 0===this.sandbox)return e(!0);if(!1===this.sameOrigin)return e(!1);var i=this.view;try{var s=null==(t=i.contentDocument)?void 0:t.documentElement;if(!s)return e(!0);var o=this.collectAllElements(s);if(!1!==this.config.mediaGuard&&this.autoMediaController(o).catch(e),this.destructiveTags(o))return e(!1);const n={times:0};var r=this.observer(()=>{n.times++,1e3<n.times&&(e(!1),this.mutationObserver.disconnect())});r&&(this.mutationObserver=r,setTimeout(()=>{10<n.times&&e(!1)},3e3))}catch(t){e(!0)}})}cancelGuard(){var t;null!=(t=this.mutationObserver)&&t.disconnect()}unload(r){var t;return void 0===r&&(r=null==(t=this.sandbox)?void 0:t.sandbox),new Promise(t=>{var e,i;if(this.cancelGuard(),!r)return t();r===(null==(i=this.sandbox)?void 0:i.sandbox)&&this.saveMirroring();try{r.contentWindow&&(r.contentWindow.onunload=null),r.style.display="none",r.src="about:blank";var s=null==(e=r.contentWindow)?void 0:e.window,o=r.contentDocument;null!=s&&s.location.reload(),null!=o&&o.open(),null!=o&&o.write(""),null!=o&&o.close()}catch(t){}null!=(i=r.parentNode)&&i.removeChild(r),t()})}}class Sandbox{constructor(t,e){var i=this.sandbox=document.createElement("iframe");return i.src=t||"about:blank",i.style.display="none",void 0!==e&&this.set(e),this}get window(){return this.sandbox.contentWindow}get document(){return this.sandbox.contentDocument}set src(t){this.sandbox.src=t}set onunload(t){this.window.onunload=t}set onload(t){this.sandbox.onload=t}set onerror(t){this.sandbox.onerror=t}set(t){this.sandbox.setAttribute("sandbox",t)}reset(t){return this.exit(),this.set(t),this}open(){var t;return null!=(t=this.document)&&t.open(),this}write(t='<head><meta charset="utf-8"></head>'){var e;return t="<!DOCTYPE html>"+t,null!=(e=this.document)&&e.write(t),this}close(){var t;return null!=(t=this.document)&&t.close(),this}append(t,e){this.enter(e),this.open(),this.write(t),this.close()}enter(t){t.appendChild(this.sandbox)}exit(){var t=this.sandbox.parentNode;t&&t.removeChild(this.sandbox)}}class AppletPrefetch extends AppletLifeCycle{dependenciesLoad(o,r){return new Promise((e,i)=>{var t=document.head;const s=new Sandbox(o,"");s.onload=t=>{s.exit(),e(t)},s.onerror=t=>{s.exit(),i(t)},o?s.enter(t):r?s.append(r,t):i()})}preload(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.dependenciesLoad(this.uri,yield this.source).then(()=>{var t;this.status.preload=!0,null!=(t=this.events)&&t.preload(this.self),this.trigger("preload")})})}prefetch(){return new Promise((t,e)=>{Promise.all([this.prefetchStatic(this.resources.script,"script"),this.prefetchStatic(this.resources.image,"image"),this.prefetchStatic(this.resources.worker,"worker"),this.prefetchStatic(this.resources.video,"video"),this.prefetchStatic(this.resources.audio,"audio"),this.prefetchStatic(this.resources.font,"font"),this.prefetchStatic(this.resources.style,"style"),this.prefetchStatic(this.resources.html,"document")]).then(()=>{this.status.prefetch=!0,this.trigger("prefetch"),t(!0)}).catch(e)})}prefetchStatic(i=[],s="script"){return new Promise((t,e)=>{Promise.all([].concat(i).map(t=>this.prelink(t,"preload",s))).then(t).catch(e)})}prelink(o,r="preload",n="worker | video | audio | font | script | style | image | document"){return o?new Promise((i,s)=>{requestIdleCallback(()=>{var t,e=document.createElement("link");if(e.rel=r,e.href=o,e.as=n,e.onload=i,e.onerror=s,"preload"===r&&"document"===n&&this.dependenciesLoad(o),null==(t=e.relList)||!t.supports(r))return i(void 0);document.getElementsByTagName("head")[0].appendChild(e),i(void 0)},{timeout:15e3})}):Promise.resolve(void 0)}prerender(){return this.status.preload||this.status.prerender?Promise.resolve():new Promise((t,e)=>{this.preload().then(t).catch(e),this.prefetch(),this.prelink(this.uri,"prerender","document")})}}class AppletEventTarget extends AppletPrefetch{constructor(){super(...arguments),this.borderHolder=[],this.getTouchBorderType=t=>{var e=this.viewport,i=e.offsetWidth,e=e.offsetHeight,t=t.touches[0],s=t.clientX,t=t.clientY,o=[],r=null!=(r=this.config.borderTouchSize)?r:100;return s<=r?o.push("left"):i-r<=s&&o.push("right"),t<=r?o.push("top"):e-r<=t&&o.push("bottom"),o}}attachEvent(){this.registerBorderTouch(),this.bindOverscrollHistoryNavigation(),this.registerTapStatusBarToScrollToTop(),this.registerPullToRefresh()}scrollToTop(){const e=this.getMainScroller();e&&Promise.resolve().then(function(){return index$1}).then(({SmoothScroller:t})=>{new t(e).scrollTo(0,0)}).catch(t=>{console.warn(t)})}registerPullToRefresh(){if(this.config.pullToRefresh)if(this.application.pullRefreshHolder.holder){const e=this.application.pullRefreshHolder.holder,i=this.application.pullRefreshHolder.spinner,s=this.application.pullRefreshHolder.holdLayer,o=this.getMainScroller(this.config.pullToRefreshTargetScrollId);o&&__webpack_require__.e(/*! import() */ "Lath_app_index-248f9a1d_js").then(__webpack_require__.bind(__webpack_require__, /*! ./index-248f9a1d.js */ "../Lath/app/index-248f9a1d.js")).then(t=>{t.registerPullDownEvent(this.self,o,e,i,s)}).catch(t=>{console.warn(t)})}else this.application.on("pullToRefreshAvailable",()=>{this.registerPullToRefresh()})}registerTapStatusBarToScrollToTop(){this.config.tapStatusBarToScrollToTop&&this.borderHolder[0].addEventListener("touchend",()=>{this.scrollToTop()})}getMainScroller(t=this.config.mainScrollId){var e;let i;return"shadow"===this.viewType?i=t?(null==(e=null==(e=this.view)?void 0:e.shadowRoot)?void 0:e.getElementById(t))||document.getElementById(t):this.contentView:this.sameOrigin&&(e=null==(e=this.sandbox)?void 0:e.window,i=t?null==e?void 0:e.document.getElementById(t):null==e?void 0:e.document.body),i}bindOverscrollHistoryNavigation(){this.on("touchBorder",(t,e)=>{"touchmove"===e.type&&(t.includes("left")||t.includes("right")||t.includes("wipe"))&&(this.application.overscrollHistoryNavigation.moment=Date.now(),this.application.overscrollHistoryNavigation.type=t.join(" "))})}addBorderPanMoveHolder(t){var e=null!=(e=this.config.borderTouchSize)?e:15,i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div"),l="position: absolute; z-index: 3;";return i.style.cssText=l+` top: 0; right: 0; left: 0; height: env(safe-area-inset-top); mini-height: ${e}px;`,s.style.cssText=l+` top: 0; right: 0; bottom: 0; z-index: 3; width: ${e}px;`,o.style.cssText=l+` right: 0; bottom: 0; left: 0; z-index: 3; height: ${e}px;`,r.style.cssText=l+` top: 0; bottom: 0; left: 0; z-index: 3; width: ${e}px;`,n.style.cssText=`display: none; ${l} top: 0; right: 0; bottom: 0; left: 0; z-index: 4;`,t.appendChild(i),t.appendChild(s),t.appendChild(o),t.appendChild(r),t.appendChild(n),this.borderHolder=[i,s,o,r,n]}registerBorderHolderTouch(){const[e,i,s,o,r]=this.addBorderPanMoveHolder(this.viewport),n=[],l=r.addEventListener,t=r.removeEventListener,a=t=>{this.trigger("touchBorder",n,t)},h=t=>{n.length=0,t.target===e?n.push("top"):t.target===i?n.push("right"):t.target===s?n.push("bottom"):t.target===o&&n.push("left"),r.style.display="block",l("touchmove",a),l("touchend",a),l("touchcancel",a)},c=()=>{r.style.display="none",t("touchmove",a),t("touchend",a),t("touchcancel",a)};var p=t=>{t=t.addEventListener;t("touchstart",h),t("touchmove",h),t("touchcancel",c),t("touchend",c)};p(e),p(i),p(s),p(o)}registerBorderTouch(){var t;if(this.sandbox&&!this.sameOrigin)return this.registerBorderHolderTouch();const e=(null==(t=null==(t=this.sandbox)?void 0:t.window)?void 0:t.document)||this.viewport,i=[],s=t=>{this.trigger("touchBorder",i,t),"touchend"!==t.type&&"touchcancel"!==t.type||(e.removeEventListener("touchmove",s),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",s))};e.addEventListener("touchstart",t=>{i.length=0,i.push(...this.getTouchBorderType(t)),this.transforming&&i.push("wipe"),0<i.length&&(e.addEventListener("touchmove",s),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s))},!1)}}const SCROLL_TIME=400,now=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,easeInOutCubic=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,hasSmoothScrolling=(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.a)(),hasSmoothSnapScrolling=testHasSmoothSnapScrolling();class SmoothScroller{constructor(t,e=!1){this.touchHold=!1,this.scrollType="scroll",this.scrollHold=null,this.scrolling=!1,this.reservePlanId=-1,this.checkScrollEnd=(t,e)=>this.element.scrollLeft===t&&this.element.scrollTop===e,this.element=t,!hasSmoothScrolling&&e&&(t.addEventListener("touchstart",this.scrollStop,!0),t.addEventListener("touchend",this.scrollContinue,!0),t.addEventListener("touchcancel",this.scrollContinue,!0))}snapTo(t,e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.touchHold=!1,this.scrollType="snap",this.smoothScroll(t,e)})}scrollTo(t,e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.touchHold=!1,this.scrollType="scroll",this.smoothScroll(t,e)})}scrollStop(){this.touchHold=!0}scrollContinue(){var t;this.touchHold=!1,null!=(t=this.scrollHold)&&t.call(this)}catchDefaultStyle(){var t;!0!==this.scrolling&&(t=this.element.style,this.defaultScrollBehavior=t.scrollBehavior||"smooth")}isBreak(){return void 0!==this.preStep&&(this.preStep[0]!==this.element.scrollLeft||this.preStep[1]!==this.element.scrollTop)}step(t){if(this.touchHold){if("scroll"===this.scrollType)return t.end();this.scrollHold=()=>{this.step(t)}}var e=now(),e=Math.min((e-t.startTime)/SCROLL_TIME,1),e=easeInOutCubic(e);let i=t.startX+(t.x-t.startX)*e,s=t.startY+(t.y-t.startY)*e;var e=0<t.x-t.startX?1:-1,o=0<t.y-t.startY?1:-1;(1==e&&i>t.x||-1==e&&i<t.x)&&(i=t.x),(1==o&&s>t.y||-1==o&&s<t.y)&&(s=t.y),this.isBreak()||(this.element.scrollLeft=i,this.element.scrollTop=s,this.element.scrollTo(i,s),this.preStep=[this.element.scrollLeft,this.element.scrollTop],i!==t.x||s!==t.y?requestAnimationFrame(()=>{this.step(t)}):(t.end(),this.scrollHold=null))}openSmooth(){this.element.style.scrollBehavior="smooth"}closeSmooth(){this.element.style.scrollBehavior="auto"}scrollStart(){this.catchDefaultStyle(),this.preStep=void 0,this.scrolling=!0}scrollEnd(){this.element.style.scrollBehavior=this.defaultScrollBehavior||"smooth",this.scrolling=!1}smoothScroll(i,s){if("scroll"===this.scrollType&&!hasSmoothScrolling||"snap"===this.scrollType&&!hasSmoothSnapScrolling)return this.smoothScrollByStep(i,s);let o=-1;return new Promise(t=>{const e=()=>{clearTimeout(o),o=setTimeout(()=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){this.element.removeEventListener("scroll",e,!1),t()}),100)};this.element.addEventListener("scroll",e,!1),this.scrollStart(),this.openSmooth(),this.checkScrollEnd(i,s)&&(this.scrollEnd(),t()),this.element.scrollTo(i,s),clearTimeout(this.reservePlanId),this.reservePlanId=setTimeout(()=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){-1===o&&(yield this.smoothScrollByStep(i,s),t())}),600)})}smoothScrollByStep(e,i){return this.scrollStart(),this.closeSmooth(),new Promise(t=>{this.step({startTime:now(),startX:this.element.scrollLeft,startY:this.element.scrollTop,x:e,y:i,end:()=>{this.scrollEnd(),t()}})})}}index$1=Object.freeze({__proto__:null,SmoothScroller:SmoothScroller});const coveredCSSText=`
  width: 100%;
  height: 100%;
  min-width: 100%;
  min-height: 100%;
  max-width: 100%;
  max-height: 100%;
`,fullscreenBaseCSSText=`
  inset: 0px;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  ${coveredCSSText}
`;class AppletControls{constructor(t){this.available=!0,this.toggleLock=!1,this.advanceDegree=.03,this.applet=t,this.application=t.application,this.appletViewport=this.applet.viewport}get visibility(){return 0!==Math.round(this.controlsView.scrollLeft/this.appletViewport.offsetWidth)}get viewports(){return this.fromViewports||(this.fromViewports=this.application.segue.viewports)}get degree(){return this.controlsView.scrollLeft/this.appletViewport.offsetWidth}attach(){this.controlsView=document.createElement("applet-controls"),this.contentContainer=document.createElement("applet-container"),this.dropbackView=document.createElement("applet-dropback"),this.controlsOverlay=document.createElement("applet-controls-overlay"),this.scroll=new SmoothScroller(this.controlsView),this.bindControlsOverlay()}bindControlsOverlay(){this.controlsOverlay.addEventListener("touchstart",t=>{t.stopPropagation(),t.preventDefault()},!1)}setControlView(){var t=`
      display: flex;
      ${coveredCSSText}
      scroll-snap-align: start;
      scroll-snap-stop: always;
    `,e=document.createElement("style");e.innerHTML=`
      applet-controls::-webkit-scrollbar {
        display: none;
      }
      applet-controls::scrollbar {
        display: none;
      }
    `,this.contentContainer.style.cssText=t,this.dropbackView.style.cssText=`
      ${t}
      background: rgba(0, 0, 0, .3);
      opacity: 0;
    `,this.controlsView.style.cssText=`
      display: flex;
      ${coveredCSSText}
      flex-direction: row;
      overflow: auto;
      scroll-behavior: auto;
      scroll-snap-type: both mandatory;
    `,this.controlsOverlay.style.cssText=`
      position: fixed;
      ${fullscreenBaseCSSText}
      z-index: 9;
      display: none;
    `,this.controlsView.appendChild(this.dropbackView),this.controlsView.appendChild(this.contentContainer),this.appletViewport.appendChild(e),this.appletViewport.appendChild(this.controlsView),this.appletViewport.appendChild(this.controlsOverlay)}bindEvent(){const e=this.applet;const i=this.viewports[1],s=this.application.config.swipeTransitionType,o=t=>{e.transforming||!1===this.toggleLock&&t<=this.advanceDegree&&this.application.activityApplet===e&&(this.toggleLock=!0,setTimeout(()=>{this.toggleLock=!1},300),this.application.segue.back("controls").then(()=>{this.fromViewports=void 0}))};this.controlsView.addEventListener("scroll",()=>{const t=this.degree;o(t),requestAnimationFrame(()=>{this.dropbackView.style.opacity=""+t,1<t?this.controlsView.style.backgroundColor=`rgba(0, 0, 0, ${.5+3*(t-1)})`:this.controlsView.style.backgroundColor="transparent",this.application.trigger("transitioning",t,this.application.segue.appletGroup),i&&e.visibility&&!e.transforming&&!this.toggleLock&&("slide"===s?i.style.transform=`translate3d(${30*-t}%, 0, 0)`:i.style.transform=`scale(${1-.03*t})`)})}),this.dropbackView.addEventListener("touchstart",()=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){yield this.hide(),o(this.degree)})),this.applet.on("show",()=>{this.visibility||this.appearImmediately(),this.prepareForChange()})}prepareForChange(){var t=this.viewports,e=this.application.config.swipeTransitionType,t=t[1];t&&(t.style.transform="slide"===e?"translate3d(30%, 0, 0)":"scale(0.97)")}switch(t){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.controlsOverlay.style.display="block",t&&this.disappearImmediately(),this.toggleLock=!0,this.scroll.snapTo(t?this.appletViewport.offsetWidth:0,0).then(()=>{this.toggleLock=!1,this.controlsOverlay.style.display="none"})})}disappearImmediately(){this.controlsView.style.scrollBehavior="auto",this.controlsView.scrollLeft=0}appearImmediately(){this.controlsView.style.scrollBehavior="auto",this.controlsView.scrollLeft=this.appletViewport.offsetWidth}show(){return this.switch(!0)}hide(){return this.switch(!1)}disable(){this.freeze(),this.available=!1}enable(){this.available=!0}activate(){!1!==this.available&&(this.dropbackView.style.display="block",this.controlsView.style.overflow="auto",this.controlsView.scrollLeft=this.appletViewport.offsetWidth)}freeze(){this.dropbackView.style.display="none",this.controlsView.style.overflow="hidden"}create(){this.attach(),this.setControlView(),this.bindEvent();var t=this.applet;return("applet"!==t.rel||!1===t.swipeModel||null!=(t=t.mountBehavior)&&t.noSwipeModel)&&this.freeze(),this.contentContainer}}class SlideView{constructor(t,e={openSlideViewLeftHolder:!0,slideViewSnapType:"x",slideViewGridRepeat:0}){this.scrolling=!1,this.switching=!1,this.distance=0,this.activeId="",this.hasSmoothSnapScrolling=testHasSmoothSnapScrolling(),this.scrollCancelTimeoutId=-1,this.scrollCycleTimeout=300,this.snapType="x";var i=t.config.defaultSlideViewApplets,s=t.viewport;i&&s&&(this.applet=t,this.application=t.application,this.slideViewApplets=i,this.options=e,this.snapType=e.slideViewSnapType,this.createSlideView(i,s),this.bindScroll(),this.bindSlideViewHolder(),this.scroller=new SmoothScroller(this.slideView))}get index(){var t=this.slideView;return(Math.round(t.scrollLeft/t.offsetWidth)+1)*(Math.round(t.scrollTop/t.offsetHeight)+1)-1}closeOverlay(){this.slideViewOverlay.style.display="none"}openOverlay(){this.slideViewOverlay.style.display="block"}bindSlideViewHolder(){var t=t=>{t.stopPropagation(),this.openOverlay(),this.slideView.style.overflowX="hidden"},e=()=>{this.closeOverlay(),this.slideView.style.overflowX="auto"};this.slideViewHolder.addEventListener("touchstart",t,{passive:!1}),this.slideViewHolder.addEventListener("touchmove",t,{passive:!1}),this.slideViewHolder.addEventListener("touchcancel",e),this.slideViewHolder.addEventListener("touchend",e)}bindScroll(){const i=this.slideView;i.addEventListener("scroll",()=>{this.switching||(this.scrolling||(this.freezeAll(),this.scrolling=!0),this.application.activate(!1),clearTimeout(this.scrollCancelTimeoutId),this.scrollCancelTimeoutId=setTimeout(()=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t,e;this.hasSmoothSnapScrolling||(t=Math.round(i.scrollLeft/i.offsetWidth),e=Math.round(i.scrollTop/i.offsetHeight),yield this.scroller.scrollTo(t*this.slideView.offsetWidth,e*i.offsetHeight)),this.scrolling=!1,this.activate(this.index),this.application.activate(!0)}),this.scrollCycleTimeout))})}getAppletIdByIndex(t){return null==(t=this.slideViewApplets[t])?void 0:t.id}getAppletIndexById(t){if("number"==typeof t)return t;let e=0;for(const i of this.slideViewApplets){if(i.id===t)return e;e++}return 0}to(n,l=!0){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t,e,i=this.getAppletIndexById(n),s=this.slideView;let o=0,r=0;return"x"===this.options.slideViewSnapType?(e=(t=s.offsetWidth)*this.slideViewApplets.length,o=Math.min(Math.max(i*t,0),e)):(e=(t=s.offsetHeight)*this.slideViewApplets.length,r=Math.min(Math.max(i*t,0),e)),this.index!==i&&(yield this.freeze(this.index)),!1===l?(s.style.scrollBehavior="auto",s.scrollLeft=o,s.scrollTop=r,s.style.scrollBehavior="smooth",Promise.resolve()):(this.switching=!0,this.openOverlay(),this.application.activate(!1),this.scroller.snapTo(o,r).then(()=>{this.closeOverlay(),this.switching=!1,this.activate(this.index),this.application.activate(!0)}))})}destroy(e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=this.getAppletIdByIndex(e);return(t=t&&this.application.applets[t])?!1!==t.config.background?Promise.resolve(!1):t.destroy(!0):Promise.resolve(!0)})}freeze(e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=this.getAppletIdByIndex(e);return t?this.application.get(t).then(t=>{t.hide(),this.applet.trigger("slideOut",t)}):Promise.resolve()})}activate(t){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){const e=this.getAppletIdByIndex(t);return e?this.application.get(e).then(t=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return t.show(),this.applet.trigger("slideEnter",t),e!==this.activeId&&this.destroy(this.getAppletIndexById(this.activeId)),this.activeId=e,t.view&&t.visibility?Promise.resolve():t.build()})):Promise.resolve()})}freezeAll(){var e=this.slideViewApplets.length;for(let t=0;t<=e;t++)this.freeze(t)}resetViewportStyle(t){t.style.cssText=`
      display: flex;
      ${coveredCSSText}
      scroll-snap-align: start;
      scroll-snap-stop: always;
      transform: translate3d(0, 0, 0);
    `}createSlideView(t,e){const r=document.createElement("slideView-viewport");var i=document.createElement("style");const n=document.createElement("slideView-holder");var s=document.createElement("slideView-overlay"),o=this.snapType,l=this.options.slideViewGridRepeat;i.innerHTML=`
      slideView-viewport::-webkit-scrollbar {
        display: none;
      }
      slideView-viewport::scrollbar {
        display: none;
      }
    `,r.style.cssText=`
      ${"y"===o?"overflow-y: auto; overflow-x: hidden;":"x"===o?"display: flex; overflow-x: auto; overflow-y: hidden;":`
        display: grid;
        overflow: auto;
        grid-template-columns: repeat(${l}, 100%);
        grid-template-rows: repeat(${l}, 100%);
      `}
      position: absolute;
      ${fullscreenBaseCSSText}
      scroll-behavior: ${this.hasSmoothSnapScrolling?"smooth":"auto"};
      scroll-snap-type: ${o} mandatory;
    `,n.style.cssText=`
      position: absolute;
      top: 15%;
      bottom: 15%;
      left: 0;
      width: 15px;
      z-index: 5;
    `,s.style.cssText=`
      position: fixed;
      ${fullscreenBaseCSSText}
      z-index: 7;
      display: none;
    `,s.addEventListener("touchstart",t=>{t.stopPropagation(),t.preventDefault()}),t.forEach((t,e)=>{const{id:i,activate:s}=t,o=document.createElement("applet-viewport");o.id="applet-viewport-"+i,this.resetViewportStyle(o),0===e&&(this.activeId=i,this.options.openSlideViewLeftHolder&&o.appendChild(n)),r.appendChild(o),this.application.get(i).then(t=>{t.attach(o,this.applet,{agentSegue:()=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.application.to(this.applet.id).then(()=>{var t;null!=(t=this.applet.slide)&&t.to(i)})}),noSwipeModel:!0}),"instant"===s||0===e?(t.build(),0===e&&t.show()):"lazy"===s&&requestIdleCallback(()=>{t.build()},{timeout:3e3})})}),e.appendChild(i),e.appendChild(r),e.appendChild(s),this.slideView=r,this.slideViewHolder=n,this.slideViewOverlay=s}}const baseStyle=`
  applet-viewport {
    background: transparent !important;
  }
  modality-container {
    display: flex;
    height: 100%;
    overflow-y: scroll !important;
    scroll-behavior: smooth;
    scroll-snap-type: y mandatory;
    flex-direction: column;
  }
  modality-container::-webkit-scrollbar {
    display: none;
  }
  modality-container::scrollbar {
    display: none;
  }
  modality-placeholder {
    position: relative;
    display: block;
    ${coveredCSSText}
    scroll-snap-align: start;
    scroll-snap-stop: always;
    box-sizing: content-box;
  }
  modality-handle {
    display: block;
    position: absolute;
    top: 100%;
    height: 20px;
    width: 100%;
    z-index: 1;
  }
  modality-handle::before {
    content: ' ';
    display: block;
    width: 36px;
    height: 5px;
    margin: 5px auto;
    border-radius: 5px;
    background: #777;
    opacity: .5;
  }
  modality-handle:hover::before {
    opacity: 1;
  }
  blocked-holder {
    position: absolute;
    top: 0;
    left: 0;
    width: 40px;
    height: 100%;
    z-index: 5;
    overflow-y: hidden;
    overflow-x: scroll;
    overscroll-behavior-y: none;
    display: flex;
    flex-flow: row-reverse;
  }
  blocked-holder::-webkit-scrollbar {
    display: none;
  }
  blocked-holder::scrollbar {
    display: none;
  }
  blocked-holder::before {
    content: ' ';
    display: flex;
    min-width: 100vw;
    height: 100%;
  }
`,NoSmoothSnapScrolling=!1===testHasSmoothSnapScrolling();class Modality{constructor(t){this.switching=!1,this.scrollCancelTimeoutId=-1,this.advanceDegree=.03,this.applet=t,this.application=this.applet.application,this.appletViewport=this.applet.viewport,this.modalityContainer=document.createElement("modality-container"),this.scroller=new SmoothScroller(this.modalityContainer),this.options=this.applet.config.sheetsBottomOptions,this.buildModalityOverlay(),null!=(t=t.viewport)&&t.appendChild(this.modalityContainer)}get viewports(){return this.fromViewports||(this.fromViewports=this.application.segue.viewports)}get maxDegree(){var t;return 1+(null!=(t=null==(t=this.miniCard)?void 0:t.offsetHeight)?t:0)/this.modalityContainer.offsetHeight}get degree(){return this.modalityContainer.scrollTop/this.modalityContainer.offsetHeight}get visibility(){return!(this.degree<=.1)}switchSheets(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.application.activityApplet!==this.applet?Promise.resolve():this.degree<=.5?this.hide():this.show()})}switchOverlay(t=!1){this.modalityOverlay.style.display=t?"block":"none"}switchSmooth(t=!0){this.modalityContainer.style.scrollBehavior=t?"smooth":"auto"}switchSnap(t=!0){this.modalityContainer.style.scrollSnapType=t?"y mandatory":"none"}show(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t;if(!this.switching)return this.switching=!0,this.switchOverlay(!0),t=this.contentContainer.offsetHeight,this.scroller.snapTo(0,t).then(()=>{this.switching=!1,this.switchOverlay(!1)})})}hide(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){if(!this.switching)return this.switching=!0,this.switchOverlay(!0),this.scroller.snapTo(0,0).then(()=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){this.switching=!1,this.switchOverlay(!1),this.application.activityApplet===this.applet&&(yield this.application.segue.back(),this.fromViewports=void 0)}))})}bindDragContent(){var t=this.applet.contentDocument;if(t){const i={x:0,y:0,top:0,swipe:void 0},s=this.modalityContainer,o=s.offsetWidth/s.offsetHeight;t.addEventListener("touchstart",t=>{t=t.changedTouches,t=t[0];i.x=t.pageX,i.y=t.pageY,i.top=s.scrollTop,i.swipe=void 0},!0),t.addEventListener("touchend",()=>{i.swipe&&(s.style.scrollBehavior="smooth",this.switchSheets().then(()=>{this.switchOverlay(!1),this.switchSmooth(!0),this.switchSnap(!0),this.switching=!1}))},!0),t.addEventListener("touchmove",t=>{var t=t["changedTouches"],t=t[0],e=t.pageX-i.x,t=t.pageY-i.y;this.switching||(i.swipe&&(s.scrollTop=i.top-e/o),void 0===i.swipe&&(10<Math.abs(e)-Math.abs(t)&&Math.abs(t)<=10?(i.swipe=!0,this.switchOverlay(!0),this.switchSmooth(!1),this.switchSnap(!1)):Math.abs(e)<Math.abs(t)&&(i.swipe=!1)))},!0)}}bindBlockedHolder(t){let e=0,i=!1,s=!1;const o=this.modalityContainer,r=o.offsetWidth/o.offsetHeight,n=()=>{this.switchSheets().then(()=>{this.switchOverlay(!1),this.switchSmooth(!0),this.switchSnap(!0),s=!0,i=!1,t.scrollLeft=0,this.switching=!1})};t.addEventListener("scroll",()=>{this.switching||(s?s=!1:(this.switchOverlay(!0),this.switchSmooth(!1),this.switchSnap(!1),!1===i&&(e=o.scrollTop,i=!0),o.scrollTop=e+t.scrollLeft/r,clearTimeout(this.scrollCancelTimeoutId),this.scrollCancelTimeoutId=setTimeout(()=>{n()},100)))})}buildModalityOverlay(){var t=document.createElement("modality-overlay");t.style.cssText=`
      position: fixed;
      ${fullscreenBaseCSSText}
      z-index: 9;
      display: none;
    `,t.addEventListener("touchstart",t=>{t.stopPropagation(),t.preventDefault()},!1),this.modalityOverlay=t}create(){var t=this.appletViewport;const e=this.viewports[1],i=this.modalityContainer;var s=i.firstChild,o=document.createElement("modality-placeholder"),r=document.createElement("modality-handle"),n=document.createElement("blocked-holder"),l=document.createElement("applet-container"),a=document.createElement("style"),h=this.options,c=(null==h?void 0:h.miniCardHeight)||0,p=(null==h?void 0:h.blockedHolderWidth)||"40px",d=(null==h?void 0:h.top)||"60px";const u=(null==h?void 0:h.maskOpacity)||.3;var v=null==h?void 0:h.maskClosable,m=null==h?void 0:h.noHandlebar;a.innerHTML=baseStyle,l.style.cssText=`
      position: relative;
      border: 0px;
      outline: 0px;
      min-width: 100%;
      min-height: calc(100% - ${d});
      max-height: calc(100% - ${d});
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      overflow: hidden;
    `,t.appendChild(a),t.appendChild(n),t.appendChild(this.modalityOverlay),o.appendChild(r),n.style.width="string"==typeof p?p:p+"px",s?i.insertBefore(o,s):i.appendChild(o),c&&((d=document.createElement("modality-mini-card")).style.cssText=`
        width: 100%;
        min-height: calc(100% - ${c});
        scroll-snap-align: start;
        scroll-snap-stop: always;
      `,i.appendChild(d),r.style.top=`calc(200% - ${c})`,this.miniCard=d),v&&(o.addEventListener("click",()=>{this.hide()}),null!=(a=this.miniCard)&&a.addEventListener("click",()=>{this.hide()})),m&&(r.style.display="none");const w=this.maxDegree;return this.bindBlockedHolder(n),setTimeout(()=>{this.bindDragContent()},10),i.addEventListener("scroll",()=>{const t=this.degree;requestAnimationFrame(()=>{t>w?i.style.background=`rgba(0, 0, 0, ${u+3*(t-1)})`:1<t||(i.style.background=`rgba(0, 0, 0, ${u*t})`,e&&!this.applet.transforming&&this.application.activityApplet===this.applet&&(e.style.transform=`scale(${1-Math.max(.03*t,0)})`))}),this.switching||(t<=this.advanceDegree&&this.hide(),NoSmoothSnapScrolling&&setTimeout(()=>{this.degree===t&&(t<=.7?this.hide():this.show())},200))},!1),null!=h&&h.alwaysPopUp&&(this.applet.on("willShow",()=>{this.show()}),this.applet.on("willHide",()=>{this.hide()})),i.appendChild(l),this.contentContainer=l}}windowOpen=(t,a)=>{const r=t.open;t.document.addEventListener("click",t=>{const l=(t=t instanceof CustomEvent&&t.detail instanceof Event?t.detail:t).path||(null==(e=t.composedPath)?void 0:e.call(t))||[];l.splice(-3);var e=(()=>{for(const e of l){var t=null==(t=e.getAttribute)?void 0:t.call(e,"to-applet");if(t){const i=e.getAttribute("clone-as")||void 0,[s,o]=t.split("?");if(i){const r=e.getAttribute("title")||"",n=e.getAttribute("preset-effect")||void 0;return void a.get(s).then(t=>{t=t.model;Object.assign(t.config,{title:r,animation:n,level:a.activityLevel}),a.add(i,t),a.to(i,"?"+o)})}return void a.to(s,"?"+o)}if("A"===e.tagName)return e}})();if(e){const o=e.href||String(e);if(o){if("_parent"===e.target||"_top"===e.target)return r(o),!1;var i=e.getAttribute("title")||"",s=e.getAttribute("preset-effect")||void 0,e=e.getAttribute("clone-as")||void 0;t.stopPropagation(),t.preventDefault(),a.pushWindow(o,i,s,e,t).catch(()=>{r(o)})}}return!1},!0),t.open=(t,e,i)=>"string"!=typeof t||e&&0!==e.indexOf("_")||i?r(t,e,i):(a.pushWindow(t,"").catch(()=>{r(t)}),null)};const getTimerHandler=(i,s,o)=>(...t)=>{const e=()=>{"function"==typeof i?i(...t):"string"==typeof i&&new s.Function("return "+i)(...t)};s===window?"frozen"!==window.applicationActiveState?e():o&&window.addEventListener("message",t=>{"application-active"===(null==(t=t.data)?void 0:t.type)&&e()}):"visible"===s.appletVisibilityState?e():o&&s.addEventListener("message",t=>{"applet-show"===(null==(t=t.data)?void 0:t.type)&&e()})},smartSetTimeout=s=>{if(!s.setBackgroundTimeout){const o=s.setTimeout;s.setBackgroundTimeout=o,s.setTimeout=(t,e,...i)=>{t=getTimerHandler(t,s,!0);return o(t,e,...i)},s.setTimeout.toString=()=>"setTimeout() { [native code] }"}},smartSetInterval=s=>{if(!s.setBackgroundInterval){const o=s.setInterval;s.setBackgroundInterval=o,s.setInterval=(t,e,...i)=>{t=getTimerHandler(t,s);return o(t,e,...i)},s.setInterval.toString=()=>"setInterval() { [native code] }"}};tapHighlight=(t,i)=>{const s={element:null,oldStyle:""};const o=()=>{var t;s.element&&(null!=(t=null==(t=s.element)?void 0:t.style)&&t.filter&&(s.element.style.filter=s.oldStyle),s.element=null,s.oldStyle="")};t.document.addEventListener("touchstart",r=>{const n=i?"string"==typeof i?i.split(" "):i:null,l=r.path||r.composedPath()||[],e=(l.splice(-3),(()=>{var t,e;for(const s of l){if("A"===s.tagName)return s;if(null!=(t=s.children)&&t.length&&n){for(const o of n){if(0===o.indexOf("#")&&"#"+s.id===o)return s;if(0===o.indexOf(".")&&s.classList.length&&Object.values(s.classList).includes(o.slice(1)))return s;if(null!=(e=s.getAttribute)&&e.call(s,o))return s}return null}}var i=(null!=(i=null==(i=l[0])?void 0:i.children)&&i.length?l[0]:l[1])||r.target;return["DIV","A","IMG"].includes(i.tagName)?i:null})());if(e){if(s.element===e)return o();s.element=e,s.oldStyle=e.style.filter,setTimeout(()=>{if(s.element===e){if(9e4<e.offsetWidth*e.offsetHeight)return;e.style.filter=s.oldStyle+" brightness(.8)",e.setAttribute("tap-highlight","true")}const t=()=>{setTimeout(()=>{s.element!==e?(e.style.filter=s.oldStyle,e.removeAttribute("tap-highlight")):t()},600)};t()},60)}}),t.document.addEventListener("touchmove",o),t.document.addEventListener("touchcancel",o),t.document.addEventListener("touchend",()=>{setTimeout(()=>{o()},600)})},cssVar=(t,i)=>{var{id:e,application:s}=i,o=s.config.globalCSSVariables,o="function"==typeof o?o():o;const r=t.document.documentElement.style,n=t=>{i.snapshot=null;for(const e in t)r.setProperty(e,t[e])},l=t=>{var e;n({"--application-safe-area-top":null!=(e=t[0])?e:t,"--application-safe-area-right":null!=(e=t[1])?e:t,"--application-safe-area-bottom":null!=(e=null!=(e=t[2])?e:t[0])?e:t,"--application-safe-area-left":null!=(e=null!=(e=t[3])?e:t[1])?e:t})};t=s.config.safeArea,t="function"==typeof t?t():t;t&&l(t),o&&n(o);s.on("safeAreaChange",t=>{l(t)},e),s.on("globalCSSVariablesChange",t=>{n(t)},e)},inject=(t,e)=>{var i,{config:s,application:o}=e,r=s.apply||[],n=s.applyOptions||{};if(Array.isArray(r))for(const l of r)switch(l){case"link-new-viewport":windowOpen(t,o);break;case"tap-highlight":tapHighlight(t,null!=(i=null==(i=n[l])?void 0:i.selector)?i:"use-tap-highlight");break;case"smart-setTimeout":smartSetTimeout(t);break;case"smart-setInterval":smartSetInterval(t)}if("function"==typeof s.inject)try{s.inject(t,e)}catch(t){console.error("config > inject:",t)}if(e.components)for(const a of e.components)t.customElements.define("code-highlight",a(t));cssVar(t,e)};class AppletView extends AppletEventTarget{setShadowView(t,e){["frameworks","system"].includes(this.rel)?(t.style.cssText=`
        position: fixed;
        width: 100%;
        z-index: 7;
        pointer-events: none;
      `,e.style.pointerEvents="all"):(t.style.cssText=`
        ${coveredCSSText}
        overflow: auto;
      `,e.style.cssText=`
        min-width: 100%;
        min-height: 100%;
      `)}createControlsView(){var t;return this.controls=new AppletControls(this.self),null==(t=this.controls)?void 0:t.create()}getContentContainer(){return this.isModality?this.createModality():this.useControls?this.createControlsView():this.viewport}buildSlideView(){return new Promise((t,e)=>{var i;return this.slide?t():this.config.defaultSlideViewApplets?(i={openSlideViewLeftHolder:null==(i=this.config.openSlideViewLeftHolder)||i,slideViewSnapType:null!=(i=this.config.slideViewSnapType)?i:"x"},this.slide=new SlideView(this.self,i),void t()):e()})}buildContentImage(){var t,e,i;this.img||(e=this.viewport,i=document.createElement("applet-img"),!1===this.noShadowDom&&null!=(t=i.attachShadow)&&t.call(i,{mode:"open"}),e.appendChild(i),i.style.cssText=`
      position: absolute;
      ${fullscreenBaseCSSText}
      z-index: 2;
      pointer-events: none;
      background: ${this.color};
      opacity: 1;
      transition: opacity .3s;
    `,this.img=i)}getPresetView(){var t;return null==(t=this.application.presetAppletsView)?void 0:t[this.id]}createContentView(){var t=document.createElement("define-applet");return this.application.defineApplet(t,this.id),t}getContentView(){var t=null!=(t=this.getPresetView())?t:this.createContentView();return"applet"===this.rel&&(t.style.cssText=`
        position: relative;
        display: flex;
        ${coveredCSSText}
        overflow: auto;
        background: ${this.color}
      `),t}buildContentStructure(){this.contentView||(this.contentView=this.getContentView(),this.contentSlot=this.contentView.getViewSlot(),this.getContentContainer().appendChild(this.contentSlot))}createShadowView(){var t,e,i,s;return this.config.render?(i=document.createElement("applet-shadow"),s=document.createElement("applet-shadow-inner"),!1===this.noShadowDom&&null!=(t=i.attachShadow)&&t.call(i,{mode:"open"}),(i.shadowRoot||i).appendChild(s),null!=(e=(t=this.config).render)&&e.call(t,s),null!=(e=this.contentView)&&e.appendChild(i),this.setShadowView(i,s),Promise.resolve(i)):Promise.resolve(this.contentView)}createSandbox(t,e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.sandbox=new Sandbox(t,null==e?void 0:e.join(" ")),this.decorateSandbox(this.sandbox.sandbox),yield this.loadContentView(),this.sandbox.sandbox})}createPortal(e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=document.createElement("portal");return t.src=e,this.decorateSandbox(t),yield this.loadContentView(),t})}createModality(){return this.modality=new Modality(this.self),this.modality.create()}loadContentView(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){this.waitingForResponse().then(()=>{Promise.resolve()}).catch(()=>{Promise.reject()}),this.status.refreshing?setTimeout(()=>{Promise.resolve()},2e3):Promise.resolve()})}loadSourceContent(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=this.contentView;return"portal"===this.viewType?(null!=t&&t.appendChild(this.view),Promise.resolve()):this.sandbox?(this.uri?(this.sandbox.onload=()=>Promise.resolve(),this.sandbox.onerror=()=>Promise.reject(),this.sandbox.enter(t)):(this.sandbox.append(yield this.source,t),this.sandbox.onunload=this.loadSourceContent.bind(this),Promise.resolve()),void this.injectIntoContentWindow()):Promise.resolve()})}injectIntoContentWindow(){var t;!this.sameOrigin||(t=this.contentWindow).__LATH_APPLICATION_AVAILABILITY__||(inject(t,this),t.__LATH_APPLICATION_AVAILABILITY__=!0)}loadMirrorImage(){this.status.refreshing||this.config.useMirroring&&!this.img&&(this.buildContentImage(),this.setImageContent(this.mirroringString||""))}setImageContent(t){var e=this.img,e=e.shadowRoot||e;"string"==typeof t?e.innerHTML=t:e.appendChild(t)}removeMirrorImage(){if(this.img&&!this.status.refreshing){const e=this.img;setTimeout(()=>{var t;e.style.opacity="0",null!=(t=e.parentNode)&&t.removeChild(e),this.img=null},300)}}decorateSandbox(t){t.style.cssText=`
      ${coveredCSSText}
      border: 0;
      outline: 0;
    `}waitingForResponse(){return new Promise((e,i)=>{this.loadSourceContent().then(()=>{var t;this.status.prerender=!0,null!=(t=this.events)&&t.load(this.self),this.trigger("load"),this.attachEvent(),setTimeout(()=>{e()},0)}).catch(()=>{var t;null!=(t=this.events)&&t.loadError(this.self),this.trigger("loadError"),i()})})}createView(){return"shadow"===this.viewType?this.createShadowView():"portal"===this.viewType?this.createPortal(this.uri):this.createSandbox(this.uri,this.config.sandbox)}buildMainView(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.cancelGuard(),this.expired?this.refresh():(this.view||(this.createTime=Date.now(),this.loadMirrorImage(),this.buildContentStructure(),this.injectIntoContentWindow(),this.view=yield this.createView(),this.removeMirrorImage()),Promise.resolve())})}build(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){if(this.config.defaultSlideViewApplets){if("frameworks"!==this.id)return this.buildSlideView();this.buildSlideView()}return yield this.buildMainView(),Promise.resolve()})}refresh(){var s;return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){if(this.status.refreshing||!this.view)return Promise.reject();var t,e,i;this.status.refreshing=!0,this.config.refresh instanceof Promise?(yield this.config.refresh(),this.status.refreshing=!1,this.trigger("refreshing")):"applet"!==this.rel&&this.noSource?this.status.refreshing=!0:(t=this.contentView,e=this.contentSlot,i=this.view,t.setAttribute("applet-id",this.id+"-obsolete"),e.name=`applet-${this.id}-obsolete`,this.application.delPresetAppletsView(this.id),this.contentView=void 0,"applet"===this.rel&&this.noSource&&(this.config.source={src:location.href}),this.contentView=this.getContentView(),this.view=yield this.createView(),e.name="applet-"+this.id,this.status.refreshing=!1,this.trigger("refreshing"),"IFRAME"===i.tagName&&this.unload(i),null!=(s=i.parentNode)&&s.removeChild(i),null!=(s=t.parentElement)&&s.removeChild(t))})}captureShot(t=!0){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return!t&&this.snapshot&&this.snapshotTime===this.createTime?this.snapshot:(this.snapshotTime=this.createTime,Promise.all(/*! import() */[__webpack_require__.e("vendors-Lath_node_modules_html2canvas_dist_html2canvas_js"), __webpack_require__.e("Lath_app_index-7b6b2dce_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ./index-7b6b2dce.js */ "../Lath/app/index-7b6b2dce.js")).then(t=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return t.capture(this.self).then(t=>this.snapshot=t)})))})}}class Applet extends AppletView{constructor(t,e,i){super(t,e,i),this.events.boot(this.self)}}class SegueBase{constructor(t,e){this.id="",this.prevId="",this.param="",this.relativeViewport=document.createElement("relative-windows"),this.absoluteViewport=document.createElement("absolute-windows"),this.fixedViewport=document.createElement("fixed-windows"),this.applicationViewport=document.createElement("application-windows"),this.target=this.relativeViewport,this.application=t,this.root=e.root||document.body,this.zIndex=e.zIndex||Number.MAX_SAFE_INTEGER,this.setupViewport()}setupViewport(){this.relativeViewport.id="relative-viewport",this.absoluteViewport.id="absolute-viewport",this.resetViewport(),this.fixedViewport.id="fixed-viewport",this.fixedViewport.style.cssText=`
      width: 100%;
      height: 0;
      max-height: 0;
      overflow: visible;
      contain: strict;
      z-index: 3;
      overflow: hidden;
    `,this.applicationViewport.style.cssText=`
      position: fixed;
      ${fullscreenBaseCSSText}
      overflow: hidden;
      contain: strict;
      z-index: ${this.zIndex};
    `,this.applicationViewport.appendChild(this.relativeViewport),this.applicationViewport.appendChild(this.absoluteViewport),this.applicationViewport.appendChild(this.fixedViewport),this.root.appendChild(this.applicationViewport)}resetViewport(t){var e=`
      position: fixed;
      ${fullscreenBaseCSSText}
      overflow: hidden;
      contain: strict;
    `;this.relativeViewport.style.cssText=`
      ${e}
      z-index: 1;
      ${t?"transform: translate3d(0, 0, 0);":""}
    `,this.absoluteViewport.style.cssText=`
      ${e}
      z-index: 2;
      ${t?"":"transform: translate(200%, 200%);"}
    `}}class SegueHistory extends SegueBase{constructor(t,e){super(t,e),this.prevHistoryStep=0,this.historyIndex=history.length,this.historyShadowLength=history.length,this.oneHistoryIndex=0,this.historyDirection=0,this.backoutCount=0,this.sessionHistory=[],this.silentObserver=void 0,this.historyBreakCallback=null,this.bindHistoryState()}get fromHistoryForward(){return-1===this.prevHistoryStep&&1===this.historyDirection}get fromHistoryBack(){return-1===this.prevHistoryStep&&-1===this.historyDirection}get historyState(){return"loading"===document.readyState?this.sessionHistory[this.oneHistoryIndex]:history.state}get isOverscrollHistoryNavigation(){var t,e;return!(!this.fromHistoryBack&&!this.fromHistoryForward)&&(e=-1!==(t=this.application.overscrollHistoryNavigation).type.indexOf("wipe")?300:200,!(Date.now()-t.moment>e))}bindHistoryState(){addEventListener("popstate",t=>{this.popstate(t.state)},!1),addEventListener("hashchange",()=>{this.observeSilent()},!1)}observeSilent(i=1e3){if(!this.options.oneHistory){"loading"===document.readyState&&(i=3e4),clearInterval(this.silentObserver);let e=0;this.silentObserver=setInterval(()=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){++e>=i&&clearInterval(this.silentObserver);var t=this.historyState||history.state||this.application.route,t=decodeURIComponent(t.id);t&&decodeURIComponent(t)!==this.id&&(yield this.popstate(this.historyState).catch(()=>{clearInterval(this.silentObserver)}))}),500)}}popstate(e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var{historyIndex:t=this.historyShadowLength}=null!=e?e:{};t===this.historyIndex?this.historyDirection=0:t>this.historyIndex?this.historyDirection=1:this.historyDirection=-1,null===e?(this.historyDirection=-1,this.historyIndex=this.historyIndex-1):this.historyIndex=t,yield this.toHistory(e),this.observeSilent(20)})}back(t){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.backFromType=t,this.backTo().catch(()=>{this.backFromType=void 0})})}backTo(){var t;return this.options.oneHistory?(t=this.sessionHistory[this.oneHistoryIndex-1])?(this.historyDirection=-1,this.oneHistoryIndex=this.oneHistoryIndex-1,this.toHistory(t)):Promise.reject():(history.back(),this.observeSilent(20),Promise.resolve())}forward(){var t;return this.options.oneHistory?(t=this.sessionHistory[this.oneHistoryIndex+1])?(this.historyDirection=1,this.oneHistoryIndex=this.oneHistoryIndex+1,this.toHistory(t)):Promise.reject():(history.forward(),this.observeSilent(20),Promise.resolve())}pushState(t="",e="",i=location.search){t=encodeURIComponent(t);var s=this.historyShadowLength,o={id:t,title:e,time:Date.now(),search:i,historyIndex:s};if(this.observeSilent(20),0!==this.sessionHistory.length&&(this.sessionHistory.length=this.oneHistoryIndex+1),this.sessionHistory.push(o),this.oneHistoryIndex=this.sessionHistory.length-1,this.options.oneHistory)return this.replaceState(t,e,i);history.pushState(o,e,location.pathname+i+"#"+t),this.historyIndex=this.historyShadowLength=s+1,this.historyDirection=1}replaceState(t="",e="",i=location.search){t=encodeURIComponent(t);var s=this.historyShadowLength,o={id:t,title:e,time:Date.now(),search:i,historyIndex:s};history.replaceState(o,e,location.pathname+i+"#"+t),this.historyIndex=s,this.historyDirection=0}requestRegisterHistory(t="",e="",i=location.search){-1!==this.prevHistoryStep&&"portal"!==this.applet.viewType?this.pushState(t,e,i):this.options.oneHistory&&-1===this.prevHistoryStep&&this.replaceState(t,e,i)}toHistory(n){var l,a;return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t,e,i=this.options,s=n||history.state||this.application.route,o=decodeURIComponent(s.id)||i.index||"frameworks",s=s.search,r=yield this.application.get(o);if(r){if(!this.checkSingleLock())return this.backoutCount=0,t=null!=(a=r.config.level)?a:0,e=null!=(a=this.applet.config.level)?a:0,i.singleFlow&&0!==r.config.level&&e<=t?this.back():(this.isOverscrollHistoryNavigation&&null!=(a=this.historyBreakCallback)&&a.call(this),this.application.segue.to(o,s,-1).then(()=>{this.backFromType=void 0}),this.application.trigger("back",r),Promise.resolve());this.backoutCount++,!0===(null==(l=(a=this.options).holdBack)?void 0:l.call(a,this.backoutCount))&&(this.pushState(o,r.config.title,s),this.application.trigger("exit",{backoutCount:this.backoutCount}))}})}checkSingleLock(){return!(!this.options.singleLock||0!==this.applet.config.level||-1!==this.historyDirection)}bindHistoryBreak(t){this.historyBreakCallback=t}}class SegueState extends SegueHistory{constructor(){super(...arguments),this.hasAnimation=!1,this.hasSuperSwitched=!1,this.isNativeAnimation=!1}get isEntryApplet(){return!this.prevApplet||"applet"!==this.prevApplet.rel}get immovable(){return this.hasSuperSwitched||!this.hasAnimation||this.fromHistoryBack}get backsetState(){var t;return 1===this.appletGroup.length?-1:this.applet.level>=(null!=(t=null==(t=this.prevApplet)?void 0:t.level)?t:0)?0:1}get countercurrent(){return 1===this.backsetState||this.fromHistoryBack}get viewports(){var t;return this.hasSuperSwitched?[this.applet.config.free?this.absoluteViewport:this.relativeViewport,null!=(t=this.prevApplet)&&t.config.free?this.absoluteViewport:this.relativeViewport]:[this.applet.viewport,null==(t=this.prevApplet)?void 0:t.viewport]}}class SegueAnimation extends SegueState{checkAnimationNamed(){return!!this.getAnimationNames()}checkNativeAnimation(){var t=this.getAnimationNames();return"string"==typeof t&&["slide","slide-left","sheets-bottom"].includes(t)}getAnimationNames(){var t;return!(this.options.index&&this.applet.isFullscreen&&this.isEntryApplet)&&(!this.isOverscrollHistoryNavigation&&"controls"!==this.backFromType&&(!0===(t=null!=(t=null==(t=this[this.fromHistoryBack?"prevApplet":"applet"])?void 0:t.config.animation)?t:"slide")||"inherit"===t?this.options.defaultAnimation:t))}getAnimationGroup(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){let t;var e=this.getAnimationNames();if("string"==typeof e)t=yield this.getAnimationByName(e);else if("function"==typeof(null==e?void 0:e[0]))return e;if("function"==typeof(null===t||void 0===t?void 0:t[0]))return t})}getAnimationOneSide(e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=yield this.getAnimationGroup();if(0<=e)switch(typeof t){case"function":return t;case"object":return t[2===t.length?e:0];default:return}})}getAnimationByName(t){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){switch(t){case"sheets-bottom":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_sheets-bottom-9701f10f_js").then(__webpack_require__.bind(__webpack_require__, /*! ./sheets-bottom-9701f10f.js */ "../Lath/app/sheets-bottom-9701f10f.js")).then(t=>{t=t.default;e([t,t])}).catch(t)});case"flip":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_flip-ff489abe_js").then(__webpack_require__.bind(__webpack_require__, /*! ./flip-ff489abe.js */ "../Lath/app/flip-ff489abe.js")).then(t=>{t=t.default;e([t(4),t(4)])}).catch(t)});case"flip-left":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_flip-ff489abe_js").then(__webpack_require__.bind(__webpack_require__, /*! ./flip-ff489abe.js */ "../Lath/app/flip-ff489abe.js")).then(t=>{t=t.default;e([t(3),t(3)])}).catch(t)});case"flip-down":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_flip-ff489abe_js").then(__webpack_require__.bind(__webpack_require__, /*! ./flip-ff489abe.js */ "../Lath/app/flip-ff489abe.js")).then(t=>{t=t.default;e([t(2),t(2)])}).catch(t)});case"flip-right":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_flip-ff489abe_js").then(__webpack_require__.bind(__webpack_require__, /*! ./flip-ff489abe.js */ "../Lath/app/flip-ff489abe.js")).then(t=>{t=t.default;e([t(1),t(1)])}).catch(t)});case"flip-up":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_flip-ff489abe_js").then(__webpack_require__.bind(__webpack_require__, /*! ./flip-ff489abe.js */ "../Lath/app/flip-ff489abe.js")).then(t=>{t=t.default;e([t(0),t(0)])}).catch(t)});case"fade":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_fade-5a638544_js").then(__webpack_require__.bind(__webpack_require__, /*! ./fade-5a638544.js */ "../Lath/app/fade-5a638544.js")).then(t=>{t=t.default;e([t(1),t(0)])}).catch(t)});case"zoom":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_zoom-27e878e2_js").then(__webpack_require__.bind(__webpack_require__, /*! ./zoom-27e878e2.js */ "../Lath/app/zoom-27e878e2.js")).then(t=>{t=t.default;e([t(1),t(0)])}).catch(t)});case"slide-right":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_slide-b46f25fd_js").then(__webpack_require__.bind(__webpack_require__, /*! ./slide-b46f25fd.js */ "../Lath/app/slide-b46f25fd.js")).then(t=>{t=t.default;e([t(3),t(1)])}).catch(t)});case"slide-up":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_slide-b46f25fd_js").then(__webpack_require__.bind(__webpack_require__, /*! ./slide-b46f25fd.js */ "../Lath/app/slide-b46f25fd.js")).then(t=>{t=t.default;e([t(2),t(0)])}).catch(t)});case"slide-down":return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_slide-b46f25fd_js").then(__webpack_require__.bind(__webpack_require__, /*! ./slide-b46f25fd.js */ "../Lath/app/slide-b46f25fd.js")).then(t=>{t=t.default;e([t(0),t(2)])}).catch(t)});default:return new Promise((e,t)=>{(this.options.swipeModel?__webpack_require__.e(/*! import() */ "Lath_app_slide-native-150672b2_js").then(__webpack_require__.bind(__webpack_require__, /*! ./slide-native-150672b2.js */ "../Lath/app/slide-native-150672b2.js")).then(t=>{t=t.default;e([t,t])}):__webpack_require__.e(/*! import() */ "Lath_app_slide-b46f25fd_js").then(__webpack_require__.bind(__webpack_require__, /*! ./slide-b46f25fd.js */ "../Lath/app/slide-b46f25fd.js")).then(t=>{t=t.default;e([t(1),t(3)])})).catch(t)})}})}}class SegueSwitch extends SegueAnimation{constructor(t,e){super(t,e),this.windowSet=[],this.promiseQueue=[],this.promiseParamQueue=[],this.delayDynamicImport()}to(...e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=this.next()||this.promise(...e);return this.pushPromise(this.bindPromiseDone(t),e)})}delayDynamicImport(){requestIdleCallback(()=>{__webpack_require__.e(/*! import() */ "Lath_app_index-9afb6556_js").then(__webpack_require__.bind(__webpack_require__, /*! ./index-9afb6556.js */ "../Lath/app/index-9afb6556.js")).catch(t=>{console.warn(t)})})}attachAppletViewport(t){var e;t.viewport||((e=document.createElement(t.rel+"-viewport")).setAttribute("name",t.id),t.attach(e),this.getSuperViewport(t).appendChild(e))}resetAppletViewport(t,e=this.immovable){var i=t.viewport,s=["frameworks","system"].includes(t.rel);i.style.cssText="",s||(i.style.cssText=`
      position: absolute;
      ${fullscreenBaseCSSText}
      z-index: ${(Number(t.viewIndex)||0)+1};
      transform: ${e?"translate3d(0, 0, 0)":"translate3d(0, 200%, 0)"};
      backface-visibility: hidden;
      contain: strict;
      overflow: hidden;
    `)}getSuperViewport(t=this.applet){return"system"===t.rel?this.fixedViewport:t.config.free?this.absoluteViewport.shadowRoot||this.absoluteViewport:this.relativeViewport.shadowRoot||this.relativeViewport}checkSwitchViewport(t=this.prevApplet,e=this.applet){return!!e.config.free!=!!(t=t||e).config.free}prev(){return this.promiseQueue[0]}next(){var t=this.prev(),e=()=>this.bindPromiseDone(this.promise(...this.promiseParamQueue[0]));if(t)return t.then(e).catch(e)}pushPromise(t,e){return this.promiseParamQueue.push(e),this.promiseQueue.push(t),t}shiftPromise(){this.promiseParamQueue.shift(),this.promiseQueue.shift()}bindPromiseDone(e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=()=>this.shiftPromise();return e.then(t).catch(t)})}limit(t){var e=Math.max((null==(e=null==this?void 0:this.options)?void 0:e.limit)||3,2),i=this.windowSet.indexOf(t);"applet"===this.applet.rel&&!0!==this.applet.config.background&&(-1!==i&&this.windowSet.splice(i,1),this.windowSet.push(t),this.windowSet.length>e&&null!=(i=this.application.applets[this.windowSet.splice(0,1)[0]])&&i.destroy())}destroy(e){e.transient&&-1===this.prevHistoryStep?this.application.del(e.id).then(()=>{var t=this.windowSet.indexOf(e.id);this.windowSet.splice(t,1)}):e.guarding().then(t=>{t||e.destroy().then(()=>{var t=this.windowSet.indexOf(e.id);this.windowSet.splice(t,1)})})}getActionPosition(t){let e=0,i=0;return i=t.changedTouches?(e=t.changedTouches[0].pageX,t.changedTouches[0].pageY):(e=t.x,t.y),{x:e,y:i}}promise(s,o=location.search,r=1,n){var l;return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=this.id;const e=this.application.applets[s];var t=this.application.applets[t],i=t?[e,t]:[e];return e?s===this.id?Promise.resolve():null!=(l=e.mountBehavior)&&l.agentSegue?null==(l=e.mountBehavior)?void 0:l.agentSegue():(this.prevId=this.id,this.id=s,this.param=o,this.applet=e,this.prevApplet=t,this.appletGroup=i,this.prevHistoryStep=r,this.hasAnimation=this.checkAnimationNamed(),this.isNativeAnimation=this.checkNativeAnimation(),this.hasSuperSwitched=this.checkSwitchViewport(),this.target=this.getSuperViewport(),this.touches=n?this.getActionPosition(n):e.getActionOrigin(),this.attachAppletViewport(e),this.resetAppletViewport(e),this.requestRegisterHistory(s,e.config.title,o),e.setActionOrigin(this.touches),yield e.setParam(o),yield e.build(),this.start().then(()=>(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.transform().then(t=>{this.end(t),this.limit(s),this.application.pullDependencies(null==(t=e.config)?void 0:t.prerender).then(()=>{this.application.trigger("prerenderComplete")}),e.config.title&&(document.title=e.config.title)})}))):this.application.get(s).then(()=>this.promise(s,o,r)).catch(()=>{if(this.options.notFound)return this.promise(this.options.notFound,o?o+"&__notFoundId="+s:"?__notFoundId="+s,r)})})}pos(){let t=(null==(o=this.touches)?void 0:o.x)||0,e=(null==(o=this.touches)?void 0:o.y)||0,i="center",s="center";var o=this.relativeViewport.offsetWidth,r=this.relativeViewport.offsetHeight;return t&&e&&(s=[t,e],t<o/4?t=0:t>3*o/4&&(t=o),e<r/4?e=0:e>3*r/4&&(e=r),i=[t,e]),{x:t,y:e,width:o,height:r,attach:i,origin:s}}modulation(i){const s=this.viewports,o=this.backsetState,r=this.countercurrent,n=this.pos();return new Promise((e,t)=>{__webpack_require__.e(/*! import() */ "Lath_app_index-9afb6556_js").then(__webpack_require__.bind(__webpack_require__, /*! ./index-9afb6556.js */ "../Lath/app/index-9afb6556.js")).then(({Animate:t})=>{t={x:n.x,y:n.y,in:new t(s[0]),out:new t(s[1]),view:s,width:n.width,height:n.height,viewports:[this.relativeViewport,this.absoluteViewport],applets:this.appletGroup,reverse:r,direction:r?-1:1,backset:o,historyDirection:this.historyDirection,origin:n.origin,attach:n.attach,touches:this.touches,swipeTransitionType:null!=(t=this.options.swipeTransitionType)?t:"zoom",callback:i};e(t)}).catch(()=>{t()})})}transform(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return new Promise(s=>{var t;if(!this.hasAnimation)return null!=(t=this.applet.controls)&&t.disable(),this.switchViewport(),s(!1);this.getAnimationOneSide(this.backsetState).then(i=>{this.bindHistoryBreak(()=>s(!1)),this.modulation(s).then(e=>{var t;if(!i)return s(!1);null!=(t=this.prevApplet)&&t.willSegueHide(),this.applet.willSegueShow(),requestAnimationFrame(()=>{var t=i(e);t instanceof Promise&&t.then(s),setTimeout(()=>s(!1),1700)})}).catch(()=>{s(!1)})}).catch(()=>s(!1))})})}start(){return new Promise((t,e)=>{this.application.activate(!1),this.application.trigger("transformStart",this.appletGroup);var i=this.applet.events.transformStart;if("function"==typeof i&&"break"===i(this.applet))return e();this.hasAnimation&&!this.hasSuperSwitched||this.applet.viewport&&(this.applet.viewport.style.transform="translate3d(0, 0, 0)"),!this.applet.controls||this.prevApplet&&this.isNativeAnimation||this.applet.controls.disable(),this.applet.willShow(),this.prevApplet&&this.prevApplet.willHide(),t()})}end(t=!1){(this.applet.isFullscreen||this.countercurrent)&&(this.hasSuperSwitched&&this.switchViewport(),this.switchApplet(t)),this.applet.controls&&(this.applet.controls.enable(),this.applet.controls.activate()),this.applet.show(),this.prevApplet&&this.prevApplet.hide();t=this.applet.events.transformEnd;"function"==typeof t&&t(this.applet),this.application.activate(!0),this.application.trigger("transformEnd",this.appletGroup)}switchViewport(){var t;this.resetViewport(null==(t=null==(t=this.applet)?void 0:t.config)?void 0:t.free)}switchApplet(t=!1){this.prevApplet&&(t||("applet"===this.prevApplet.rel&&(t=this.options.swipeModel&&this.prevApplet.level<this.applet.level,this.prevApplet.viewport&&(this.prevApplet.viewport.style.transform=t?"translate3d(0, 0, 0)":"translate3d(0, 200%, 0)")),this.resetAppletViewport(this.applet,!0)),this.prevApplet.viewport&&(this.prevApplet.viewport.style.transitionDuration="0ms"),!0===this.prevApplet.config.background||this.applet.config.modality?this.prevApplet.hide():this.destroy(this.prevApplet))}}class Segue extends SegueSwitch{setup(t){this.options=t}}class ApplicationBase extends EventProvider{constructor(){super(...arguments),this.applets={},this.presetAppletsView={},this.historyNodeLocation=history.length,this.routerRegExp=/([^#/]+)(.+)?/}resolveURL(t){var t=new URL(t,window.location.toString()),e=t;return void 0===t.href&&(e.href=String(t)),e}verifyAppletSrcLegitimacy(t){var e=this.config.capture;if(e)return this.captureAppletSrc(t,e);e=this.config.allowHosts||[];if(0===e.length)return!0;e.push(location.host);var i=new URL(decodeURIComponent(t),window.location.toString()).host;for(const s of e)if(i===s)return!0;return!1}captureAppletSrc(t,e=this.config.capture){var i=this.resolveURL(t),s=i.origin+i.pathname;if("string"==typeof e){if(e===s)return!0}else if("function"==typeof e&&e(i,t))return!0;return!1}promiseApplet(t){return Promise.resolve(t())}delPresetAppletsView(t){delete this.presetAppletsView[t]}setPrestAppletsView(t){this.presetAppletsView=t}setting(t){this.options=t}}class ApplicationState extends ApplicationBase{constructor(){var t;super(...arguments),this.overscrollHistoryNavigation={moment:0,type:""},this.properties={darkTheme:null==(t=null==(t=window.matchMedia)?void 0:t.call(window,"(prefers-color-scheme: dark)"))?void 0:t.matches},this.activeState="active"}get route(){var t=this.routerRegExp.exec(location.hash)||[],e=t[1],t=t[2],i=location.search;return{id:e?decodeURIComponent(e):"",param:t?decodeURIComponent(t):"",search:i}}get exists(){try{return parseInt(sessionStorage.getItem(location.pathname+"__EXISTS")||"-1",10)===history.length}catch(t){return!1}}get activityApplet(){var t=this.segue.id;return this.applets[t]}get prevActivityApplet(){var t=this.segue.prevId;return this.applets[t]}get activityLevel(){var t;return(null!=(t=null==(t=this.activityApplet)?void 0:t.config.level)?t:0)+1}setExists(){const i=location.pathname+"__EXISTS",s=String(history.length);return new Promise((t,e)=>{try{sessionStorage.setItem(i,s),t()}catch(t){try{sessionStorage.clear(),sessionStorage.setItem(i,s)}catch(t){e()}}})}activate(t){var t=t?"active":"frozen",e="application-"+t;if(window.applicationActiveState!==t){this.activeState=t,this.trigger(t),window.applicationActiveState=t,window.postMessage({type:e},"*");for(const s in this.applets){var i=this.applets[s];i.sandbox&&!i.sameOrigin&&i.triggerWindow(e)}}}}provider=i=>{window.addEventListener("message",t=>{var{action:t,data:e}=t.data;switch(t){case"to":i.segue.to(e.applet,e.query,e.history);break;case"back":i.segue.back();break;case"forward":i.segue.forward();break;case"pushWindow":i.pushWindow(...e)}})};const globalCSSText=`
  html, body {
    width: 100vw;
    height: 100vh;
    min-width: 100vw;
    min-height: 100vh;
    max-width: 100vw;
    max-height: 100vh;
    overflow: hidden;
  }
  define-applet {
    display: block;
  }
`;class Application extends ApplicationState{constructor(t={}){super(),this.tunneling=!1,this.pullRefreshHolder={holder:null,spinner:null,holdLayer:null},this.working=!1,this.root=t.root,this.appletsSpace=t.appletsSpace,this.tunneling=parent!==window&&!!t.tunneling&&parent.__LATH_APPLICATION_AVAILABILITY__,this.segue=new Segue(this,t),this.presetConfig=t,this.to=this.segue.to.bind(this.segue),this.activateTunneling(),provider(this),this.setBaseStyle()}setBaseStyle(){var t=document.createElement("style");t.innerHTML=globalCSSText,document.head.appendChild(t)}add(t,e){var i;return this.applets[t]||((i=null==(i=this.config)?void 0:i.appletManifestProcess)&&(e=i(e)||e),this.applets[t]=new Applet(t,e,this))}del(s){return new Promise((t,e)=>{var i=this.applets[s];i.view?i.destroy().then(t).catch(e):t(!0),delete this.applets[s]})}get(e){var i;return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){if("object"==typeof this.applets[e])return Promise.resolve(this.applets[e]);var t=this.options.applets[e];switch(typeof t){case"function":return Promise.resolve(this.add(e,yield this.promiseApplet(t)));case"object":return Promise.resolve(this.add(e,t));case"string":return this.verifyAppletSrcLegitimacy(e)&&null!=(i=yield this.createAppletByURL(e,{},e))?i:Promise.reject();default:return Promise.reject()}})}defineApplet(t,e){t.setAttribute("applet-id",e),this.appletsSpace.appendChild(t),!0===testHasSlotBug()&&setTimeout(()=>{t.slot="none",setTimeout(()=>{t.slot="applet-"+e},0)},0)}cloneAsNewApplet(t,e,i={}){return e?(i=Object.assign({},t.model.config,i),this.add(e,Object.assign({},t.model,{config:i}))):t}getAppletByURL(n){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=this.config.transfer;if(t){t=t(n);if("string"==typeof t)return this.get(t)}var e=this.applets,t=this.resolveURL(n),i=t.origin+t.pathname;for(const r in e){var s=e[r],o=s.config.capture;if("applet"===s.rel){if(o&&this.captureAppletSrc(n,o))return s;if(s.uri===i)return s}}})}createAppletByURL(i,s,o){var r;return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=decodeURIComponent(i),e=this.applets,e=null!=(r=e[t])?r:yield this.getAppletByURL(i);return e?o?this.cloneAsNewApplet(e,o,s):e:(e=!0!==this.config.disableTransient,this.add(t,{config:Object.assign({title:"",rel:"applet",free:!0,source:{src:i},background:"auto",timeout:e?0:null!=(r=this.config.transientTimeout)?r:6e4,animation:"inherit",color:this.config.color,transient:e},s)}))})}pushWindow(i,s="",o="slide",r,n){var l;return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t,e;return this.verifyAppletSrcLegitimacy(i)?this.tunneling?(parent.postMessage({action:"pushWindow",data:[i,s,o,r,n]},"*"),Promise.resolve()):-1===(t=this.resolveURL(i)).protocol.indexOf("http")?Promise.reject("Unknown"):(t=t.search,(e=yield this.createAppletByURL(i,{title:s,animation:o,level:this.activityLevel},r))?this.segue.to(e.id,null!=(l=null==(l=e.config)?void 0:l.source)&&l.html?t:"",1,n):Promise.reject()):Promise.reject("Illegal")})}pullDependencies(t=[],i=!0){var e=[];for(const s of t)e.push(new Promise((e,t)=>{this.get(s).then(t=>{i?t.prerender().then(e).catch(e):e("")}).catch(t)}));return Promise.all(e)}updateSafeArea(t){this.trigger("safeAreaChange",t)}updateGlobalCSSVariables(t){this.trigger("globalCSSVariablesChange",t)}refresh(){for(const e in this.applets){var t=this.applets[e];t.visibility?t.refresh():t.status.requestRefresh=!0}}install(s,o,r,n){return new Promise((e,i)=>{__webpack_require__.e(/*! import() */ "Lath_app_install-b972f710_js").then(__webpack_require__.bind(__webpack_require__, /*! ./install-b972f710.js */ "../Lath/app/install-b972f710.js")).then(({install:t})=>{t(s,o,r,n).then(e).catch(i)}).catch(t=>{console.warn(t)})})}createAppSwitcher(){__webpack_require__.e(/*! import() */ "Lath_app_index-fbd2f7fa_js").then(__webpack_require__.bind(__webpack_require__, /*! ./index-fbd2f7fa.js */ "../Lath/app/index-fbd2f7fa.js")).then(({AppSwitcher:t})=>{this.appSwitcher=new t(this)}).catch(t=>{console.warn(t)})}createPullToRefreshHolder(){__webpack_require__.e(/*! import() */ "Lath_app_index-248f9a1d_js").then(__webpack_require__.bind(__webpack_require__, /*! ./index-248f9a1d.js */ "../Lath/app/index-248f9a1d.js")).then(t=>{this.pullRefreshHolder=t.createPullToRefreshHolder(this.properties.darkTheme,this.segue.fixedViewport),this.trigger("pullToRefreshAvailable")}).catch(t=>{console.warn(t)})}mountSystem(){this.options.applets.system&&this.get("system").then(t=>{t.build().then(()=>this.trigger("systemDidMount",t))})}mountFramework(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.get("frameworks").then(t=>{var e=this.route;const i=t.config;var s=i.index||"",o=i.preIndex;const r=e.id||s;return this.config=i,this.segue.setup({singleFlow:i.singleFlow,singleLock:i.singleLock,index:s,defaultIndex:r,oneHistory:i.oneHistory,notFound:i.notFound||s,limit:Math.max(i.limit||7,2),defaultAnimation:i.animation,holdBack:i.holdBack,swipeTransitionType:i.swipeTransitionType,swipeModel:t.swipeModel}),Promise.all([this.segue.to("frameworks",void 0,-1).then(()=>{i.pullToRefresh&&this.createPullToRefreshHolder(),i.appSwitcher&&this.createAppSwitcher(),this.trigger("frameworksDidMount",t),window.dispatchEvent(new CustomEvent("lathApplicationReady",{detail:{application:this}}))}),this.mountFirstApplet(r,s,o,i.oneHistory).then(()=>{this.segue.id!==r&&this.resolveURL(r).origin!==location.origin&&this.pushWindow(r)})])}).catch(()=>{(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.t)(1007)})})}createCloneApplet(e){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){var t=e.split("^");1!==t.length&&this.get(t[1]).then(t=>{t=t.model;Object.assign(t.config,{level:this.activityLevel}),this.add(e,t)}).catch(()=>{(0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__.t)(1008,"error",e)})})}mountFirstApplet(t,e,i,s){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return yield this.createCloneApplet(t),s?(this.segue.pushState(e||"frameworks"),t?this.segue.to(t,void 0,1):Promise.resolve()):t!==e&&t!==i?(i&&this.segue.pushState(i),t?this.segue.to(t,void 0,this.exists?-1:1):Promise.resolve()):t?this.segue.to(t,void 0,-1):Promise.resolve()})}activateTunneling(){window.addEventListener("message",t=>{var e=t.data["type"],i=this.activityApplet;if(t.source!==window)switch(e){case"applet-show":null!=i&&i.show();break;case"applet-hide":null!=i&&i.hide();break;case"applet-will-show":null!=i&&i.willShow();break;case"applet-will-hide":null!=i&&i.willHide();break;case"application-active":null!=this&&this.activate(!0);break;case"application-frozen":null!=this&&this.activate(!1)}})}start(){return (0,_index_18a99eb3_js__WEBPACK_IMPORTED_MODULE_0__._)(this,void 0,void 0,function*(){return this.options.applets?this.working?Promise.reject("repeat"):(this.working=!0,this.setExists(),this.mountSystem(),this.mountFramework().then(()=>{this.trigger("firstAppletDidMount")})):Promise.reject("Please configure the applet first!")})}}index=Object.freeze({__proto__:null,Application:Application});

/***/ })

}]);
//# sourceMappingURL=Lath_app_index-6dbce2a7_js.js.map